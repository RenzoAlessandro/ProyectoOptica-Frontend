(self.webpackChunkminible_ng=self.webpackChunkminible_ng||[]).push([[188],{7082:function(Se,H){!function(c){"use strict";var A="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},d={weekdays:{shorthand:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],longhand:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"]},months:{shorthand:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],longhand:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},ordinal:function(){return"\xba"},firstDayOfWeek:1,rangeSeparator:" a ",time_24hr:!0};A.l10ns.es=d;var p=A.l10ns;c.Spanish=d,c.default=p,Object.defineProperty(c,"__esModule",{value:!0})}(H)},12188:(Se,H,c)=>{"use strict";c.r(H),c.d(H,{SaleModule:()=>ho});var A=c(86019),d=c(49133),p=c(20154),B=c(40345),de=c(98816),ce=c(16541),ue=c(41867),Ne=c(5426),ye=c(63091),me=c(56225),te=c(85298),Y=c(64762),e=c(83668);const Ue={asc:"desc",desc:"","":"asc"};let Me=(()=>{class i{constructor(){this.sortable="",this.direction="",this.sort=new e.vpe}rotate(){this.direction=Ue[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.rotate()}),2&t&&e.ekj("asc","asc"===o.direction)("desc","desc"===o.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}}),i})();class _e{constructor(){this.list_monturas=[],this.list_lunas=[],this.list_accesorios=[],this.tipo_venta=[]}}class Pe{}var Ee=c(1659),w=c.n(Ee),Z=c(63782),Je=c(54900),j=c.n(Je),ge=c(52653),O=c(4680),pe=c(16550),we=c(91917),he=c(95686),$=c(20566),I=c(18260),Ve=c(44522);let k=(()=>{class i{constructor(t){this.http=t}getVentas(){return this.http.get(I.N.urlBackend+"getAllVentas")}getVentasbySede(t){return this.http.get(I.N.urlBackend+"getAllVentasBySede/"+t)}getVentasByDate(t,o,a){return this.http.get(I.N.urlBackend+"getAllVentasByDate/"+t+"/"+o+"/"+a)}darBajaVenta(t){return this.http.put(I.N.urlBackend+"unsubscribeVentasById/"+t,t)}updatePagoCuotas(t,o){return this.http.put(I.N.urlBackend+"updatePagoCuotasVentaById/"+t,o)}getVentasEliminadasbySede(t){return this.http.get(I.N.urlBackend+"getAllVentasEliminadasBySede/"+t)}getPDF(t){return this.http.post(I.N.urlBackend+"getPDF",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ve.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var oe=c(11950),Ze=c(94774),ie=c(48185);const De=["autocomplete"];function Le(i,n){}function ze(i,n){if(1&i&&e.YNc(0,Le,0,0,"ng-template",47),2&i){e.oxw();const t=e.MAs(27);e.Q6J("ngTemplateOutlet",t)}}function Oe(i,n){}function Ie(i,n){if(1&i&&e.YNc(0,Oe,0,0,"ng-template",47),2&i){e.oxw();const t=e.MAs(29);e.Q6J("ngTemplateOutlet",t)}}function Re(i,n){}function Fe(i,n){if(1&i&&e.YNc(0,Re,0,0,"ng-template",47),2&i){e.oxw();const t=e.MAs(31);e.Q6J("ngTemplateOutlet",t)}}function ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",63),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(13);return e.oxw(2).copyText(a)}),e._UZ(3,"i",64),e.qZA(),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",null,65),e._uU(14),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit;e.xp6(5),e.hij(" ",t.codigo," "),e.xp6(2),e.hij(" ",t.material," "),e.xp6(2),e.hij(" ",t.marca," "),e.xp6(2),e.hij(" ",t.color," "),e.xp6(3),e.hij(" ",t.id_producto," ")}}function Qe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"div",49),e.TgZ(2,"div",50),e.TgZ(3,"div",51),e.TgZ(4,"form",52),e.TgZ(5,"div",53),e.TgZ(6,"ng-select",54),e.NdJ("change",function(){return e.CHM(t),e.oxw().changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",50),e.TgZ(8,"div",51),e.TgZ(9,"div",55),e.TgZ(10,"div",26),e.TgZ(11,"input",56),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().searchtext=a}),e.qZA(),e._UZ(12,"i",57),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",22),e.TgZ(14,"div",58),e.TgZ(15,"table",59),e.TgZ(16,"thead",38),e.TgZ(17,"tr"),e.TgZ(18,"th"),e._uU(19,"Copiar"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Cod. Int."),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Material"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Marca"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Color"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"C\xf3d. id."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"tbody"),e.YNc(31,ke,15,5,"tr",40),e.ALo(32,"slice"),e.ALo(33,"filter"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",60),e.TgZ(35,"div",51),e.TgZ(36,"div",61),e.TgZ(37,"ngb-pagination",62),e.NdJ("pageChange",function(a){return e.CHM(t),e.oxw().currentPage=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSedes),e.xp6(2),e.s9C("formControlName",t.nombre_sedes),e.Q6J("items",t.listSedes),e.xp6(5),e.Q6J("ngModel",t.searchtext),e.xp6(20),e.Q6J("ngForOf",e.Dn7(32,9,e.xi3(33,13,t.listMonturasforSale,t.searchtext),(t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize)),e.xp6(6),e.Q6J("collectionSize",(null==t.listMonturasforSale?null:t.listMonturasforSale.length)||0)("page",t.currentPage)("pageSize",t.pageSize)("maxSize",3)}}function He(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",63),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(7);return e.oxw(2).copyText(a)}),e._UZ(3,"i",64),e.qZA(),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",null,65),e._uU(8),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit;e.xp6(5),e.hij(" ",t.material," "),e.xp6(3),e.hij(" ",t.id_producto," ")}}function Be(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"div",49),e.TgZ(2,"div",50),e.TgZ(3,"div",51),e.TgZ(4,"form",52),e.TgZ(5,"div",53),e.TgZ(6,"ng-select",54),e.NdJ("change",function(){return e.CHM(t),e.oxw().changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",50),e.TgZ(8,"div",51),e.TgZ(9,"div",55),e.TgZ(10,"div",26),e.TgZ(11,"input",66),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().searchtext=a}),e.qZA(),e._UZ(12,"i",57),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",22),e.TgZ(14,"div",58),e.TgZ(15,"table",59),e.TgZ(16,"thead",38),e.TgZ(17,"tr"),e.TgZ(18,"th"),e._uU(19,"Copiar"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Material"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"C\xf3d. id."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"tbody"),e.YNc(25,He,9,2,"tr",40),e.ALo(26,"slice"),e.ALo(27,"filter"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",60),e.TgZ(29,"div",51),e.TgZ(30,"div",61),e.TgZ(31,"ngb-pagination",62),e.NdJ("pageChange",function(a){return e.CHM(t),e.oxw().currentPage=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSedes),e.xp6(2),e.s9C("formControlName",t.nombre_sedes),e.Q6J("items",t.listSedes),e.xp6(5),e.Q6J("ngModel",t.searchtext),e.xp6(14),e.Q6J("ngForOf",e.Dn7(26,9,e.xi3(27,13,t.listLunasforSale,t.searchtext),(t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize)),e.xp6(6),e.Q6J("collectionSize",(null==t.listLunasforSale?null:t.listLunasforSale.length)||0)("page",t.currentPage)("pageSize",t.pageSize)("maxSize",3)}}function Ye(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",63),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(7);return e.oxw(2).copyText(a)}),e._UZ(3,"i",64),e.qZA(),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",null,65),e._uU(8),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit;e.xp6(5),e.hij(" ",t.nombre_accesorio," "),e.xp6(3),e.hij(" ",t.id_producto," ")}}function je(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",48),e.TgZ(1,"div",49),e.TgZ(2,"div",50),e.TgZ(3,"div",51),e.TgZ(4,"form",52),e.TgZ(5,"div",53),e.TgZ(6,"ng-select",54),e.NdJ("change",function(){return e.CHM(t),e.oxw().changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",50),e.TgZ(8,"div",51),e.TgZ(9,"div",55),e.TgZ(10,"div",26),e.TgZ(11,"input",66),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().searchtext=a}),e.qZA(),e._UZ(12,"i",57),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",22),e.TgZ(14,"div",58),e.TgZ(15,"table",59),e.TgZ(16,"thead",38),e.TgZ(17,"tr"),e.TgZ(18,"th"),e._uU(19,"Copiar"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Nombre"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"C\xf3d. id."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"tbody"),e.YNc(25,Ye,9,2,"tr",40),e.ALo(26,"slice"),e.ALo(27,"filter"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",60),e.TgZ(29,"div",51),e.TgZ(30,"div",61),e.TgZ(31,"ngb-pagination",62),e.NdJ("pageChange",function(a){return e.CHM(t),e.oxw().currentPage=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSedes),e.xp6(2),e.s9C("formControlName",t.nombre_sedes),e.Q6J("items",t.listSedes),e.xp6(5),e.Q6J("ngModel",t.searchtext),e.xp6(14),e.Q6J("ngForOf",e.Dn7(26,9,e.xi3(27,13,t.listAccesoriosforSale,t.searchtext),(t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize)),e.xp6(6),e.Q6J("collectionSize",(null==t.listAccesoriosforSale?null:t.listAccesoriosforSale.length)||0)("page",t.currentPage)("pageSize",t.pageSize)("maxSize",3)}}function $e(i,n){1&i&&e._UZ(0,"a",67),2&i&&e.Q6J("innerHTML",n.$implicit.id_producto,e.oJD)}function Ge(i,n){1&i&&e._UZ(0,"div",67),2&i&&e.Q6J("innerHTML",n.$implicit,e.oJD)}function Ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",68),e.TgZ(1,"form",52),e.TgZ(2,"div",53),e.TgZ(3,"ng-select",54),e.NdJ("change",function(){return e.CHM(t),e.oxw().changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.formSedes),e.xp6(2),e.s9C("formControlName",t.nombre_sedes),e.Q6J("items",t.listSedes)}}function We(i,n){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ngb-highlight",69),e._uU(2,"\xa0 "),e._UZ(3,"ngb-highlight",69),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("result",t.material),e.xp6(2),e.Q6J("result",t.marca)}}function Xe(i,n){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ngb-highlight",69),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("result",t.material)}}function et(i,n){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ngb-highlight",69),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("result",t.nombre_accesorio)}}function tt(i,n){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ngb-highlight",69),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("result",e.xi3(2,1,t.precio_montura_v,"S/ "))}}function ot(i,n){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ngb-highlight",69),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("result",e.xi3(2,1,t.precio_luna_v,"S/ "))}}function it(i,n){if(1&i&&(e.TgZ(0,"td"),e._UZ(1,"ngb-highlight",69),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("result",e.xi3(2,1,t.precio_accesorio_v,"S/ "))}}function at(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"ngb-highlight",69),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngb-highlight",69),e.qZA(),e.YNc(5,We,4,2,"td",70),e.YNc(6,Xe,2,1,"td",70),e.YNc(7,et,2,1,"td",70),e.TgZ(8,"td"),e._UZ(9,"ngb-highlight",69),e.qZA(),e.YNc(10,tt,3,4,"td",70),e.YNc(11,ot,3,4,"td",70),e.YNc(12,it,3,4,"td",70),e.TgZ(13,"td"),e._UZ(14,"ngb-highlight",69),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td"),e.TgZ(17,"a",71),e.TgZ(18,"i",72),e.NdJ("click",function(a){const l=e.CHM(t).index;return e.oxw().substractQuantityProduct(a,l)}),e.qZA(),e.qZA(),e.TgZ(19,"a",73),e.TgZ(20,"i",74),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.num=a})("click",function(a){const l=e.CHM(t).index;return e.oxw().addQuantityProduct(a,l)}),e.qZA(),e.qZA(),e.TgZ(21,"a",75),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(),_=e.MAs(85);return l.centerModalEditarPrecio(_,r)}),e._UZ(22,"i",76),e.qZA(),e.TgZ(23,"a",77),e.TgZ(24,"i",78),e.NdJ("click",function(a){const l=e.CHM(t).index;return e.oxw().removeCartProduct(a,l)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit,o=n.index;e.xp6(2),e.Q6J("result",o+1),e.xp6(2),e.Q6J("result",t.tipo),e.xp6(1),e.Q6J("ngIf","montura"==t.tipo),e.xp6(1),e.Q6J("ngIf","luna"==t.tipo),e.xp6(1),e.Q6J("ngIf","accesorio"==t.tipo),e.xp6(2),e.Q6J("result",t.cant_vendida),e.xp6(1),e.Q6J("ngIf","montura"==t.tipo),e.xp6(1),e.Q6J("ngIf","luna"==t.tipo),e.xp6(1),e.Q6J("ngIf","accesorio"==t.tipo),e.xp6(2),e.Q6J("result",e.xi3(15,11,t.precio,"S/ ")),e.xp6(6),e.Q6J("ngModel",t.num)}}function nt(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function rt(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros "),e.qZA())}const U=function(i){return{"is-invalid":i}};function st(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",79),e.TgZ(1,"h5",80),e._uU(2,"Cambio de Precio"),e.qZA(),e.TgZ(3,"button",81),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e.qZA(),e.qZA(),e.TgZ(4,"form",52),e.TgZ(5,"div",82),e.TgZ(6,"div",22),e.TgZ(7,"div",83),e.TgZ(8,"label",84),e._uU(9,"Precio Original"),e.qZA(),e._UZ(10,"input",85),e.qZA(),e.TgZ(11,"div",83),e.TgZ(12,"div",86),e.TgZ(13,"label",87),e._uU(14,"Nuevo Precio de Venta"),e.qZA(),e._UZ(15,"input",88),e.TgZ(16,"div",89),e.YNc(17,nt,2,0,"div",70),e.YNc(18,rt,2,0,"div",70),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",90),e.TgZ(20,"button",91),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e._uU(21," Cerrar "),e.qZA(),e.TgZ(22,"button",92),e.NdJ("click",function(){return e.CHM(t),e.oxw().actualizarPrecio()}),e._uU(23," Guardar "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formEditarPrecio),e.xp6(6),e.s9C("formControlName",t.precioOriginal_Editar),e.xp6(5),e.s9C("formControlName",t.nuevoPrecio_Editar),e.Q6J("ngClass",e.VKq(6,U,t.formEP.campoNuevoPrecioEditar.invalid&&(t.formEP.campoNuevoPrecioEditar.dirty||t.formEP.campoNuevoPrecioEditar.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formEP.campoNuevoPrecioEditar.errors?null:t.formEP.campoNuevoPrecioEditar.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formEP.campoNuevoPrecioEditar.errors?null:t.formEP.campoNuevoPrecioEditar.errors.pattern)}}function lt(i,n){1&i&&(e.TgZ(0,"div",124),e._uU(1," Campo requerido "),e.qZA())}function dt(i,n){1&i&&(e.TgZ(0,"div",124),e._uU(1," Ingrese como m\xe1ximo 2 decimales "),e.qZA())}function ct(i,n){if(1&i&&(e.TgZ(0,"div",124),e.YNc(1,lt,2,0,"div",109),e.YNc(2,dt,2,0,"div",109),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formContado.controls.campoCantidadRecibidaContado.errors.required),e.xp6(1),e.Q6J("ngIf",t.formContado.controls.campoCantidadRecibidaContado.errors.pattern)}}function ut(i,n){1&i&&(e.TgZ(0,"div",124),e._uU(1," Campo requerido "),e.qZA())}function mt(i,n){if(1&i&&(e.TgZ(0,"div",124),e.YNc(1,ut,2,0,"div",109),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formContado.controls.campoMetodoPagoContado.errors.required)}}function _t(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"This value is required."),e.qZA())}function gt(i,n){if(1&i&&(e.TgZ(0,"div",89),e.YNc(1,_t,2,0,"span",70),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.title.errors.required)}}function pt(i,n){1&i&&e._UZ(0,"a",67),2&i&&e.Q6J("innerHTML",n.$implicit.nombres_apellidos,e.oJD)}function ht(i,n){1&i&&e._UZ(0,"div",67),2&i&&e.Q6J("innerHTML",n.$implicit,e.oJD)}function Zt(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ft(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo letras "),e.qZA())}function At(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",103),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(2).saveEvent()}),e.TgZ(1,"div",104),e.TgZ(2,"div",105),e.TgZ(3,"div",106),e.TgZ(4,"label",107),e._uU(5,"Cantidad Recibida"),e.qZA(),e.TgZ(6,"input",108),e.NdJ("change",function(a){return e.CHM(t),e.oxw(2).updatePago(a)}),e.qZA(),e.YNc(7,ct,3,2,"div",109),e.qZA(),e.qZA(),e.TgZ(8,"div",105),e.TgZ(9,"div",106),e.TgZ(10,"label",110),e._uU(11,"M\xe9todo"),e.qZA(),e._UZ(12,"ng-select",111),e.YNc(13,mt,2,1,"div",109),e.qZA(),e.qZA(),e.TgZ(14,"div",105),e.TgZ(15,"div",106),e.TgZ(16,"label",107),e._uU(17,"Fecha"),e.qZA(),e._UZ(18,"input",112),e.YNc(19,gt,2,1,"div",113),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",22),e.TgZ(21,"div",51),e.TgZ(22,"div",106),e.TgZ(23,"label",107),e._uU(24,"Buscar Cliente"),e.qZA(),e.TgZ(25,"ng-autocomplete",114),e.NdJ("selected",function(a){return e.CHM(t),e.oxw(2).selectEventCliente(a)}),e.qZA(),e.YNc(26,pt,1,1,"ng-template",null,115,e.W1O),e.YNc(28,ht,1,1,"ng-template",null,30,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",22),e.TgZ(31,"div",51),e.TgZ(32,"label",116),e._uU(33,"Montos:"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",22),e.TgZ(35,"div",105),e.TgZ(36,"div",106),e.TgZ(37,"label",107),e._uU(38,"Total"),e.qZA(),e._UZ(39,"input",117),e.qZA(),e.qZA(),e.TgZ(40,"div",105),e.TgZ(41,"div",106),e.TgZ(42,"label",107),e._uU(43,"Pago"),e.qZA(),e._UZ(44,"input",118),e.qZA(),e.qZA(),e.TgZ(45,"div",105),e.TgZ(46,"div",106),e.TgZ(47,"label",107),e._uU(48,"Cambio"),e.qZA(),e._UZ(49,"input",119),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",22),e.TgZ(51,"div",34),e.TgZ(52,"div",106),e.TgZ(53,"label",120),e._uU(54,"Observaciones"),e.qZA(),e._UZ(55,"textarea",121),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",22),e.TgZ(57,"div",34),e.TgZ(58,"div",86),e.TgZ(59,"label",122),e._uU(60,"Responsable de la Venta"),e.qZA(),e._UZ(61,"input",123),e.TgZ(62,"div",89),e.YNc(63,Zt,2,0,"div",70),e.YNc(64,ft,2,0,"div",70),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",41),e.TgZ(66,"button",91),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).closeEventModal()}),e._uU(67," Cerrar "),e.qZA(),e.TgZ(68,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).guardarVenta()}),e._uU(69," Registrar Venta "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(27),o=e.MAs(29),a=e.oxw(2);e.Q6J("formGroup",a.formContado),e.xp6(6),e.s9C("formControlName",a.cantidadRecibida_Contado),e.xp6(1),e.Q6J("ngIf",a.formContado.controls.campoCantidadRecibidaContado.invalid&&(a.formContado.controls.campoCantidadRecibidaContado.dirty||a.formContado.controls.campoCantidadRecibidaContado.touched)),e.xp6(5),e.s9C("formControlName",a.metodoPagoContado),e.Q6J("items",a.listMetodosPagos),e.xp6(1),e.Q6J("ngIf",a.formContado.controls.campoMetodoPagoContado.invalid&&(a.formContado.controls.campoMetodoPagoContado.dirty||a.formContado.controls.campoMetodoPagoContado.touched)),e.xp6(5),e.s9C("formControlName",a.fechaVenta_Contado),e.Q6J("ngClass",e.VKq(26,U,a.submitted&&a.form.title.errors)),e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.title.errors),e.xp6(6),e.s9C("formControlName",a.nombreContado),e.Q6J("data",a.listClients)("searchKeyword",a.keywordCliente)("itemTemplate",t)("notFoundTemplate",o),e.xp6(14),e.s9C("formControlName",a.precioTotal_Contado),e.Q6J("ngClass",e.VKq(28,U,a.submitted&&a.form.title.errors)),e.xp6(5),e.s9C("formControlName",a.pago_Contado),e.Q6J("ngClass",e.VKq(30,U,a.submitted&&a.form.title.errors)),e.xp6(5),e.s9C("formControlName",a.cambio_Contado),e.Q6J("ngClass",e.VKq(32,U,a.submitted&&a.form.title.errors)),e.xp6(6),e.s9C("formControlName",a.observaciones_Contado),e.xp6(6),e.s9C("formControlName",a.vendedor_Contado),e.Q6J("ngClass",e.VKq(34,U,a.formVContado.campoVendedorContado.invalid&&(a.formVContado.campoVendedorContado.dirty||a.formVContado.campoVendedorContado.touched))),e.xp6(2),e.Q6J("ngIf",null==a.formVContado.campoVendedorContado.errors?null:a.formVContado.campoVendedorContado.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.formVContado.campoVendedorContado.errors?null:a.formVContado.campoVendedorContado.errors.pattern),e.xp6(4),e.Q6J("disabled",!a.formContado.valid)}}function Ct(i,n){1&i&&(e.TgZ(0,"div",124),e._uU(1," Campo requerido "),e.qZA())}function bt(i,n){1&i&&(e.TgZ(0,"div",124),e._uU(1," Ingrese como m\xe1ximo 2 decimales "),e.qZA())}function vt(i,n){if(1&i&&(e.TgZ(0,"div",124),e.YNc(1,Ct,2,0,"div",109),e.YNc(2,bt,2,0,"div",109),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formCredito.controls.campoCantidadRecibidaCredito.errors.required),e.xp6(1),e.Q6J("ngIf",t.formCredito.controls.campoCantidadRecibidaCredito.errors.pattern)}}function Tt(i,n){1&i&&(e.TgZ(0,"div",124),e._uU(1," Campo requerido "),e.qZA())}function xt(i,n){if(1&i&&(e.TgZ(0,"div",124),e.YNc(1,Tt,2,0,"div",109),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formCredito.controls.campoMetodoPagoCredito.errors.required)}}function qt(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"This value is required."),e.qZA())}function St(i,n){if(1&i&&(e.TgZ(0,"div",89),e.YNc(1,qt,2,0,"span",70),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.title.errors.required)}}function Nt(i,n){1&i&&e._UZ(0,"a",67),2&i&&e.Q6J("innerHTML",n.$implicit.nombres_apellidos,e.oJD)}function yt(i,n){1&i&&e._UZ(0,"div",67),2&i&&e.Q6J("innerHTML",n.$implicit,e.oJD)}function Ut(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Mt(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo letras "),e.qZA())}function Pt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",103),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(2).saveEvent()}),e.TgZ(1,"div",104),e.TgZ(2,"div",105),e.TgZ(3,"div",106),e.TgZ(4,"label",107),e._uU(5,"Cantidad Recibida"),e.qZA(),e.TgZ(6,"input",125),e.NdJ("change",function(a){return e.CHM(t),e.oxw(2).updatePago(a)}),e.qZA(),e.YNc(7,vt,3,2,"div",109),e.qZA(),e.qZA(),e.TgZ(8,"div",105),e.TgZ(9,"div",106),e.TgZ(10,"label",110),e._uU(11,"M\xe9todo"),e.qZA(),e._UZ(12,"ng-select",111),e.YNc(13,xt,2,1,"div",109),e.qZA(),e.qZA(),e.TgZ(14,"div",105),e.TgZ(15,"div",106),e.TgZ(16,"label",107),e._uU(17,"Fecha"),e.qZA(),e._UZ(18,"input",126),e.YNc(19,St,2,1,"div",113),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",22),e.TgZ(21,"div",51),e.TgZ(22,"div",106),e.TgZ(23,"label",107),e._uU(24,"N\xfamero de Cuotas"),e.qZA(),e.TgZ(25,"div",127),e.TgZ(26,"ng5-slider",128),e.NdJ("valueChange",function(a){return e.CHM(t),e.oxw(2).tickValue=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",22),e.TgZ(28,"div",51),e.TgZ(29,"div",106),e.TgZ(30,"label",107),e._uU(31,"Buscar o Crear nuevo Cliente"),e.qZA(),e.TgZ(32,"ng-autocomplete",129),e.NdJ("selected",function(a){return e.CHM(t),e.oxw(2).selectEventCliente(a)}),e.qZA(),e.YNc(33,Nt,1,1,"ng-template",null,130,e.W1O),e.YNc(35,yt,1,1,"ng-template",null,30,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",22),e.TgZ(38,"div",51),e.TgZ(39,"label",116),e._uU(40,"Montos:"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",22),e.TgZ(42,"div",105),e.TgZ(43,"div",106),e.TgZ(44,"label",107),e._uU(45,"Total"),e.qZA(),e._UZ(46,"input",131),e.qZA(),e.qZA(),e.TgZ(47,"div",105),e.TgZ(48,"div",106),e.TgZ(49,"label",107),e._uU(50,"Pago"),e.qZA(),e._UZ(51,"input",132),e.qZA(),e.qZA(),e.TgZ(52,"div",105),e.TgZ(53,"div",106),e.TgZ(54,"label",107),e._uU(55,"Deuda"),e.qZA(),e._UZ(56,"input",133),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",22),e.TgZ(58,"div",34),e.TgZ(59,"div",106),e.TgZ(60,"label",120),e._uU(61,"Observaciones"),e.qZA(),e._UZ(62,"textarea",121),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",22),e.TgZ(64,"div",34),e.TgZ(65,"div",86),e.TgZ(66,"label",122),e._uU(67,"Responsable de la Venta"),e.qZA(),e._UZ(68,"input",134),e.TgZ(69,"div",89),e.YNc(70,Ut,2,0,"div",70),e.YNc(71,Mt,2,0,"div",70),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",41),e.TgZ(73,"button",91),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).closeEventModal()}),e._uU(74," Cerrar "),e.qZA(),e.TgZ(75,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).guardarVenta()}),e._uU(76," Registrar Venta "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(34),o=e.MAs(36),a=e.oxw(2);e.Q6J("formGroup",a.formCredito),e.xp6(6),e.s9C("formControlName",a.cantidadRecibida_Credito),e.xp6(1),e.Q6J("ngIf",a.formCredito.controls.campoCantidadRecibidaCredito.invalid&&(a.formCredito.controls.campoCantidadRecibidaCredito.dirty||a.formCredito.controls.campoCantidadRecibidaCredito.touched)),e.xp6(5),e.s9C("formControlName",a.metodoPagoCredito),e.Q6J("items",a.listMetodosPagos),e.xp6(1),e.Q6J("ngIf",a.formCredito.controls.campoMetodoPagoCredito.invalid&&(a.formCredito.controls.campoMetodoPagoCredito.dirty||a.formCredito.controls.campoMetodoPagoCredito.touched)),e.xp6(5),e.s9C("formControlName",a.fechaVenta_Credito),e.Q6J("ngClass",e.VKq(28,U,a.submitted&&a.form.title.errors)),e.xp6(1),e.Q6J("ngIf",a.submitted&&a.form.title.errors),e.xp6(7),e.Q6J("value",a.tickValue)("options",a.tickValueoptions),e.xp6(6),e.s9C("formControlName",a.nombreCredito),e.Q6J("data",a.listClients)("searchKeyword",a.keywordCliente)("itemTemplate",t)("notFoundTemplate",o),e.xp6(14),e.s9C("formControlName",a.precioTotal_Credito),e.Q6J("ngClass",e.VKq(30,U,a.submitted&&a.form.title.errors)),e.xp6(5),e.s9C("formControlName",a.pago_Credito),e.Q6J("ngClass",e.VKq(32,U,a.submitted&&a.form.title.errors)),e.xp6(5),e.s9C("formControlName",a.cambio_Credito),e.Q6J("ngClass",e.VKq(34,U,a.submitted&&a.form.title.errors)),e.xp6(6),e.s9C("formControlName",a.observaciones_Credito),e.xp6(6),e.s9C("formControlName",a.vendedor_Credito),e.Q6J("ngClass",e.VKq(36,U,a.formVCredito.campoVendedorCredito.invalid&&(a.formVCredito.campoVendedorCredito.dirty||a.formVCredito.campoVendedorCredito.touched))),e.xp6(2),e.Q6J("ngIf",null==a.formVCredito.campoVendedorCredito.errors?null:a.formVCredito.campoVendedorCredito.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.formVCredito.campoVendedorCredito.errors?null:a.formVCredito.campoVendedorCredito.errors.pattern),e.xp6(4),e.Q6J("disabled",!a.formCredito.valid)}}function Et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",79),e.TgZ(1,"h5",93),e._uU(2,"Registrar Venta"),e.qZA(),e.TgZ(3,"button",81),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",94),e.TgZ(5,"div",95),e.TgZ(6,"ul",96,97),e.NdJ("navChange",function(a){return e.CHM(t),e.oxw().selectorMetodoPago(a)}),e.TgZ(8,"li",98),e.TgZ(9,"a",99),e.TgZ(10,"span",100),e._UZ(11,"i",101),e.qZA(),e.TgZ(12,"span",10),e._uU(13,"Al Contado"),e.qZA(),e.qZA(),e.YNc(14,At,70,36,"ng-template",11),e.qZA(),e.TgZ(15,"li",98),e.TgZ(16,"a",99),e.TgZ(17,"span",100),e._UZ(18,"i",102),e.qZA(),e.TgZ(19,"span",10),e._uU(20,"Al Cr\xe9dito"),e.qZA(),e.qZA(),e.YNc(21,Pt,77,38,"ng-template",11),e.qZA(),e.qZA(),e._UZ(22,"div",14),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(7),o=e.oxw();e.xp6(6),e.Q6J("activeId",o.activePago),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(7),e.Q6J("ngbNavItem",2),e.xp6(7),e.Q6J("ngbNavOutlet",t)}}function Jt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",79),e.TgZ(1,"h5",80),e._uU(2,"Factura de Venta"),e.qZA(),e.TgZ(3,"button",135),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e.qZA(),e.qZA(),e.TgZ(4,"div",82),e.TgZ(5,"div",22),e.TgZ(6,"div",34),e.TgZ(7,"div",136),e.TgZ(8,"div",20),e.TgZ(9,"div",137),e.TgZ(10,"h4",138),e._uU(11,"Factura #MN0131 "),e.TgZ(12,"span",139),e._uU(13,"Paid"),e.qZA(),e.qZA(),e.TgZ(14,"div",86),e._UZ(15,"img",140),e.qZA(),e.TgZ(16,"div",141),e.TgZ(17,"p",142),e._UZ(18,"i",143),e._uU(19,"641 Counts Lane Wilmore, KY 40390"),e.qZA(),e.TgZ(20,"p",142),e._UZ(21,"i",144),e._uU(22," abc@123.com"),e.qZA(),e.TgZ(23,"p"),e._UZ(24,"i",145),e._uU(25," 012-345-6789"),e.qZA(),e.qZA(),e.qZA(),e._UZ(26,"hr",146),e.TgZ(27,"div",22),e.TgZ(28,"div",83),e.TgZ(29,"div",141),e.TgZ(30,"h5",147),e._uU(31,"Facturado a:"),e.qZA(),e.TgZ(32,"h5",148),e._uU(33,"Preston Miller"),e.qZA(),e.TgZ(34,"p",142),e._uU(35,"4450 Fancher Drive Dallas, TX 75247"),e.qZA(),e.TgZ(36,"p",142),e._uU(37,"PrestonMiller@armyspy.com"),e.qZA(),e.TgZ(38,"p"),e._uU(39,"001-234-5678"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",83),e.TgZ(41,"div",149),e.TgZ(42,"div"),e.TgZ(43,"h5",150),e._uU(44,"N\xba de Factura:"),e.qZA(),e.TgZ(45,"p"),e._uU(46,"#MN0131"),e.qZA(),e.qZA(),e.TgZ(47,"div",151),e.TgZ(48,"h5",150),e._uU(49,"Fecha de la Factura:"),e.qZA(),e.TgZ(50,"p"),e._uU(51,"09 Jul, 2020"),e.qZA(),e.qZA(),e.TgZ(52,"div",151),e.TgZ(53,"h5",150),e._uU(54,"N\xba de pedido:"),e.qZA(),e.TgZ(55,"p"),e._uU(56,"#1123456"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",152),e.TgZ(58,"h5",153),e._uU(59,"Resumen del Pedido"),e.qZA(),e.TgZ(60,"div",58),e.TgZ(61,"table",154),e.TgZ(62,"thead"),e.TgZ(63,"tr"),e.TgZ(64,"th",155),e._uU(65,"No."),e.qZA(),e.TgZ(66,"th"),e._uU(67,"Detalle"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"Precio"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"Cantidad"),e.qZA(),e.TgZ(72,"th",156),e._uU(73,"Total"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"tbody"),e.TgZ(75,"tr"),e.TgZ(76,"th",157),e._uU(77,"01"),e.qZA(),e.TgZ(78,"td"),e.TgZ(79,"h5",158),e._uU(80,"Nike N012 Running Shoes"),e.qZA(),e.TgZ(81,"ul",159),e.TgZ(82,"li",160),e._uU(83,"Color : "),e.TgZ(84,"span",161),e._uU(85,"Gray"),e.qZA(),e.qZA(),e.TgZ(86,"li",160),e._uU(87,"Size : "),e.TgZ(88,"span",161),e._uU(89,"08"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(90,"td"),e._uU(91,"$260"),e.qZA(),e.TgZ(92,"td"),e._uU(93,"1"),e.qZA(),e.TgZ(94,"td",162),e._uU(95,"PEN 260.00"),e.qZA(),e.qZA(),e.TgZ(96,"tr"),e.TgZ(97,"th",157),e._uU(98,"02"),e.qZA(),e.TgZ(99,"td"),e.TgZ(100,"h5",158),e._uU(101,"Adidas Running Shoes"),e.qZA(),e.TgZ(102,"ul",159),e.TgZ(103,"li",160),e._uU(104,"Color : "),e.TgZ(105,"span",161),e._uU(106,"Black"),e.qZA(),e.qZA(),e.TgZ(107,"li",160),e._uU(108,"Size : "),e.TgZ(109,"span",161),e._uU(110,"09"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(111,"td"),e._uU(112,"$250"),e.qZA(),e.TgZ(113,"td"),e._uU(114,"1"),e.qZA(),e.TgZ(115,"td",162),e._uU(116,"PEN 250.00"),e.qZA(),e.qZA(),e.TgZ(117,"tr"),e.TgZ(118,"th",163),e._uU(119,"Sub Total"),e.qZA(),e.TgZ(120,"td",162),e._uU(121,"PEN 510.00"),e.qZA(),e.qZA(),e.TgZ(122,"tr"),e.TgZ(123,"th",164),e._uU(124," Descuento :"),e.qZA(),e.TgZ(125,"td",165),e._uU(126,"- PEN 50.00"),e.qZA(),e.qZA(),e.TgZ(127,"tr"),e.TgZ(128,"th",164),e._uU(129," Costo de env\xedo :"),e.qZA(),e.TgZ(130,"td",165),e._uU(131,"PEN 25.00"),e.qZA(),e.qZA(),e.TgZ(132,"tr"),e.TgZ(133,"th",164),e._uU(134," Impuesto (IGV)"),e.qZA(),e.TgZ(135,"td",165),e._uU(136,"PEN 13.00"),e.qZA(),e.qZA(),e.TgZ(137,"tr"),e.TgZ(138,"th",164),e._uU(139,"Total"),e.qZA(),e.TgZ(140,"td",165),e.TgZ(141,"h4",166),e._uU(142,"PEN 498.00"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(143,"div",90),e.TgZ(144,"a",167),e._UZ(145,"i",168),e.qZA(),e.TgZ(146,"a",169),e._UZ(147,"i",170),e.qZA(),e.TgZ(148,"button",171),e.NdJ("click",function(){return e.CHM(t).$implicit.close("Close click")}),e._uU(149,"Cerrar"),e.qZA(),e.TgZ(150,"button",172),e._uU(151,"Guardar cambios"),e.qZA(),e.qZA()}}j().vfs=ge.I.vfs;let wt=(()=>{class i{constructor(t,o,a,r,l,_){this.fb=t,this.modalService=o,this.productosService=a,this.customerService=r,this.usuarioService=l,this.ventaService=_,this.role="Admin",this.nombre_sedes="campoSede",this.idSede="",this.currentPage=1,this.pageSize=10,this.submitted_Contado=!1,this.cantidadRecibida_Contado="campoCantidadRecibidaContado",this.fechaVenta_Contado="campoFechaVentaContado",this.usuario_Contado="campoUsuarioContado",this.nombreContado="campoNombreContado",this.precioTotal_Contado="campoPrecioTotalContado",this.pago_Contado="campoPagoContado",this.cambio_Contado="campoCambioContado",this.observaciones_Contado="campoObservacionesContado",this.vendedor_Contado="campoVendedorContado",this.metodoPagoContado="campoMetodoPagoContado",this.cantidadRecibida_Credito="campoCantidadRecibidaCredito",this.fechaVenta_Credito="campoFechaVentaCredito",this.usuario_Credito="campoUsuarioCredito",this.nombreCredito="campoNombreCredito",this.precioTotal_Credito="campoPrecioTotalCredito",this.pago_Credito="campoPagoCredito",this.cambio_Credito="campoCambioCredito",this.observaciones_Credito="campoObservacionesCredito",this.vendedor_Credito="campoVendedorCredito",this.metodoPagoCredito="campoMetodoPagoCredito",this.submitted_EditarPrecio=!1,this.precioOriginal_Editar="campoPrecioOriginalEditar",this.nuevoPrecio_Editar="campoNuevoPrecioEditar",this.listAllProducts=[],this.active=1,this.keyword="id_producto",this.keywordCliente="nombres_apellidos",this.products=[],this.venta=new _e,this.tipoPago=new Pe,this.activePago=1,this.selectorPago="contado",this.listMetodosPagos=["F\xedsico","Yape","Plin","Interbancario"],this.listClients=[],this.btnGuardar=!1,this.lettersPattern="[a-zA-Z\xf1\xd1\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda ]*",this.numberPattern="(^[0-9])+([.][0-9]{1,2})?$",this.decimalPattern=/^\d+(\.\d{1,2})?$/,this.productoC="campoProductoC",this.listProductos=[{id:1,nombre:"Monturas"},{id:2,nombre:"Lunas"},{id:3,nombre:"Accesorios"}],this.sedeActual=new pe.t,this.tickValue=2,this.tickValueoptions={showTicksValues:!0,stepsArray:[{value:2,legend:"M\xednimo"},{value:3},{value:4},{value:5,legend:"M\xe1ximo"}]}}ngOnInit(){this.breadCrumbItems=[{label:"Venta"},{label:"Realizar Venta",active:!0}],this.getListSedes(),this.getListMonturas(this.usuarioService.getSedebyUser()),this.crearFormularioEditarPrecio()}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser(),this.sedeActual=this.getSedeActual(this.idSede,this.listSedes)}getSedeActual(t,o){return o.find(r=>r.id_sede===t)}crearFormularioEditarPrecio(){this.formEditarPrecio=this.fb.group({[this.precioOriginal_Editar]:[{value:"S/ 000.00",disabled:!0}],[this.nuevoPrecio_Editar]:[null,[d.kI.required,d.kI.pattern(this.decimalPattern)]]}),this.formSedes=this.fb.group({[this.nombre_sedes]:[this.idSede]})}fS(t){return this.formSedes.get(t)}changeSede(){this.idSede=this.fS(this.nombre_sedes).value,this.updateProductosbySede(this.idSede),this.sedeActual=this.getSedeActual(this.idSede,this.listSedes)}updateProductosbySede(t){this.listAllProducts=[],this.products=[],this.listMonturasforSale=[],this.listLunasforSale=[],this.listAccesoriosforSale=[],this.getListMonturas(t)}fE(t){return this.formEditarPrecio.get(t)}crearFormulario(){this.formContado=this.fb.group({[this.cantidadRecibida_Contado]:[null,[d.kI.required,d.kI.pattern(this.decimalPattern)]],[this.fechaVenta_Contado]:[{value:null,disabled:!0}],[this.usuario_Contado]:[null],[this.precioTotal_Contado]:[{value:null,disabled:!0}],[this.pago_Contado]:[{value:null,disabled:!0}],[this.cambio_Contado]:[{value:null,disabled:!0}],[this.observaciones_Contado]:[null],[this.vendedor_Contado]:[null,[d.kI.required,d.kI.pattern(this.lettersPattern)]],[this.metodoPagoContado]:[null,[d.kI.required]],[this.nombreContado]:[null,[d.kI.required]]}),this.formCredito=this.fb.group({[this.cantidadRecibida_Credito]:[null,[d.kI.required,d.kI.pattern(this.decimalPattern)]],[this.fechaVenta_Credito]:[{value:null,disabled:!0}],[this.usuario_Credito]:[null],[this.precioTotal_Credito]:[{value:null,disabled:!0}],[this.pago_Credito]:[{value:null,disabled:!0}],[this.cambio_Credito]:[{value:null,disabled:!0}],[this.observaciones_Credito]:[null],[this.vendedor_Credito]:[null,[d.kI.required,d.kI.pattern(this.lettersPattern)]],[this.metodoPagoCredito]:[null,[d.kI.required]],[this.nombreCredito]:[null,[d.kI.required]]})}get formVContado(){return this.formContado.controls}get formVCredito(){return this.formCredito.controls}onSort({column:t}){this.headers.forEach(a=>{a.sortable!==t&&(a.direction="")})}centerModal(t,o){this.crearFormulario(),this.getListClients(),this.fechaVenta=new Date(Date.now()),this.modalService.open(t,{centered:!0,windowClass:"modal-holder"}),this.f(this.fechaVenta_Contado).setValue(this.fechaVenta.toLocaleDateString()),this.f(this.precioTotal_Contado).setValue(this.precioTotalVenta.toFixed(2)),this.g(this.fechaVenta_Credito).setValue(this.fechaVenta.toLocaleDateString()),this.g(this.precioTotal_Credito).setValue(this.precioTotalVenta.toFixed(2))}scrollModal(t){this.modalService.open(t,{size:"xl",scrollable:!0})}centerModalEditarPrecio(t,o){switch(this.formEditarPrecio.reset(),this.tmpProducto=o,o.tipo){case"montura":this.fE(this.precioOriginal_Editar).setValue(o.precio_montura_v);break;case"accesorio":this.fE(this.precioOriginal_Editar).setValue(o.precio_accesorio_v);break;case"luna":this.fE(this.precioOriginal_Editar).setValue(o.precio_luna_v)}this.modalService.open(t,{scrollable:!0,size:"md",windowClass:"modal-holder",centered:!0})}actualizarPrecio(){let t=Number(this.fE(this.nuevoPrecio_Editar).value);switch(this.tmpProducto.tipo){case"montura":this.products.forEach(o=>{o.id_producto==this.tmpProducto.id_producto&&(o.precio_montura_v=isNaN(t)?0:t,o.precio=o.precio_montura_v*o.cant_vendida)});break;case"accesorio":this.products.forEach(o=>{o.id_producto==this.tmpProducto.id_producto&&(o.precio_accesorio_v=isNaN(t)?0:t,o.precio=o.precio_accesorio_v*o.cant_vendida)});break;case"luna":this.products.forEach(o=>{o.id_producto==this.tmpProducto.id_producto&&(o.precio_luna_v=isNaN(t)?0:t,o.precio=o.precio_luna_v*o.cant_vendida)})}this.modalService.dismissAll()}deleteEventData(){this.editEvent.remove(),this.modalService.dismissAll()}closeEventModal(){this.modalService.dismissAll()}saveEvent(){this.submitted_Contado=!0}getListMonturas(t){(0,Z.H)("loading","Cargando..."),this.productosService.getMonturasforSale(t).subscribe(o=>{this.listAllProducts=o,this.listMonturasforSale=o,this.getListAccesorios(t)})}getListAccesorios(t){this.productosService.getAccesoriosforSale(t).subscribe(o=>{this.listAllProducts=[...o,...this.listAllProducts],this.listAccesoriosforSale=o,this.getListLunas(t)})}getListLunas(t){this.productosService.getLunasforSale(t).subscribe(o=>{this.listAllProducts=[...o,...this.listAllProducts],this.listLunasforSale=o,(0,Z.H)("close",null)})}getListClients(){this.customerService.getAllClientsforSale().subscribe(t=>{this.listClients=t,this.listClients.forEach(o=>{o.nombres_apellidos=o.apellidos+" "+o.nombres})})}selectorMetodoPago(t){this.selectorPago=1==t.nextId?"contado":"credito"}selectEvent(t){const o=this.products.find(a=>a.id_producto===t.id_producto);if(o){if(o.cant_vendida+1>o.cantidad)return(0,Z.H)("error","No se puede agregar m\xe1s productos del stock"),this.autocomplete.clear(),void this.autocomplete.close();o.cant_vendida+=1,this.autocomplete.clear(),this.autocomplete.close()}else{switch(t.tipo){case"montura":this.products.push(Object.assign(Object.assign({},t),{cant_vendida:1,precio:t.precio_montura_v})),this.autocomplete.clear(),this.autocomplete.close();break;case"luna":this.products.push(Object.assign(Object.assign({},t),{cant_vendida:1,precio:t.precio_luna_v})),this.autocomplete.clear(),this.autocomplete.close();break;case"accesorio":this.products.push(Object.assign(Object.assign({},t),{cant_vendida:1,precio:t.precio_accesorio_v})),this.autocomplete.clear(),this.autocomplete.close()}this.estadoBotonGuardar()}}selectEventCliente(t){this.customer=t,"contado"==this.selectorPago?this.f(this.usuario_Contado).setValue(t.id_cliente):this.g(this.usuario_Credito).setValue(t.id_cliente),this.venta.nombre_cliente=t.nombres+" "+t.apellidos}onChangeSearch(t){}onFocused(t){this.autocomplete.close()}getTotalCost(){return this.precioTotalVenta=this.products.map(t=>t.precio).reduce((t,o)=>t+o,0),this.precioTotalVenta=(0,O.NM)(this.precioTotalVenta,1),this.precioTotalVenta}addQuantityProduct(t,o){if(this.products[o].cant_vendida+1>this.products[o].cantidad)(0,Z.H)("error","No se puede agregar m\xe1s productos del stock");else switch(this.products[o].cant_vendida+=1,this.products[o].tipo){case"montura":this.products[o].precio=this.products[o].precio_montura_v*this.products[o].cant_vendida;break;case"luna":this.products[o].precio=this.products[o].precio_luna_v*this.products[o].cant_vendida;break;case"accesorio":this.products[o].precio=this.products[o].precio_accesorio_v*this.products[o].cant_vendida}}substractQuantityProduct(t,o){switch(this.products[o].cant_vendida-=1,this.products[o].tipo){case"montura":this.products[o].precio=this.products[o].precio_montura_v*this.products[o].cant_vendida;break;case"luna":this.products[o].precio=this.products[o].precio_luna_v*this.products[o].cant_vendida;break;case"accesorio":this.products[o].precio=this.products[o].precio_accesorio_v*this.products[o].cant_vendida}0===this.products[o].cant_vendida&&this.removeProduct()}removeProduct(){this.products=this.products.filter(t=>0!==t.cant_vendida)}removeCartProduct(t,o){this.products[o].cant_vendida=0,this.removeProduct(),this.estadoBotonGuardar()}estadoBotonGuardar(){this.btnGuardar=0!=this.products.length}get formEP(){return this.formEditarPrecio.controls}f(t){return this.formContado.get(t)}g(t){return this.formCredito.get(t)}updatePago(t){if("contado"==this.selectorPago)this.f(this.pago_Contado).setValue(this.f(this.cantidadRecibida_Contado).value),this.f(this.cambio_Contado).setValue((this.f(this.cantidadRecibida_Contado).value-this.precioTotalVenta).toFixed(2));else{const o=Number((this.g(this.cantidadRecibida_Credito).value-this.precioTotalVenta).toFixed(2));this.g(this.pago_Credito).setValue(this.g(this.cantidadRecibida_Credito).value),this.g(this.cambio_Credito).setValue(Math.abs(o))}}guardarVenta(){if(this.formContado.valid||this.formCredito.valid){const t=this.products.filter(r=>"montura"==r.tipo),o=this.products.filter(r=>"luna"==r.tipo),a=this.products.filter(r=>"accesorio"==r.tipo);if(this.venta.list_monturas=t,this.venta.list_lunas=o,this.venta.list_accesorios=a,this.venta.fecha_creacion_venta=new Date(Date.now()),"contado"==this.selectorPago){if(this.venta.nombre_jalador=this.f(this.vendedor_Contado).value,this.tipoPago.observaciones=this.f(this.observaciones_Contado).value,this.tipoPago.cantidad_recibida=Number(this.f(this.cantidadRecibida_Contado).value),this.f(this.cantidadRecibida_Contado).value-this.precioTotalVenta<0)return void(0,Z.H)("error","El pago no puede ser menor al valor de la compra, se sugiere compra al cr\xe9dito");{this.tipoPago.deuda=0,this.tipoPago.metodo_pago=this.f(this.metodoPagoContado).value,this.tipoPago.cuotas=String(0);let r=this.listClients.find(l=>l.id_cliente==this.f(this.nombreContado).value.id_cliente);if(null==r)return void this.f(this.nombreContado).setValue(null);this.venta.id_cliente=this.f(this.nombreContado).value.id_cliente,this.venta.encargado_medicion=this.f(this.nombreContado).value.medidas[0].encargado,this.venta.medidas=r.medidas}}else{if(this.precioTotalVenta-this.g(this.cantidadRecibida_Credito).value<0)return void(0,Z.H)("error","El pago no puede ser mayor al valor de la compra, se sugiere compra al contado");{this.venta.nombre_jalador=this.g(this.vendedor_Credito).value,this.tipoPago.observaciones=this.g(this.observaciones_Credito).value,this.tipoPago.cantidad_recibida=Number(this.g(this.cantidadRecibida_Credito).value),this.tipoPago.deuda=(0,O.NM)(this.precioTotalVenta-this.g(this.cantidadRecibida_Credito).value,1),this.tipoPago.metodo_pago=this.g(this.metodoPagoCredito).value,this.tipoPago.cuotas=String(this.tickValue);let r=this.listClients.find(l=>l.id_cliente==this.g(this.nombreCredito).value.id_cliente);if(null==r)return void this.g(this.nombreCredito).setValue(null);this.venta.id_cliente=this.g(this.nombreCredito).value.id_cliente,this.venta.encargado_medicion=this.g(this.nombreCredito).value.medidas[0].encargado,this.venta.medidas=r.medidas}}this.venta.id_vendedor=this.usuarioService.getUser().id_usuario,this.venta.nombre_vendedor=this.usuarioService.getUser().nombres+" "+this.usuarioService.getUser().apellidos,this.tipoPago.forma_pago=this.selectorPago,this.tipoPago.precio_total=this.precioTotalVenta,this.tipoPago.fecha_pago=new Date,this.venta.tipo_venta.push(this.tipoPago),this.venta.id_sede=this.idSede,this.venta.habilitado=!0,this.cancel()}}cancel(){const t=w().mixin({customClass:{cancelButton:"btn btn-danger ms-2",confirmButton:"btn btn-success"},buttonsStyling:!1});t.fire({title:"\xbfEst\xe1 seguro de realizar la venta?",text:"\xa1No se podr\xe1 revertir esto!",icon:"warning",cancelButtonText:"No, cancelar!",confirmButtonText:"Si, vender!",showCancelButton:!0}).then(o=>{o.value?((0,Z.H)("loading","Cargando..."),this.productosService.createVenta(this.venta).subscribe(a=>{let r=Object.assign({},this.customer,this.venta);const{direccion:l,telefono:_}=r,b=(0,Y._T)(r,["direccion","telefono"]),v=Object.assign({direccionCliente:l,telefonoCliente:_},b),E=Object.assign({},v,this.sedeActual);this.ventaService.getPDF(E).subscribe(f=>{(0,Z.H)("close",null),(0,Z.H)("success","Venta realizada"),this.modalService.dismissAll(),this.products=[],this.getListMonturas(this.idSede),this.estadoBotonGuardar();const M=new Uint8Array(atob(f).split("").map(s=>s.charCodeAt(0))),P=new Blob([M],{type:"application/pdf"}),T=window.URL.createObjectURL(P),m=document.createElement("a");m.style.display="none",document.body.appendChild(m),m.href=T,m.download="venta",m.click()})},a=>{(0,Z.H)("close",null),404!==a.status&&(0,Z.H)("error","Error en la conexi\xf3n")})):o.dismiss===w().DismissReason.cancel&&(this.venta.tipo_venta=[],t.fire("Cancelado","La venta no se ha realizado","error"))})}createPDF(t,o){return(0,Y.mG)(this,void 0,void 0,function*(){var l=new Date(t.fecha_creacion_venta).toLocaleDateString("en-GB"),_=new Date(t.fecha_creacion_venta).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),b=new Date(t.fecha_creacion_venta).toLocaleTimeString("es-CL",{timeZone:"America/Bogota",hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit"}),T=o.nombres+" "+o.apellidos,m=o.fecha_nacimiento?new Date(o.fecha_nacimiento).toLocaleDateString("en-GB"):"Sin fecha de nacimiento",s=o.email?o.email:"Sin correo",S=o.telefono?o.telefono:"Sin telefono",N=[];const re={pageSize:"A4",pageMargins:[40,60,40,60],content:[{style:"tableMargin",table:{widths:["*","*"],body:[[{image:yield(0,O.up)("/assets/images/logo-dark.png"),width:150},{text:"",style:"tableHeader",rowSpan:3,alignment:"right"}],[{text:"Calle Santa Marta 218, Arequipa",style:"datosempresa"},{}],[{text:"raulcg1234@hotmail.com ",style:"datosempresa"},{}],[{text:"955 739 464",style:"datosempresa"},{}]]},layout:"noBorders"},{style:"tableMargin",table:{widths:["*","*"],body:[[{text:"Facturado a:",style:"tableHeader"},{text:"Fecha de la Boleta:",style:"tableHeader",alignment:"right"}],[{text:T,style:"subtitulo"},{text:l,style:"contenido",alignment:"right"}],[{text:"Fecha de Nacimiento: "+m,style:"contenido"},{text:"",style:"tableHeader",alignment:"right"}],[{text:"Correo: "+s,style:"contenido"},{text:"",style:"contenido",alignment:"right"}],[{text:"Telefono: "+S,style:"contenido"},{}]]},layout:"noBorders"},{text:"Resumen del pedido:",style:"subtitulo"},(x=N,V=["num_orden","detalle","precio","cantidad","total"],y=function(){var V,y,x=1,J=0,L=0;if(t.list_monturas.length>0)for(var h=0;h<t.list_monturas.length;h++)L+=V=t.list_monturas[h].precio_montura_v*t.list_monturas[h].cant_vendida,N.push({num_orden:x+=1,detalle:t.list_monturas[h].marca,precio:t.list_monturas[h].precio_montura_v,cantidad:t.list_monturas[h].cant_vendida,total:V});if(t.list_lunas.length>0)for(h=0;h<t.list_lunas.length;h++)L+=y=t.list_lunas[h].precio_luna_v*t.list_lunas[h].cant_vendida,N.push({num_orden:x+=1,detalle:t.list_lunas[h].material,precio:t.list_lunas[h].precio_luna_v,cantidad:t.list_lunas[h].cant_vendida,total:y});if(t.list_accesorios.length>0)for(h=0;h<t.list_accesorios.length;h++)L+=J=t.list_accesorios[h].precio_accesorio_v*t.list_accesorios[h].cant_vendida,N.push({num_orden:x+=1,detalle:t.list_accesorios[h].nombre_accesorio,precio:t.list_accesorios[h].precio_accesorio_v,cantidad:t.list_accesorios[h].cant_vendida,total:J});return L}(),{style:"tableMargin",color:"#444",table:{widths:[25,"*",63,60,63],heights:[20,20,20,20],headerRows:1,body:function(x,V,y){var J=[];J.push([{text:"No.",style:"tableHeader",alignment:"center"},{text:"Detalle",style:"tableHeader",alignment:"center"},{text:"Precio",style:"tableHeader",alignment:"center"},{text:"Cantidad",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"center"}]),x.forEach(function(h){var se=[];V.forEach(function(le){se.push(h[le].toString())}),J.push(se)});var L=(0,O.NM)(y,1);return J.push([{text:"",border:[!1,!1,!1,!1],colSpan:2},{},{text:"Total:",style:"tableHeader",alignment:"right",colSpan:2},{},{text:"S/ "+L,style:"contenido",alignment:"right"}]),J}(x,V,y)}}),{text:[,{text:"Fecha de Entrega: ",style:"textBold"},_,"   ",{text:"Hora: ",style:"textBold"},b]},{text:"Nota:",style:"subtitulo2"},{text:"Todo trabajo se efectuara con un adelanto del 50%.",style:"contenido2",alignment:"justify"},{text:"La empresa no se responsabiliza de los pedidos no recogidos despu\xe9s de un mes.",style:"contenido2",alignment:"justify"}],styles:{subtitulo:{bold:!0,fontSize:13,color:"black",margin:[0,10,0,5]},subtitulo2:{bold:!0,fontSize:10,color:"black",margin:[0,10,0,5]},contenido:{fontSize:12},contenido2:{fontSize:8},textBold:{fontSize:12,bold:!0},datosempresa:{fontSize:10},header:{fontSize:17,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:13,bold:!0,margin:[0,10,0,5]},subtitle:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableMargin:{margin:[0,15,0,15]},tableOpacityExample:{margin:[0,5,0,15],fillColor:"blue",fillOpacity:.3},tableHeader:{bold:!0,fontSize:13,color:"black"}}};var x,V,y;j().createPdf(re).open()})}copyText(t){navigator.clipboard?navigator.clipboard.writeText(t.innerText).then(()=>{(0,Z.H)("success","Copiado")},o=>{(0,Z.H)("error","Error")}):(0,Z.H)("error","El navegador no soporta el API Clipboard")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.qu),e.Y36(p.FF),e.Y36(we.k),e.Y36(he.$),e.Y36($.i),e.Y36(k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-sale"]],viewQuery:function(t,o){if(1&t&&(e.Gf(De,5),e.Gf(Me,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.autocomplete=a.first),e.iGM(a=e.CRH())&&(o.headers=a)}},features:[e._Bn([A.JJ])],decls:90,vars:17,consts:[[1,"container-fluid"],["title","A\xf1adir un Producto",3,"breadcrumbItems"],[1,"row","mb-4"],[1,"col-xl-4"],[1,"card","mb-0"],["ngbNav","",1,"nav","nav-tabs","nav-justified","nav-tabs-custom",3,"activeId"],["justifiednav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","",1,"nav-link"],[1,"uil","uil-nerd","font-size-20"],[1,"d-none","d-sm-block"],["ngbNavContent",""],[1,"uil","uil-panorama-h-alt","font-size-20"],[1,"uil","uil-box","font-size-20"],[3,"ngbNavOutlet"],["TabContentMonturas",""],["TabContentLunas",""],["TabContentAccesorios",""],[1,"col-xl-8"],[1,"card","h-100"],[1,"card-body"],[1,"card-title","mb-3"],[1,"row"],[1,"p-2"],[1,"row","mb-3"],[1,"col-md-8","mb-2","search-box","chat-search-box"],[1,"position-relative"],["placeholder","Buscar productos","historyIdentifier","","focusFirst","true","minQueryLength","8",3,"data","searchKeyword","itemTemplate","notFoundTemplate","selected","inputChanged","inputFocused","keyup.enter"],["autocomplete",""],["itemTemplate",""],["notFoundTemplate",""],[1,"col-md-4","mb-2"],["role","toolbar",1,"btn-toolbar"],["class","col-12 d-grid",4,"appRole"],[1,"col-lg-12"],[1,"card-title","mb-4"],[1,"table-responsive","mb-2"],[1,"table","table-centered","dt-responsive","table-nowrap","mb-0","align-middle",2,"border-spacing","0 12px","width","100%"],[1,"table-light"],[1,"bg-transparent"],[4,"ngFor","ngForOf"],[1,"text-end","mt-2"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"disabled","click"],[1,"uil","uil-shopping-cart-alt","mt-2","me-1"],["centerDataModalEditar",""],["centerDataModalGuardar2",""],["scrollDataModal",""],[3,"ngTemplateOutlet"],[1,"tab-content","p-4"],[1,"tab-pane","active"],[1,"row","mb-2"],[1,"col-12"],[3,"formGroup"],["ngbDropdown",""],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName","change"],[1,"search-box","chat-search-box"],["type","text","placeholder","Buscar Montura...",1,"form-control","bg-light","border-light","rounded",3,"ngModel","ngModelChange"],[1,"uil","uil-search","search-icon"],[1,"table-responsive"],[1,"table","table-centered","table-nowrap","mb-0","align-middle"],[1,"row","justify-content-md-between","align-items-md-center"],[1,"text-md-end","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","maxSize","pageChange"],["placement","top","ngbTooltip","Copiar c\xf3digo",1,"px-2","text-success",3,"click"],[1,"uil-copy-alt","font-size-18"],["elementToCopy",""],["type","text","placeholder","Buscar Luna...",1,"form-control","bg-light","border-light","rounded",3,"ngModel","ngModelChange"],[3,"innerHTML"],[1,"col-12","d-grid"],[3,"result"],[4,"ngIf"],["placement","top","ngbTooltip","Disminuir",1,"px-2","text-warning"],[1,"uil","uil-minus-circle","font-size-18",3,"click"],["placement","top","ngbTooltip","Agregar",1,"px-2","text-success"],["name","quantity","ngDefaultControl","","min","0",1,"uil","uil-plus-circle","font-size-18",3,"ngModel","ngModelChange","click"],["placement","top","ngbTooltip","Editar precio",1,"px-2","text-primary",3,"click"],[1,"uil","uil-pen","font-size-18"],["placement","top","ngbTooltip","Eliminar",1,"px-2","text-danger"],[1,"uil","uil-trash-alt","font-size-18",3,"click"],[1,"modal-header"],[1,"modal-title","mt-0"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-sm-6"],["for","billing-PrecioOriginal",1,"form-label"],["type","text","id","billing-PrecioOriginal","placeholder","Precio Original",1,"form-control",3,"formControlName"],[1,"mb-4"],["for","billing-NuevoPrecio",1,"form-label"],["type","text","id","billing-NuevoPrecio","placeholder","Escriba el nuevo precio",1,"form-control",3,"formControlName","ngClass"],[1,"invalid-feedback"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"click"],["id","modal-title",1,"modal-title"],[1,"modal-body","p-4"],[1,"col-lg-14"],["ngbNav","",1,"nav-pills","nav-justified","bg-light",3,"activeId","navChange"],["justifiednavpills","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"fas","fa-home"],[1,"far","fa-user"],[3,"formGroup","ngSubmit"],[1,"row","mt-4"],[1,"col-4"],[1,"mb-3"],[1,"control-label"],["placeholder","Cantidad en soles","type","text","name","nameCantidadRecibidaContado",1,"form-control",3,"formControlName","change"],["class","text-danger",4,"ngIf"],[1,"form-label"],["name","selectMetodo","placeholder","Seleccione",3,"items","formControlName"],["placeholder","Seleccione la fecha","type","text","name","nameFechaRegistroContado",1,"form-control",3,"formControlName","ngClass"],["class","invalid-feedback",4,"ngIf"],["placeholder","Apellidos del cliente","historyIdentifier","",3,"data","searchKeyword","itemTemplate","formControlName","notFoundTemplate","selected"],["itemTemplate3",""],[1,"control-label",2,"text-align","left"],["placeholder","S/ 000.00","type","text","name","nameTotalContado",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","namePagoContado",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","nameCambioContado",1,"form-control",3,"formControlName","ngClass"],["for","billing-observaciones",1,"form-label"],["id","billing-observaciones","rows","3","placeholder","Ingrese las observaciones",1,"form-control",3,"formControlName"],["for","billing-vendedor",1,"form-label"],["placeholder","Nombre Completo","type","text","name","nameVendenorContado",1,"form-control",3,"formControlName","ngClass"],[1,"text-danger"],["placeholder","Cantidad en soles","type","text","name","nameCantidadRecibidaCredito",1,"form-control",3,"formControlName","change"],["placeholder","Seleccione la fecha","type","text","name","nameFechaRegistroCredito",1,"form-control",3,"formControlName","ngClass"],[1,"p-3"],[3,"value","options","valueChange"],["placeholder","Apellidos del cliente","historyIdentifier","",3,"data","searchKeyword","itemTemplate","notFoundTemplate","formControlName","selected"],["itemTemplate2",""],["placeholder","S/ 000.00","type","text","name","nameTotalCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","namePagoCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","nameCambioCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","Nombre Completo","type","text","name","nameVendenorCredito",1,"form-control",3,"formControlName","ngClass"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"card"],[1,"invoice-title"],[1,"float-end","font-size-16"],[1,"badge","bg-success","font-size-12","ms-2"],["src","assets/images/logo-dark.png","alt","logo","height","20"],[1,"text-muted"],[1,"mb-1"],[1,"uil","uil-map-marker","me-1"],[1,"uil","uil-envelope-alt","me-1"],[1,"uil","uil-phone","me-1"],[1,"my-4"],[1,"font-size-16","mb-3"],[1,"font-size-15","mb-2"],[1,"text-muted","text-sm-end"],[1,"font-size-16","mb-1"],[1,"mt-4"],[1,"py-2"],[1,"font-size-15"],[1,"table","table-nowrap","table-centered","mb-0"],[2,"width","70px"],[1,"text-end",2,"width","120px"],["scope","row"],[1,"font-size-15","mb-1"],[1,"list-inline","mb-0"],[1,"list-inline-item"],[1,"fw-medium"],[1,"text-end"],["scope","row","colspan","4",1,"text-end"],["scope","row","colspan","4",1,"border-0","text-end"],[1,"border-0","text-end"],[1,"m-0"],["href","javascript(0)",1,"btn","btn-success","waves-effect","waves-light","me-1"],[1,"fa","fa-download"],["href","javascript:window.print()",1,"btn","btn-success","waves-effect","waves-light","me-1"],[1,"fa","fa-print"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"ul",5,6),e.TgZ(7,"li",7),e.TgZ(8,"a",8),e._UZ(9,"i",9),e.TgZ(10,"span",10),e._uU(11,"Montura"),e.qZA(),e.qZA(),e.YNc(12,ze,1,1,"ng-template",11),e.qZA(),e.TgZ(13,"li",7),e.TgZ(14,"a",8),e._UZ(15,"i",12),e.TgZ(16,"span",10),e._uU(17,"Luna"),e.qZA(),e.qZA(),e.YNc(18,Ie,1,1,"ng-template",11),e.qZA(),e.TgZ(19,"li",7),e.TgZ(20,"a",8),e._UZ(21,"i",13),e.TgZ(22,"span",10),e._uU(23,"Accesorio"),e.qZA(),e.qZA(),e.YNc(24,Fe,1,1,"ng-template",11),e.qZA(),e.qZA(),e._UZ(25,"div",14),e.qZA(),e.YNc(26,Qe,38,16,"ng-template",null,15,e.W1O),e.YNc(28,Be,32,16,"ng-template",null,16,e.W1O),e.YNc(30,je,32,16,"ng-template",null,17,e.W1O),e.qZA(),e.TgZ(32,"div",18),e.TgZ(33,"div",19),e.TgZ(34,"div",20),e.TgZ(35,"h1",21),e._uU(36,"Realizar Venta"),e.qZA(),e.TgZ(37,"div",22),e.TgZ(38,"div",23),e.TgZ(39,"div",24),e.TgZ(40,"div",25),e.TgZ(41,"div",26),e.TgZ(42,"ng-autocomplete",27,28),e.NdJ("selected",function(l){return o.selectEvent(l)})("inputChanged",function(l){return o.onChangeSearch(l)})("inputFocused",function(l){return o.onFocused(l)})("keyup.enter",function(l){return o.selectEvent(l)}),e.qZA(),e.YNc(44,$e,1,1,"ng-template",null,29,e.W1O),e.YNc(46,Ge,1,1,"ng-template",null,30,e.W1O),e.qZA(),e.qZA(),e.TgZ(48,"div",31),e.TgZ(49,"div",32),e.YNc(50,Ke,4,3,"div",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"h4"),e._uU(53),e.ALo(54,"currency"),e.qZA(),e.qZA(),e.TgZ(55,"div",22),e.TgZ(56,"div",34),e.TgZ(57,"h4",35),e._uU(58,"Lista de Productos"),e.qZA(),e.TgZ(59,"div",36),e.TgZ(60,"form"),e.TgZ(61,"table",37),e.TgZ(62,"thead",38),e.TgZ(63,"tr",39),e.TgZ(64,"th"),e._uU(65,"Ord."),e.qZA(),e.TgZ(66,"th"),e._uU(67,"Tipo"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"Detalle"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"Cantidad"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"Precio"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"Total"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"tbody"),e.YNc(79,at,25,14,"tr",40),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",41),e.TgZ(81,"button",42),e.NdJ("click",function(){e.CHM(a);const l=e.MAs(87);return o.centerModal(l,o.products)}),e._UZ(82,"i",43),e._uU(83," Guardar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(84,st,24,8,"ng-template",null,44,e.W1O),e.YNc(86,Et,23,4,"ng-template",null,45,e.W1O),e.YNc(88,Jt,152,0,"ng-template",null,46,e.W1O)}if(2&t){const a=e.MAs(6),r=e.MAs(45),l=e.MAs(47);e.xp6(1),e.Q6J("breadcrumbItems",o.breadCrumbItems),e.xp6(4),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngbNavItem",2),e.xp6(6),e.Q6J("ngbNavItem",3),e.xp6(6),e.Q6J("ngbNavOutlet",a),e.xp6(17),e.Q6J("data",o.listAllProducts)("searchKeyword",o.keyword)("itemTemplate",r)("notFoundTemplate",l),e.xp6(8),e.Q6J("appRole",o.role),e.xp6(3),e.hij("Total de la Venta: PEN ",e.xi3(54,14,o.getTotalCost(),"S/ "),""),e.xp6(26),e.Q6J("ngForOf",o.products),e.xp6(2),e.Q6J("disabled",!o.btnGuardar)}},directives:[oe.V,p.Pz,p.nv,p.Vx,p.uN,p.tO,Ze.YR,ie.g,d._Y,d.JL,d.F,A.sg,A.tP,d.sg,p.jt,B.w9,d.JJ,d.u,d.Fj,d.On,p.N9,p._L,p._h,A.O5,A.mk,ce.w5],pipes:[A.H9,A.OU,de.Z],styles:[""]}),i})();var G=c(34099),Vt=c(23405),Dt=c(22411),K=c(81366),fe=c(65686),Ae=c(79204),Ce=c(5250);let be=(()=>{class i{constructor(t,o,a){this.pipe=t,this.ventaService=o,this.usuarioService=a,this._loading$=new G.X(!0),this._search$=new Vt.xQ,this._total$=new G.X(0),this._mostrar$=new G.X(!1),this._ventas$=new G.X([]),this.ventaList=[],this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:""},this.getAllVentas()}updateTable(t){this.ventaList=t,this._mostrar$.next(!0),this._search$.pipe((0,K.b)(()=>this._loading$.next(!0)),(0,fe.b)(200),(0,Ae.w)(()=>this._search()),(0,Ce.g)(200),(0,K.b)(()=>this._loading$.next(!1))).subscribe(o=>{this._ventas$.next(o.transactions),this._total$.next(o.total)}),this._search$.next()}get transactions$(){return this._ventas$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get mostrar(){return this._mostrar$.asObservable()}set page(t){this._set({page:t})}set pageSize(t){this._set({pageSize:t})}set searchTerm(t){this._set({searchTerm:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}_set(t){Object.assign(this._state,t),this._search$.next()}_search(){const{sortColumn:t,sortDirection:o,pageSize:a,page:r,searchTerm:l}=this._state;let _=function(i,n,t){return""===t||""===n?i:[...i].sort((o,a)=>{const r=((i,n)=>i<n?-1:i>n?1:0)(o[n],a[n]);return"asc"===t?r:-r})}(this.ventaList,t,o);_=_.filter(v=>function(i,n,t){var o,a,r,l;return(null===(o=String(i.fecha_creacion_venta))||void 0===o?void 0:o.toLowerCase().includes(n.toLowerCase()))||(null===(a=i.nombre_cliente)||void 0===a?void 0:a.toLowerCase().includes(n.toLowerCase()))||(null===(r=String(i.tipo_venta[0].precio_total))||void 0===r?void 0:r.toLowerCase().includes(n.toLowerCase()))||(null===(l=i.nombre_vendedor)||void 0===l?void 0:l.toLowerCase().includes(n.toLowerCase()))}(v,l));const b=_.length;return _=_.slice((r-1)*a,(r-1)*a+a),(0,Dt.of)({transactions:_,total:b})}getAllVentas(){this.ventaService.getVentasbySede(this.usuarioService.getSedebyUser()).subscribe(t=>{this.ventaList=t,this._mostrar$.next(!0),this._search$.pipe((0,K.b)(()=>this._loading$.next(!0)),(0,fe.b)(200),(0,Ae.w)(()=>this._search()),(0,Ce.g)(200),(0,K.b)(()=>this._loading$.next(!1))).subscribe(o=>{this._ventas$.next(o.transactions),this._total$.next(o.total)}),this._search$.next()})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(A.JJ),e.LFG(k),e.LFG($.i))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const It={asc:"desc",desc:"","":"asc"};let Rt=(()=>{class i{constructor(){this.sortable="",this.direction="",this.sort=new e.vpe}rotate(){this.direction=It[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.rotate()}),2&t&&e.ekj("asc","asc"===o.direction)("desc","desc"===o.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}}),i})();var Ft=c(7082),kt=c.n(Ft),ve=c(19039),W=c(45788);function Qt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"form",36),e.TgZ(2,"div",37),e.TgZ(3,"ng-select",38),e.NdJ("change",function(){return e.CHM(t),e.oxw().changeSedes()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.formSedes),e.xp6(2),e.s9C("formControlName",t.nombre_sedes),e.Q6J("items",t.listSedes)}}function Ht(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"div",40),e.TgZ(2,"input",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportarVentas()}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.formDateRange.valid)}}function Bt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"div",6),e.TgZ(2,"form",36),e.TgZ(3,"div",43),e._UZ(4,"input",44),e._UZ(5,"input",44),e.TgZ(6,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().filterDateRange()}),e._UZ(7,"i",46),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.formDateRange),e.xp6(2),e.s9C("formControlName",t.fechaDesde),e.xp6(1),e.s9C("formControlName",t.fechaHasta)}}const Te=function(i){return{"bg-soft-danger":i}};function Yt(i,n){if(1&i&&(e.TgZ(0,"td"),e.TgZ(1,"span",56),e._uU(2,"Deuda \xa0"),e.qZA(),e.TgZ(3,"span",57),e._uU(4),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngClass",e.VKq(2,Te,t.tipo_venta[0].deuda>0)),e.xp6(1),e.hij(" ",t.tipo_venta[0].deuda," ")}}function jt(i,n){1&i&&(e.TgZ(0,"td"),e.TgZ(1,"span",58),e._uU(2,"Pagado"),e.qZA(),e.qZA())}function $t(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(),l=e.MAs(64);return r.centerModalActualizar(l,a)}),e._UZ(1,"i",60),e.qZA()}}function Gt(i,n){1&i&&e._UZ(0,"i",63)}function Kt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().eliminar(a)}),e.YNc(1,Gt,1,0,"i",62),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("appRole",t.role)}}function Wt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr",47),e.TgZ(1,"td"),e._UZ(2,"ngb-highlight",48),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngb-highlight",48),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"div",49),e.TgZ(8,"span",50),e._uU(9),e.qZA(),e.qZA(),e._UZ(10,"ngb-highlight",48),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"ngb-highlight",48),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td"),e._UZ(15,"ngb-highlight",48),e.qZA(),e.YNc(16,Yt,5,4,"td",51),e.YNc(17,jt,3,0,"td",51),e.TgZ(18,"td"),e.TgZ(19,"div"),e.TgZ(20,"button",52),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().createPDF(r)}),e._uU(21,"Pdf "),e._UZ(22,"i",53),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"td"),e.YNc(24,$t,2,0,"a",54),e.YNc(25,Kt,2,1,"a",55),e.qZA(),e.qZA()}if(2&i){const t=n.$implicit,o=n.index,a=e.oxw();e.xp6(2),e.Q6J("result",o+1+(a.service.page-1)*a.service.pageSize)("term",a.service.searchTerm),e.xp6(2),e.Q6J("result",e.xi3(5,15,t.fecha_creacion_venta,"dd/MM/yyyy"))("term",a.service.searchTerm),e.xp6(5),e.hij(" ",t.nombre_cliente.charAt(0)," "),e.xp6(1),e.Q6J("result",t.nombre_cliente.toUpperCase())("term",a.service.searchTerm),e.xp6(2),e.Q6J("result",e.xi3(13,18,t.tipo_venta[0].precio_total,"S/ "))("term",a.service.searchTerm),e.xp6(3),e.Q6J("result",t.nombre_vendedor.toUpperCase())("term",a.service.searchTerm),e.xp6(1),e.Q6J("ngIf",t.tipo_venta[0].deuda>0),e.xp6(1),e.Q6J("ngIf",0==t.tipo_venta[0].deuda),e.xp6(7),e.Q6J("ngIf",0!=t.tipo_venta[0].deuda),e.xp6(1),e.Q6J("appRole",a.role)}}function Xt(i,n){1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",19),e.TgZ(2,"div",64),e.TgZ(3,"a",65),e._UZ(4,"i",66),e._uU(5," Cargando "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}function eo(i,n){1&i&&(e.TgZ(0,"div",56),e._uU(1," Campo requerido "),e.qZA())}function to(i,n){1&i&&(e.TgZ(0,"div",56),e._uU(1," Ingrese solo n\xfameros "),e.qZA())}function oo(i,n){if(1&i&&(e.TgZ(0,"div",56),e.YNc(1,eo,2,0,"div",82),e.YNc(2,to,2,0,"div",82),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.errors?null:t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.errors?null:t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.errors.pattern)}}function io(i,n){1&i&&(e.TgZ(0,"div",56),e._uU(1," Campo requerido "),e.qZA())}function ao(i,n){if(1&i&&(e.TgZ(0,"div",56),e.YNc(1,io,2,0,"div",82),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.errors?null:t.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.errors.required)}}function no(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"This value is required."),e.qZA())}function ro(i,n){if(1&i&&(e.TgZ(0,"div",103),e.YNc(1,no,2,0,"span",51),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.title.errors.required)}}function so(i,n){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"th",104),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.qZA()),2&i){const t=n.$implicit,o=n.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(e.xi3(5,4,t.cantidad_recibida,"S/ ")),e.xp6(3),e.Oqu(t.metodo_pago),e.xp6(2),e.Oqu(e.xi3(10,7,t.fecha_pago,"dd/MM/yyyy hh:mm:ss"))}}const X=function(i){return{"is-invalid":i}};function lo(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",67),e.TgZ(1,"h5",68),e._uU(2,"Actualizar Venta - Al Credito"),e.qZA(),e.TgZ(3,"button",69),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",70),e.TgZ(5,"div",71),e.TgZ(6,"form",36),e.TgZ(7,"div",2),e.TgZ(8,"div",72),e.TgZ(9,"div",73),e.TgZ(10,"label",74),e._uU(11,"Nombres y Apellidos del Cliente"),e.qZA(),e.TgZ(12,"h5"),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",72),e.TgZ(15,"div",75),e.TgZ(16,"div",76),e.TgZ(17,"div",77),e._uU(18,"Deuda \xa0"),e.qZA(),e.TgZ(19,"div",78),e._uU(20),e.ALo(21,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",79),e.TgZ(23,"div",2),e.TgZ(24,"div",80),e.TgZ(25,"div",73),e.TgZ(26,"label",74),e._uU(27,"Cantidad Recibida"),e.qZA(),e.TgZ(28,"input",81),e.NdJ("change",function(a){return e.CHM(t),e.oxw().updatePago(a)}),e.qZA(),e.YNc(29,oo,3,2,"div",82),e.qZA(),e.qZA(),e.TgZ(30,"div",80),e.TgZ(31,"div",73),e.TgZ(32,"label",83),e._uU(33,"M\xe9todo"),e.qZA(),e._UZ(34,"ng-select",84),e.YNc(35,ao,2,1,"div",82),e.qZA(),e.qZA(),e.TgZ(36,"div",80),e.TgZ(37,"div",73),e.TgZ(38,"label",74),e._uU(39,"Fecha"),e.qZA(),e._UZ(40,"input",85),e.YNc(41,ro,2,1,"div",86),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",2),e.TgZ(43,"div",19),e.TgZ(44,"div",73),e.TgZ(45,"label",74),e._uU(46),e.qZA(),e.TgZ(47,"div",2),e.TgZ(48,"div",87),e.TgZ(49,"div",88),e.TgZ(50,"table",89),e.TgZ(51,"thead"),e.TgZ(52,"tr"),e.TgZ(53,"th",90),e._uU(54,"N\xba Cuotas"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Monto"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"M\xe9todo"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Fecha"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"tbody"),e.YNc(62,so,11,10,"tr",91),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",2),e.TgZ(64,"div",19),e.TgZ(65,"label",92),e._uU(66,"Montos:"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",2),e.TgZ(68,"div",80),e.TgZ(69,"div",73),e.TgZ(70,"label",74),e._uU(71,"Total"),e.qZA(),e._UZ(72,"input",93),e.qZA(),e.qZA(),e.TgZ(73,"div",80),e.TgZ(74,"div",73),e.TgZ(75,"label",74),e._uU(76,"Pago"),e.qZA(),e._UZ(77,"input",94),e.qZA(),e.qZA(),e.TgZ(78,"div",80),e.TgZ(79,"div",73),e.TgZ(80,"label",74),e._uU(81,"Deuda"),e.qZA(),e._UZ(82,"input",95),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",2),e.TgZ(84,"div",96),e.TgZ(85,"div",97),e.TgZ(86,"label",98),e._uU(87,"Observaciones"),e.qZA(),e._UZ(88,"textarea",99),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(89,"div",100),e.TgZ(90,"button",101),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e._uU(91," Cerrar "),e.qZA(),e.TgZ(92,"button",102),e.NdJ("click",function(){return e.CHM(t),e.oxw().guardarActualizacionDeuda()}),e._uU(93," Registrar Venta "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.formCreditoActualizacion),e.xp6(7),e.Oqu(t.usuario.nombre),e.xp6(6),e.Q6J("ngClass",e.VKq(25,Te,!0)),e.xp6(1),e.hij(" ",e.xi3(21,22,t.usuario.deuda,"S/ ")," "),e.xp6(8),e.s9C("formControlName",t.cantidadRecibida_CreditoActualizacion),e.xp6(1),e.Q6J("ngIf",t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.invalid&&(t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.dirty||t.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.touched)),e.xp6(5),e.s9C("formControlName",t.metodoPagoCreditoActualizacion),e.Q6J("items",t.listMetodosPagos),e.xp6(1),e.Q6J("ngIf",t.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.invalid&&(t.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.dirty||t.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.touched)),e.xp6(5),e.s9C("formControlName",t.fechaVenta_CreditoActualizacion),e.Q6J("ngClass",e.VKq(27,X,t.submitted&&t.form.title.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.form.title.errors),e.xp6(5),e.hij("Informaci\xf3n de Pagos: ",t.usuario.listDeudas[0].cuotas," cuotas"),e.xp6(16),e.Q6J("ngForOf",t.usuario.listDeudas),e.xp6(10),e.s9C("formControlName",t.precioTotal_CreditoActualizacion),e.Q6J("ngClass",e.VKq(29,X,t.submitted&&t.form.title.errors)),e.xp6(5),e.s9C("formControlName",t.pago_CreditoActualizacion),e.Q6J("ngClass",e.VKq(31,X,t.submitted&&t.form.title.errors)),e.xp6(5),e.s9C("formControlName",t.cambio_CreditoActualizacion),e.Q6J("ngClass",e.VKq(33,X,t.submitted&&t.form.title.errors)),e.xp6(6),e.s9C("formControlName",t.observaciones_CreditoActualizacion),e.xp6(4),e.Q6J("disabled",!t.formCreditoActualizacion.valid)}}function uo(i,n){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"form",19),e.TgZ(2,"div",20),e._UZ(3,"ng-select",21),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.formSedes),e.xp6(2),e.s9C("formControlName",t.nombre_sedes),e.Q6J("items",t.listSedes)}}j().vfs=ge.I.vfs;const _o=[{path:"addsale",component:wt,data:{role:["Vendedor","Admin"]},canActivate:[te.a]},{path:"listsales",component:(()=>{class i{constructor(t,o,a,r,l,_,b){this.service=t,this.fb=o,this.ventasService=a,this.modalService=r,this.customerService=l,this.usuarioService=_,this.ventaService=b,this.role="Admin",this.nombre_sedes="campoSede",this.idSede="",this.mostrarSpinner=!1,this.submitted_CreditoActualizacion=!1,this.cantidadRecibida_CreditoActualizacion="campoCantidadRecibidaCreditoActualizacion",this.fechaVenta_CreditoActualizacion="campoFechaVentaCreditoActualizacion",this.usuario_CreditoActualizacion="campoUsuarioCreditoActualizacion",this.nombreCreditoActualizacion="campoNombreCreditoActualizacion",this.precioTotal_CreditoActualizacion="campoPrecioTotalCreditoActualizacion",this.pago_CreditoActualizacion="campoPagoCreditoActualizacion",this.cambio_CreditoActualizacion="campoCambioCreditoActualizacion",this.observaciones_CreditoActualizacion="campoObservacionesCreditoActualizacion",this.metodoPagoCreditoActualizacion="campoMetodoPagoCreditoActualizacion",this.numberPattern="[0-9]+",this.activePago=1,this.listMetodosPagos=["F\xedsico","Yape","Plin","Interbancario"],this.exampleOptions={altInputClass:"form-control",locale:kt().es},this.fechaDesde="campoFechaDesde",this.fechaHasta="campoFechaHasta",this.venta=new _e,this.tipoPago=[],this.decimalPattern=/^\d+(\.\d{1,2})?$/,this.excelVentas=[],this.sedeActual=new pe.t,this.transactions$=t.transactions$,this.total$=t.total$,t.mostrar.subscribe(v=>{this.mostrarSpinner=v})}ngOnInit(){this.breadCrumbItems=[{label:"Venta"},{label:"Lista de Ventas",active:!0}],this.getListSedes(),this.crearFormulario()}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser(),this.sedeActual=this.getSedeActual(this.idSede,this.listSedes)}getSedeActual(t,o){return o.find(r=>r.id_sede===t)}onSort({column:t,direction:o}){this.headers.forEach(a=>{a.sortable!==t&&(a.direction="")}),this.service.sortColumn=t,this.service.sortDirection=o}centerModalActualizar(t,o){this.crearFormularioActualizar(),this.fechaVenta=new Date(Date.now()),this.usuario={nombre:o.nombre_cliente,deuda:o.tipo_venta[0].deuda,listDeudas:o.tipo_venta},this.venta.id_ventas=o.id_ventas,this.venta.id_cliente=o.id_cliente,this.tipoPago=o.tipo_venta,this.g(this.precioTotal_CreditoActualizacion).setValue(this.usuario.deuda.toFixed(2)),this.modalService.open(t,{centered:!0,windowClass:"modal-holder"}),this.g(this.fechaVenta_CreditoActualizacion).setValue(this.fechaVenta.toLocaleDateString())}closeEventModal(){this.modalService.dismissAll()}saveEvent(){this.submitted_CreditoActualizacion=!0}crearFormulario(){this.formDateRange=this.fb.group({[this.fechaDesde]:[null,[d.kI.required]],[this.fechaHasta]:[]}),this.formSedes=this.fb.group({[this.nombre_sedes]:[this.idSede]})}crearFormularioActualizar(){this.formCreditoActualizacion=this.fb.group({[this.cantidadRecibida_CreditoActualizacion]:[null,[d.kI.required,d.kI.pattern(this.decimalPattern)]],[this.fechaVenta_CreditoActualizacion]:[{value:null,disabled:!0}],[this.usuario_CreditoActualizacion]:[null],[this.precioTotal_CreditoActualizacion]:[{value:null,disabled:!0}],[this.pago_CreditoActualizacion]:[{value:null,disabled:!0}],[this.cambio_CreditoActualizacion]:[{value:null,disabled:!0}],[this.observaciones_CreditoActualizacion]:[null],[this.metodoPagoCreditoActualizacion]:[null,[d.kI.required]]})}g(t){return this.formCreditoActualizacion.get(t)}updatePago(t){this.g(this.pago_CreditoActualizacion).setValue(this.g(this.cantidadRecibida_CreditoActualizacion).value);const o=Number((0,O.NM)(this.g(this.cantidadRecibida_CreditoActualizacion).value-this.usuario.deuda,1).toFixed(2));this.g(this.cambio_CreditoActualizacion).setValue(Math.abs(o))}guardarActualizacionDeuda(){if(this.formCreditoActualizacion.valid){this.venta.id_vendedor=this.usuarioService.getUser().id_usuario,this.venta.nombre_vendedor=this.usuarioService.getUser().nombres+" "+this.usuarioService.getUser().apellidos,this.venta.id_sede=this.usuarioService.getSedebyUser();let t=0;t=(0,O.NM)(this.tipoPago[0].deuda-this.g(this.cantidadRecibida_CreditoActualizacion).value,1);const o={forma_pago:"credito",cantidad_recibida:Number(this.g(this.cantidadRecibida_CreditoActualizacion).value),deuda:t,cuotas:this.tipoPago[0].cuotas,precio_total:this.tipoPago[0].precio_total,metodo_pago:this.g(this.metodoPagoCreditoActualizacion).value,fecha_pago:new Date(Date.now()),observaciones:this.g(this.observaciones_CreditoActualizacion).value};let a=[];if(this.tipoPago.length+1==Number(this.tipoPago[0].cuotas)&&t>0)return void(0,Z.H)("error","Es su \xfaltima cuota, tiene que cancelar la totalidad");if(Number(this.g(this.cantidadRecibida_CreditoActualizacion).value>this.g(this.precioTotal_CreditoActualizacion).value))return void(0,Z.H)("error","El pago debe ser menor a la deuda");t<=0?(o.deuda=0,a.push(o),a.push(...this.tipoPago),this.venta.tipo_venta=a,w().fire({title:"\xbfEst\xe1 seguro que desea cancelar la totalidad de la deuda?",text:"No se podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Si, cancelar deuda!"}).then(r=>{r.value?((0,Z.H)("loading","Cargando..."),this.ventasService.updatePagoCuotas(this.venta.id_ventas,this.venta).subscribe(l=>{(0,Z.H)("close",null),(0,Z.H)("success","Venta completada"),this.modalService.dismissAll(),this.updateListVentas()},l=>{(0,Z.H)("close",null),(0,Z.H)("error","Error en la conexi\xf3n")})):r.dismiss===w().DismissReason.cancel&&w().fire("Cancelado","Venta no eliminada","error")})):(a.push(o),a.push(...this.tipoPago),this.venta.tipo_venta=a,this.ventasService.updatePagoCuotas(this.venta.id_ventas,this.venta).subscribe(r=>{this.modalService.dismissAll(),this.updateListVentas()}))}}f(t){return this.formDateRange.get(t)}filterDateRange(){if(this.formDateRange.valid){this.idSede=this.fS(this.nombre_sedes).value;let o,t=new Date(this.f(this.fechaDesde).value+"T00:00");null!=this.f(this.fechaHasta).value?o=new Date(this.f(this.fechaHasta).value+"T23:59"):(o=new Date(Date.now()),o.setHours(23,59,0)),this.ventasService.getVentasByDate(t,o,this.idSede).subscribe(a=>{this.service.updateTable(a)})}}eliminar(t){w().fire({title:"\xbfEst\xe1 seguro que desea eliminar la venta?",text:"No se podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Si, eliminar!"}).then(o=>{o.value?((0,Z.H)("loading","Cargando..."),this.ventasService.darBajaVenta(t.id_ventas).subscribe(a=>{(0,Z.H)("close",null),(0,Z.H)("success","Venta eliminada"),this.updateListVentas()},a=>{(0,Z.H)("close",null),(0,Z.H)("error","Error en la conexi\xf3n")})):o.dismiss===w().DismissReason.cancel&&w().fire("Cancelado","Venta no eliminada","error")})}updateListVentas(){this.ventasService.getVentasbySede(this.idSede).subscribe(t=>{this.service.updateTable(t)})}createPDF(t){this.customerService.getAllClientbyId(t.id_cliente).subscribe(o=>{let a=Object.assign({},o[0],t);const{direccion:r,telefono:l}=a,_=(0,Y._T)(a,["direccion","telefono"]),b=Object.assign({direccionCliente:r,telefonoCliente:l},_),v=Object.assign({},b,this.sedeActual);this.ventaService.getPDF(v).subscribe(E=>{const f=new Uint8Array(atob(E).split("").map(m=>m.charCodeAt(0))),M=new Blob([f],{type:"application/pdf"}),P=window.URL.createObjectURL(M),T=document.createElement("a");T.style.display="none",document.body.appendChild(T),T.href=P,T.download="venta",T.click()})})}generatePDF(t,o){return(0,Y.mG)(this,void 0,void 0,function*(){new Date(t.fecha_creacion_venta).toLocaleDateString("en-GB");var _=new Date(t.fecha_creacion_venta).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),b=new Date(t.fecha_creacion_venta).toLocaleTimeString("es-CL",{timeZone:"America/Bogota",hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit"}),f=this.sedeActual.direccion,M=this.sedeActual.telefono,P=this.sedeActual.ruc,s=o.nombres,S=o.apellidos,N=o.dni?o.dni:"Sin especificar.",D=o.direccion?o.direccion:"Sin especificar.",u=o.medidas[0].od_esferico>0?"+"+o.medidas[0].od_esferico.toFixed(2):o.medidas[0].od_esferico.toFixed(2),ae=o.medidas[0].od_cilindrico>0?"+"+o.medidas[0].od_cilindrico.toFixed(2):o.medidas[0].od_cilindrico.toFixed(2),ne=o.medidas[0].od_eje,xe=o.medidas[0].oi_esferico>0?"+"+o.medidas[0].oi_esferico.toFixed(2):o.medidas[0].oi_esferico.toFixed(2),re=o.medidas[0].oi_cilindrico>0?"+"+o.medidas[0].oi_cilindrico.toFixed(2):o.medidas[0].oi_cilindrico.toFixed(2),qe=o.medidas[0].oi_eje,x=o.medidas[0].dip,V=o.medidas[0].add>0?"+"+o.medidas[0].add.toFixed(2):o.medidas[0].add.toFixed(2),y=[];const le={pageSize:"A4",pageMargins:[40,10,40,10],content:[{style:"tableBasic",table:{widths:[340,"*"],body:[[[{table:{widths:["*"],body:[[{image:"data:image/png;base64,",width:230}],[{text:"De Ra\xfal J. Condori Ramos",alignment:"center"}]]},layout:{defaultBorder:!1}}],[{table:{widths:["*"],body:[[{text:"R.U.C. "+P,style:"title",alignment:"center",margin:[0,6,0,6]}],[{text:"BOLETA DE VENTA",style:"title2",alignment:"center",fillColor:"#2D4497",fillOpacity:.8,margin:[0,6,0,6]}]]}}]]]},layout:{defaultBorder:!1}},{style:"tableBasic",table:{widths:["*","*"],body:[[{text:f,style:"header",fillColor:"#2D4497",fillOpacity:.8},{text:"Cel: "+M,style:"header",fillColor:"#2D4497",fillOpacity:.8}]]},layout:{defaultBorder:!1}},{style:"tableBasic",table:{widths:["*","*"],body:[[{text:"Se\xf1or(a): "+s+S,style:"title",alignment:"left",Span:1},{}],[{text:"Direcci\xf3n: "+D,style:"text",alignment:"left"},{text:"DNI: "+N,style:"text",alignment:"left"}]]},layout:{vLineWidth:function(C,q){return 0===C||C===q.table.widths.length?1:0}}},{style:"tableBasic",table:{widths:[150],heights:[15],body:[[{text:"RESUMEN DEL PEDIDO: ",style:"title2",alignment:"left",fillColor:"#2D4497",fillOpacity:.8}]]},layout:{defaultBorder:!1,paddingLeft:function(C,q){return 10}}},(C=y,q=["num_orden","detalle","precio","cantidad","total"],R=function(){var q,R,C=0,z=0,F=0;if(t.list_monturas.length>0)for(var g=0;g<t.list_monturas.length;g++)F+=q=t.list_monturas[g].precio_montura_v*t.list_monturas[g].cant_vendida,y.push({num_orden:C+=1,detalle:t.list_monturas[g].marca+" C\xf3d. int.: "+t.list_monturas[g].codigo+" Color: "+t.list_monturas[g].color,precio:t.list_monturas[g].precio_montura_v,cantidad:t.list_monturas[g].cant_vendida,total:q});if(t.list_lunas.length>0)for(g=0;g<t.list_lunas.length;g++)F+=R=t.list_lunas[g].precio_luna_v*t.list_lunas[g].cant_vendida,y.push({num_orden:C+=1,detalle:t.list_lunas[g].material,precio:t.list_lunas[g].precio_luna_v,cantidad:t.list_lunas[g].cant_vendida,total:R});if(t.list_accesorios.length>0)for(g=0;g<t.list_accesorios.length;g++)F+=z=t.list_accesorios[g].precio_accesorio_v*t.list_accesorios[g].cant_vendida,y.push({num_orden:C+=1,detalle:t.list_accesorios[g].nombre_accesorio,precio:t.list_accesorios[g].precio_accesorio_v,cantidad:t.list_accesorios[g].cant_vendida,total:z});return F}(),{style:"tableBasic",color:"#444",table:{widths:[25,"*",45,35,55],headerRows:1,body:function(C,q,R){var z=[];z.push([{text:"No.",style:"title",alignment:"center",fillColor:"#d8e3fc",margin:[0,3,0,3]},{text:"Detalle",style:"title",alignment:"center",fillColor:"#d8e3fc",margin:[0,3,0,3]},{text:"P. Unit.",style:"title",alignment:"center",fillColor:"#d8e3fc",margin:[0,3,0,3]},{text:"Cant.",style:"title",alignment:"center",fillColor:"#d8e3fc",margin:[0,3,0,3]},{text:"Importe",style:"title",alignment:"center",fillColor:"#d8e3fc",margin:[0,3,0,3]}]),C.forEach(function(g){var ee=[];q.forEach(function(Q){ee.push("num_orden"===Q?{text:g[Q].toString(),style:"text",alignment:"center",margin:[0,2,0,2]}:"detalle"===Q?{text:g[Q].toString(),style:"text",alignment:"left",margin:[0,2,0,2]}:{text:g[Q].toString(),style:"text",alignment:"right",margin:[0,2,0,2]})}),z.push(ee)});var F=(0,O.NM)(R,1);return z.push([{text:"",border:[!1,!1,!1,!1],colSpan:2},{},{text:"Total:",style:"title",alignment:"right",colSpan:2,margin:[0,2,0,2]},{},{text:"S/. "+F,style:"title",alignment:"right",margin:[0,2,0,2]}]),z}(C,q,R)}}),{style:"tableBasic",table:{widths:[150],heights:[15],body:[[{text:"DETALLE DE LA MEDIDA: ",style:"title2",alignment:"left",fillColor:"#2D4497",fillOpacity:.8}]]},layout:{defaultBorder:!1,paddingLeft:function(C,q){return 10}}},{style:"tableBasic",table:{widths:["*","*","*","*","*","*"],heights:[15,15,15],headerRows:2,body:[[{text:"REF.",style:"title",alignment:"center",margin:[0,2,0,2]},{text:"ESF.",style:"title",alignment:"center",margin:[0,2,0,2]},{text:"CIL.",style:"title",alignment:"center",margin:[0,2,0,2]},{text:"EJE.",style:"title",alignment:"center",margin:[0,2,0,2]},{text:"AV.",style:"title",alignment:"center",margin:[0,2,0,2]},{text:"DIP.",style:"title",alignment:"center",margin:[0,2,0,2]}],[{text:"O.D.",style:"title",alignment:"center",margin:[0,1,0,1]},{text:u,style:"text",alignment:"center",margin:[0,1,0,1]},{text:ae,style:"text",alignment:"center",margin:[0,1,0,1]},{text:ne,style:"text",alignment:"center",margin:[0,1,0,1]},{text:"",style:"text",alignment:"center",margin:[0,1,0,1]},{text:x,style:"text",alignment:"center",margin:[0,1,0,1]}],[{text:"O.I.",style:"title",alignment:"center",margin:[0,1,0,1]},{text:xe,style:"text",alignment:"center",margin:[0,1,0,1]},{text:re,style:"text",alignment:"center",margin:[0,1,0,1]},{text:qe,style:"text",alignment:"center",margin:[0,1,0,1]},{text:"",style:"text",alignment:"center",margin:[0,1,0,1]},{text:x,style:"text",alignment:"center",margin:[0,1,0,1]}]]},layout:{fillColor:function(C){return 0===C?"#d8e3fc":null}}},{style:"tableBasic",table:{widths:[150,"*",150],heights:[15],body:[[{text:"VISI\xd3N DE CERCA: ",alignment:"left",style:"title2",fillColor:"#2D4497",fillOpacity:.8},[{table:{widths:["auto","*"],body:[[{text:"ADD.",style:"title",alignment:"center",fillColor:"#d8e3fc"},{text:V,style:"text",alignment:"center"}]]}}],{}]]},layout:{defaultBorder:!1,paddingLeft:function(C,q){return 10}}},{style:"tableBasic",table:{widths:[140,"*",50,"auto"],body:[[{text:"FECHA DE ENTREGA: ",style:"title2",alignment:"left",fillColor:"#2D4497",fillOpacity:.8},{text:_,style:"text",alignment:"left",margin:[0,1,0,1]},{text:"HORA: ",style:"title2",alignment:"left",fillColor:"#2D4497",fillOpacity:.8},{text:b,style:"text",alignment:"left",margin:[0,1,0,1]}]]},layout:{defaultBorder:!1,paddingLeft:function(C,q){return 10}}},{style:"tableBasic",table:{widths:[350,"*"],body:[[{text:"NOTA: ",color:"#2D4497",style:"subtitle",alignment:"left"},{}],[{text:"Todo trabajo se efectuara con un adelanto del 50%.",color:"#2D4497",style:"small",alignment:"left"},{}],[{text:"La empresa no se responsabiliza de los pedidos no recogidos despu\xe9s de un mes.",color:"#2D4497",style:"small",alignment:"left"},{}]]},layout:{defaultBorder:!1}}],styles:{header:{fontSize:15,bold:!0,color:"white",alignment:"center",margin:[0,0,0,0]},title:{fontSize:13,bold:!0,color:"#2D4497",margin:[0,0,0,0]},title2:{fontSize:13,bold:!0,color:"white",margin:[0,0,0,0]},subtitle:{fontSize:12,bold:!0,color:"#2D4497",margin:[0,0,0,0]},text:{fontSize:11,color:"#2D4497",margin:[0,0,0,0]},small:{fontSize:9,color:"#2D4497",margin:[0,0,0,0]},tableBasic:{color:"#2D4497",margin:[0,5,0,5]}}};var C,q,R;j().createPdf(le).open()})}fS(t){return this.formSedes.get(t)}changeSedes(){this.idSede=this.fS(this.nombre_sedes).value,this.getListVentas(this.idSede),this.sedeActual=this.getSedeActual(this.idSede,this.listSedes)}getListVentas(t){this.ventasService.getVentasbySede(t).subscribe(o=>{this.service.updateTable(o)})}exportarVentas(){if(this.formSedes.valid&&this.formDateRange.valid){let t=[];const o="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8";this.idSede=this.fS(this.nombre_sedes).value;let l,r=new Date(this.f(this.fechaDesde).value+"T00:00");null!=this.f(this.fechaHasta).value?l=new Date(this.f(this.fechaHasta).value+"T23:59"):(l=new Date(Date.now()),l.setHours(23,59,0));let _={},b={},v={};this.ventaService.getVentasByDate(r,l,this.idSede).subscribe(E=>{this.excelVentas=E,t=this.excelVentas.map(s=>{let S={},N={},D={};for(var u=0;u<s.list_monturas.length;u++)S[`MONT ${u+1} CODIGO`]=s.list_monturas[u].codigo,S[`MONT ${u+1} P VENTA`]=s.list_monturas[u].precio_montura_v,S[`MONT ${u+1} P COMPRA`]=s.list_monturas[u].precio_montura_c,S[`MONT ${u+1} CANT VENDIDA`]=s.list_monturas[u].cant_vendida,S[`MONT ${u+1} MARCA`]=s.list_monturas[u].marca,S[`MONT ${u+1} MATERIAL`]=s.list_monturas[u].material,S[`MONT ${u+1} COLOR`]=s.list_monturas[u].color;for(_=Object.assign({},S),u=0;u<s.list_lunas.length;u++)N[`LUN ${u+1} P VENTA`]=s.list_lunas[u].precio_luna_v,N[`LUN ${u+1} P COMPRA`]=s.list_lunas[u].precio_luna_c,N[`LUN ${u+1} CANT VENDIDA`]=s.list_lunas[u].cant_vendida,N[`LUN ${u+1} MATERIAL`]=s.list_lunas[u].material;for(b=Object.assign({},N),u=0;u<s.list_accesorios.length;u++)D[`LUN ${u+1} P VENTA`]=s.list_accesorios[u].precio_accesorio_v,D[`LUN ${u+1} P COMPRA`]=s.list_accesorios[u].precio_accesorio_c,D[`LUN ${u+1} CANT VENDIDA`]=s.list_accesorios[u].cant_vendida,D[`LUN ${u+1} NOMBRE`]=s.list_accesorios[u].nombre_accesorio;return v=Object.assign({},D),s.hasOwnProperty("medidas")?Object.assign({},{FECHA:new Date(s.fecha_creacion_venta).toLocaleDateString("en-GB"),"NOMBRE CLIENTE":s.nombre_cliente,TOTAL:0==s.tipo_venta[0].precio_total?"+0.00":s.tipo_venta[0].precio_total,"ESF D":0==s.medidas[0].od_esferico?"+0.00":s.medidas[0].od_esferico,"CYL D":0==s.medidas[0].od_cilindrico?"+0.00":s.medidas[0].od_cilindrico,"EJE D":0==s.medidas[0].od_eje?"+0.00":s.medidas[0].od_eje,"ESF I":0==s.medidas[0].oi_esferico?"+0.00":s.medidas[0].oi_esferico,"CYL I":0==s.medidas[0].oi_cilindrico?"+0.00":s.medidas[0].oi_cilindrico,"EJE I":0==s.medidas[0].oi_eje?"+0.00":s.medidas[0].oi_eje,DIP:0==s.medidas[0].dip?"+0.00":s.medidas[0].dip,ADD:0==s.medidas[0].add?"+0.00":s.medidas[0].add,USUARIO:s.nombre_vendedor.toUpperCase(),VENDEDOR:s.nombre_jalador?s.nombre_jalador.toUpperCase():null,"ENCARGADO MEDICION":s.encargado_medicion?s.encargado_medicion.toUpperCase():null,"FORMA DE PAGO":s.tipo_venta[0].forma_pago.toUpperCase(),ESTADO:s.tipo_venta[0].deuda>0?"DEUDA":"PAGADO"},_,b,v):Object.assign({},{FECHA:new Date(s.fecha_creacion_venta).toLocaleDateString("en-GB"),"NOMBRE CLIENTE":s.nombre_cliente,TOTAL:0==s.tipo_venta[0].precio_total?"+0.00":s.tipo_venta[0].precio_total,USUARIO:s.nombre_vendedor.toUpperCase(),VENDEDOR:s.nombre_jalador?s.nombre_jalador.toUpperCase():null,"ENCARGADO MEDICION":s.encargado_medicion?s.encargado_medicion.toUpperCase():null,"FORMA DE PAGO":s.tipo_venta[0].forma_pago,ESTADO:s.tipo_venta[0].deuda>0?"DEUDA":"PAGADO"},_,b,v)});const M={Sheets:{hoja:W.P6.json_to_sheet(t)},SheetNames:["hoja"]},P=W.cW(M,{bookType:"xlsx",type:"array"}),T=new Blob([P],{type:o}),m=this.listSedes.find(s=>s.id_sede==this.fS(this.nombre_sedes).value);(0,ve.Z)(T,"ventas_"+m.nombre_sede)})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(be),e.Y36(d.qu),e.Y36(k),e.Y36(p.FF),e.Y36(he.$),e.Y36($.i),e.Y36(k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-sales"]],viewQuery:function(t,o){if(1&t&&e.Gf(Rt,5),2&t){let a;e.iGM(a=e.CRH())&&(o.headers=a)}},features:[e._Bn([be,A.JJ])],decls:65,vars:22,consts:[[1,"container-fluid"],["title","Ventas",3,"breadcrumbItems"],[1,"row"],[1,"col-md-6","mb-2"],[1,"form-inline"],[1,"search-box","ml-2"],[1,"position-relative"],["type","text","placeholder","Buscar venta","name","searchTerm","aria-controls","tickets-table",1,"form-control","border-light","rounded",3,"ngModel","ngModelChange"],[1,"uil","uil-search","search-icon"],["role","toolbar",1,"btn-toolbar"],["class","col-12 col-md-6 d-grid mb-2 chat-search-box px-1",4,"appRole"],["class","col-12 col-md-6 d-grid",4,"appRole"],[1,"row","md-2"],["class","col-md-6 d-grid mb-2 chat-search-box px-1",4,"appRole"],[1,"col-md-6"],[1,"dataTables_length","text-md-end"],[1,"d-inline-flex","align-items-center"],["name","pageSize",1,"custom-select","custom-select-sm","form-control","form-control-sm","form-select","form-select-sm",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"col-12"],[1,"table-responsive","mb-4"],[1,"table","datatables","table-centered","table-nowrap","mb-0","align-middle","table-card-list",2,"border-spacing","0 12px","width","100%"],[1,"bg-transparent"],["scope","col","sortable","orden",3,"sort"],["scope","col","sortable","fecha_creacion_venta",3,"sort"],["scope","col","sortable","nombre_cliente",3,"sort"],["scope","col","sortable","",3,"sort"],["scope","col","sortable","nombre_vendedor",3,"sort"],[2,"width","170px"],["class","odd",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center"],[1,"text-md-end","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["centerDataModalActualizarVenta",""],[1,"col-12","col-md-6","d-grid","mb-2","chat-search-box","px-1"],[3,"formGroup"],["ngbDropdown",""],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName","change"],[1,"col-12","col-md-6","d-grid"],[1,"btn-group","mb-2"],["type","button","value","Descargar Archivo",1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"col-md-6","d-grid","mb-2","chat-search-box","px-1"],[1,"input-daterange","input-group"],["type","date","id","billing-fechanacimiento","placeholder","Seleccione la fecha",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mdi","mdi-filter-variant"],[1,"odd"],[3,"result","term"],[1,"avatar-xs","d-inline-block","me-2"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[4,"ngIf"],[1,"btn","btn-light","btn-sm","w-xs",3,"click"],[1,"uil","uil-download-alt","ms-2"],["class","px-3 text-primary","placement","top","ngbTooltip","Editar",3,"click",4,"ngIf"],["class","px-3 text-danger","placement","top","ngbTooltip","Eliminar",3,"click",4,"appRole"],[1,"text-danger"],[1,"badge","rounded-pill","bg-soft-success","font-size-12",3,"ngClass"],[1,"text-success"],["placement","top","ngbTooltip","Editar",1,"px-3","text-primary",3,"click"],[1,"uil","uil-pen","font-size-18"],["placement","top","ngbTooltip","Eliminar",1,"px-3","text-danger",3,"click"],["class","uil uil-trash-alt font-size-18",4,"appRole"],[1,"uil","uil-trash-alt","font-size-18"],[1,"text-center","my-3"],["href","javascript:void(0);",1,"text-primary"],[1,"mdi","mdi-loading","mdi-spin","font-size-20","align-middle","me-2"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[1,"col-lg-14"],[1,"col-sm-6"],[1,"mb-3"],[1,"control-label"],[1,"text-muted","text-sm-end"],[1,"mt-4"],[1,"text-danger","font-size-16"],[1,"badge","rounded-pill","bg-soft-success","font-size-16",3,"ngClass"],[1,"border-top","pt-4"],[1,"col-4"],["placeholder","Cantidad en soles","type","text","name","nameCantidadRecibidaCredito",1,"form-control",3,"formControlName","change"],["class","text-danger",4,"ngIf"],[1,"form-label"],["name","selectMetodo","placeholder","Seleccione",3,"items","formControlName"],["placeholder","Seleccione la fecha","type","text","name","nameFechaRegistroCredito",1,"form-control",3,"formControlName","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","table-sm","m-0","table-centered"],[2,"width","77px"],[4,"ngFor","ngForOf"],[1,"control-label",2,"text-align","left"],["placeholder","S/ 000.00","type","text","name","nameTotalCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","namePagoCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","nameCambioCredito",1,"form-control",3,"formControlName","ngClass"],[1,"col-lg-12"],[1,"mb-4"],["for","billing-observaciones",1,"form-label"],["id","billing-observaciones","rows","3","placeholder","Ingrese las observaciones",1,"form-control",3,"formControlName"],[1,"text-end","mt-2"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"disabled","click"],[1,"invalid-feedback"],["scope","row"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"input",7),e.NdJ("ngModelChange",function(r){return o.service.searchTerm=r}),e.qZA(),e._UZ(8,"i",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",3),e.TgZ(10,"div"),e.TgZ(11,"div",9),e.YNc(12,Qt,4,3,"div",10),e.YNc(13,Ht,3,1,"div",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.YNc(15,Bt,8,3,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"div",15),e.TgZ(18,"label",16),e._uU(19,"Mostrar"),e.TgZ(20,"select",17),e.NdJ("ngModelChange",function(r){return o.service.pageSize=r}),e.TgZ(21,"option",18),e._uU(22,"10"),e.qZA(),e.TgZ(23,"option",18),e._uU(24,"25"),e.qZA(),e.TgZ(25,"option",18),e._uU(26,"50"),e.qZA(),e.TgZ(27,"option",18),e._uU(28,"100"),e.qZA(),e.qZA(),e._uU(29," entradas"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",2),e.TgZ(31,"div",19),e.TgZ(32,"div"),e.TgZ(33,"div",20),e.TgZ(34,"form"),e.TgZ(35,"table",21),e.TgZ(36,"thead"),e.TgZ(37,"tr",22),e.TgZ(38,"th",23),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(39,"Ord."),e.qZA(),e.TgZ(40,"th",24),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(41,"Fecha"),e.qZA(),e.TgZ(42,"th",25),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(43,"Nombre del Cliente"),e.qZA(),e.TgZ(44,"th",26),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(45,"Total"),e.qZA(),e.TgZ(46,"th",27),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(47,"Vendedor"),e.qZA(),e.TgZ(48,"th",26),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(49,"Estado de Pago"),e.qZA(),e.TgZ(50,"th",26),e.NdJ("sort",function(r){return o.onSort(r)}),e._uU(51,"Descargar Pdf"),e.qZA(),e.TgZ(52,"th",28),e._uU(53,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"tbody"),e.YNc(55,Wt,26,21,"tr",29),e.ALo(56,"async"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(57,Xt,6,0,"div",30),e.TgZ(58,"div",31),e.TgZ(59,"div",19),e.TgZ(60,"div",32),e.TgZ(61,"ngb-pagination",33),e.NdJ("pageChange",function(r){return o.service.page=r}),e.ALo(62,"async"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(63,lo,94,35,"ng-template",null,34,e.W1O),e.qZA()),2&t&&(e.xp6(1),e.Q6J("breadcrumbItems",o.breadCrumbItems),e.xp6(6),e.Q6J("ngModel",o.service.searchTerm),e.xp6(5),e.Q6J("appRole",o.role),e.xp6(1),e.Q6J("appRole",o.role),e.xp6(2),e.Q6J("appRole",o.role),e.xp6(5),e.Q6J("ngModel",o.service.pageSize),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(28),e.Q6J("ngForOf",e.lcZ(56,18,o.transactions$)),e.xp6(2),e.Q6J("ngIf",!o.mostrarSpinner),e.xp6(4),e.Q6J("collectionSize",e.lcZ(62,20,o.total$))("page",o.service.page)("pageSize",o.service.pageSize)("maxSize",5)("rotate",!0)("boundaryLinks",!0))},directives:[oe.V,d.Fj,d.JJ,d.On,ie.g,d.EJ,d.YN,d.Kr,d._Y,d.JL,d.F,A.sg,A.O5,p.N9,d.sg,p.jt,B.w9,d.u,p._h,A.mk,p._L],pipes:[A.Ov,A.uU,A.H9],styles:[""]}),i})(),data:{role:["Vendedor","Admin"]},canActivate:[te.a]},{path:"deletesales",component:(()=>{class i{constructor(t,o,a){this.fb=t,this.usuarioService=o,this.ventaService=a,this.role="Admin",this.nombre_sedes="campoSede",this.idSede=""}ngOnInit(){this.breadCrumbItems=[{label:"Ventas"},{label:"Ventas Eliminas",active:!0}],this.getListSedes(),this.crearFormulario()}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}crearFormulario(){this.formSedes=this.fb.group({[this.nombre_sedes]:[this.idSede,[d.kI.required]]})}fS(t){return this.formSedes.get(t)}exportarVentasEliminadas(){if(this.formSedes.valid){let t=[];const o="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8";this.ventaService.getVentasEliminadasbySede(this.fS(this.nombre_sedes).value).subscribe(r=>{if(r.length>0){t=r.map(f=>{let M=f.list_accesorios.map(m=>({"PRECIO VENTA":m.precio_accesorio_v,"PRECIO COMPRA":m.precio_accesorio_c,"CANTIDAD VENDIDA":m.cant_vendida,NOMBRE:m.nombre_accesorio,"SUMA TOTAL":m.precio})),P=f.list_monturas.map(m=>({"PRECIO VENTA":m.precio_montura_v,"PRECIO COMPRA":m.precio_montura_c,"CANTIDAD VENDIDA":m.cant_vendida,MARCA:m.marca,MATERIAL:m.material,COLOR:m.color,"SUMA TOTAL":m.precio})),T=f.list_lunas.map(m=>({"PRECIO VENTA":m.precio_luna_v,"PRECIO COMPRA":m.precio_luna_c,"CANTIDAD VENDIDA":m.cant_vendida,MATERIAL:m.material,"SUMA TOTAL":m.precio}));return{FECHA:new Date(f.fecha_creacion_venta).toLocaleDateString("en-GB"),"NOMBRE CLIENTE":f.nombre_cliente,ACCESORIOS:JSON.stringify(M),LUNAS:JSON.stringify(T),MONTURAS:JSON.stringify(P),TOTAL:f.tipo_venta[0].precio_total,USUARIO:f.nombre_vendedor.toUpperCase(),VENDEDOR:f.nombre_jalador?f.nombre_jalador.toUpperCase():null,"ENCARGADO MEDICION":f.encargado_medicion?f.encargado_medicion.toUpperCase():null,"FORMA DE PAGO":f.tipo_venta[0].forma_pago}});const _={Sheets:{hoja:W.P6.json_to_sheet(t)},SheetNames:["hoja"]},b=W.cW(_,{bookType:"xlsx",type:"array"}),v=new Blob([b],{type:o}),E=this.listSedes.find(f=>f.id_sede==this.fS(this.nombre_sedes).value);(0,ve.Z)(v,"ventas_eliminadas_"+E.nombre_sede)}else this.mostrarMensaje()})}}mostrarMensaje(){w().fire({title:"B\xfasqueda finalizada",text:"No existen ventas elimindas",icon:"error",confirmButtonColor:"#34c38f"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.qu),e.Y36($.i),e.Y36(k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-deleted-sales"]],decls:21,vars:2,consts:[[1,"container-fluid"],["title","Ventas Eliminadas",3,"breadcrumbItems"],[1,"row","justify-content-center","Absolute-Center"],[1,"col-sm-12","col-lg-6"],[1,"card"],[1,"card-body"],[1,"card-title-desc","text-danger"],[1,"row"],[1,"col-12","col-sm-12"],[1,"mb-3"],["for","validationCustom01"],["role","toolbar",1,"btn-toolbar"],["class","col-12 d-grid",4,"appRole"],[1,"row","my-2"],[1,"col"],[1,"text-sm-end","mt-2","mt-sm-0"],[1,"btn","btn-success",3,"click"],[1,"uil","uil-store-alt","me-1"],[1,"col-12","d-grid"],[3,"formGroup"],["ngbDropdown",""],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"p",6),e._uU(7,"* Campo requerido"),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12,"Sede *"),e.qZA(),e.TgZ(13,"div",11),e.YNc(14,uo,4,3,"div",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"div",15),e.TgZ(18,"button",16),e.NdJ("click",function(){return o.exportarVentasEliminadas()}),e._UZ(19,"i",17),e._uU(20," Descargar Archivo "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("breadcrumbItems",o.breadCrumbItems),e.xp6(13),e.Q6J("appRole",o.role))},directives:[oe.V,ie.g,d._Y,d.JL,d.sg,p.jt,B.w9,d.JJ,d.u],styles:[""]}),i})(),data:{role:["Vendedor","Admin"]},canActivate:[te.a]}];let go=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[me.Bz.forChild(_o)],me.Bz]}),i})();var po=c(2974);let ho=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:ue._t,useValue:Ne.v}],imports:[[go,A.ez,d.UX,d.u5,de.h,p.XC,ue.Ti,ye.v,ce.bt,B.A0,p.jF,p.HK,p.Gs,p.ZS,p.lQ,p.Oz,p.IJ,Ze.rP,p.IJ,po.o]]}),i})()}}]);