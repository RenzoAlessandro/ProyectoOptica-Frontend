"use strict";(self.webpackChunkminible_ng=self.webpackChunkminible_ng||[]).push([[95],{2974:(Q,P,d)=>{d.d(P,{o:()=>l});var _=d(83668);let l=(()=>{class m{}return m.\u0275fac=function(y){return new(y||m)},m.\u0275mod=_.oAB({type:m}),m.\u0275inj=_.cJS({imports:[[]]}),m})()},10095:(Q,P,d)=>{d.r(P),d.d(P,{ProductsModule:()=>Ct});var _=d(86019),l=d(49133),m=d(20154),x=d(40345),y=d(98816),A=d(16541),q=d(63091),C=d(56225),v=d(75407),T=d(77044),U=d(34976),L=d(43514),u=d(63782),e=d(83668),O=d(91917),E=d(20566),D=d(11950),G=d(48185);function W(o,i){}function X(o,i){if(1&o&&e.YNc(0,W,0,0,"ng-template",18),2&o){e.oxw();const t=e.MAs(27);e.Q6J("ngTemplateOutlet",t)}}function K(o,i){}function $(o,i){if(1&o&&e.YNc(0,K,0,0,"ng-template",18),2&o){e.oxw();const t=e.MAs(29);e.Q6J("ngTemplateOutlet",t)}}function ee(o,i){}function te(o,i){if(1&o&&e.YNc(0,ee,0,0,"ng-template",18),2&o){e.oxw();const t=e.MAs(31);e.Q6J("ngTemplateOutlet",t)}}function oe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function re(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ae(o,i){if(1&o&&(e.TgZ(0,"div",43),e.TgZ(1,"div",44),e._UZ(2,"ng-select",45),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.s9C("formControlName",t.nombre_sedesMontura),e.Q6J("items",t.listSedes)}}function ie(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ne(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function se(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ce(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function le(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo letras "),e.qZA())}function de(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ue(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function pe(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1," Campo requerido "),e.qZA())}function me(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function ge(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function _e(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros enteros "),e.qZA())}const f=function(o){return{"is-invalid":o}};function he(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div"),e.TgZ(3,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveEvent()}),e.TgZ(4,"p",22),e._uU(5,"* Campo requerido"),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label",26),e._uU(10,"Fecha"),e.qZA(),e._UZ(11,"input",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"div",28),e.TgZ(14,"div",25),e.TgZ(15,"label",26),e._uU(16,"Material *"),e.qZA(),e._UZ(17,"input",29),e.TgZ(18,"div",30),e.YNc(19,oe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",28),e.TgZ(21,"div",25),e.TgZ(22,"label",26),e._uU(23,"Marca *"),e.qZA(),e._UZ(24,"input",32),e.TgZ(25,"div",30),e.YNc(26,re,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",28),e.TgZ(28,"div",25),e.TgZ(29,"label",26),e._uU(30,"Sede *"),e.qZA(),e.TgZ(31,"div",33),e.YNc(32,ae,3,2,"div",34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",23),e.TgZ(34,"div",28),e.TgZ(35,"div",25),e.TgZ(36,"label",26),e._uU(37,"C\xf3digo Interno *"),e.qZA(),e._UZ(38,"input",35),e.TgZ(39,"div",30),e.YNc(40,ie,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",28),e.TgZ(42,"div",25),e.TgZ(43,"label",26),e._uU(44,"C\xf3digo Montura *"),e.qZA(),e._UZ(45,"input",36),e.TgZ(46,"div",30),e.YNc(47,ne,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",28),e.TgZ(49,"div",25),e.TgZ(50,"label",26),e._uU(51,"Talla *"),e.qZA(),e._UZ(52,"input",37),e.TgZ(53,"div",30),e.YNc(54,se,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",23),e.TgZ(56,"div",28),e.TgZ(57,"div",25),e.TgZ(58,"label",26),e._uU(59,"Color *"),e.qZA(),e._UZ(60,"input",38),e.TgZ(61,"div",30),e.YNc(62,ce,2,0,"div",31),e.YNc(63,le,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",28),e.TgZ(65,"div",25),e.TgZ(66,"label",26),e._uU(67,"Precio de Compra *"),e.qZA(),e._UZ(68,"input",39),e.TgZ(69,"div",30),e.YNc(70,de,2,0,"div",31),e.YNc(71,ue,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",28),e.TgZ(73,"div",25),e.TgZ(74,"label",26),e._uU(75,"Precio de Venta *"),e.qZA(),e._UZ(76,"input",39),e.TgZ(77,"div",30),e.YNc(78,pe,2,0,"span",31),e.YNc(79,me,2,0,"span",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",23),e.TgZ(81,"div",28),e.TgZ(82,"div",25),e.TgZ(83,"label",26),e._uU(84,"Stock *"),e.qZA(),e._UZ(85,"input",40),e.TgZ(86,"div",30),e.YNc(87,ge,2,0,"div",31),e.YNc(88,_e,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(89,"div",41),e.TgZ(90,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().guardarMonturas()}),e._uU(91," Registrar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.formMonturas),e.xp6(8),e.s9C("formControlName",t.fecha_registro_montura),e.xp6(6),e.s9C("formControlName",t.material_montura),e.Q6J("ngClass",e.VKq(35,f,t.formM.campoMaterialMontura.invalid&&(t.formM.campoMaterialMontura.dirty||t.formM.campoMaterialMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoMaterialMontura.errors?null:t.formM.campoMaterialMontura.errors.required),e.xp6(5),e.s9C("formControlName",t.marca_montura),e.Q6J("ngClass",e.VKq(37,f,t.formM.campoMarcaMontura.invalid&&(t.formM.campoMarcaMontura.dirty||t.formM.campoMarcaMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoMarcaMontura.errors?null:t.formM.campoMarcaMontura.errors.required),e.xp6(6),e.Q6J("appRole",t.role),e.xp6(6),e.s9C("formControlName",t.codigo_montura),e.Q6J("ngClass",e.VKq(39,f,t.formM.campoCodigoMontura.invalid&&(t.formM.campoCodigoMontura.dirty||t.formM.campoCodigoMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoCodigoMontura.errors?null:t.formM.campoCodigoMontura.errors.required),e.xp6(5),e.s9C("formControlName",t.codigo_montura_caja),e.Q6J("ngClass",e.VKq(41,f,t.formM.campoCodigoMonturaCaja.invalid&&(t.formM.campoCodigoMonturaCaja.dirty||t.formM.campoCodigoMonturaCaja.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoCodigoMonturaCaja.errors?null:t.formM.campoCodigoMonturaCaja.errors.required),e.xp6(5),e.s9C("formControlName",t.talla_montura),e.Q6J("ngClass",e.VKq(43,f,t.formM.campoTallaMontura.invalid&&(t.formM.campoTallaMontura.dirty||t.formM.campoTallaMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoTallaMontura.errors?null:t.formM.campoTallaMontura.errors.required),e.xp6(6),e.s9C("formControlName",t.color_montura),e.Q6J("ngClass",e.VKq(45,f,t.formM.campoColorMontura.invalid&&(t.formM.campoColorMontura.dirty||t.formM.campoColorMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoColorMontura.errors?null:t.formM.campoColorMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formM.campoColorMontura.errors?null:t.formM.campoColorMontura.errors.pattern),e.xp6(5),e.s9C("formControlName",t.precio_compra_montura),e.Q6J("ngClass",e.VKq(47,f,t.formM.campoCompraMontura.invalid&&(t.formM.campoCompraMontura.dirty||t.formM.campoCompraMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoCompraMontura.errors?null:t.formM.campoCompraMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formM.campoCompraMontura.errors?null:t.formM.campoCompraMontura.errors.pattern),e.xp6(5),e.s9C("formControlName",t.precio_venta_montura),e.Q6J("ngClass",e.VKq(49,f,t.formM.campoVentaMontura.invalid&&(t.formM.campoVentaMontura.dirty||t.formM.campoVentaMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoVentaMontura.errors?null:t.formM.campoVentaMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formM.campoVentaMontura.errors?null:t.formM.campoVentaMontura.errors.pattern),e.xp6(6),e.s9C("formControlName",t.cantidad_montura),e.Q6J("ngClass",e.VKq(51,f,t.formM.campoCantidadMontura.invalid&&(t.formM.campoCantidadMontura.dirty||t.formM.campoCantidadMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formM.campoCantidadMontura.errors?null:t.formM.campoCantidadMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formM.campoCantidadMontura.errors?null:t.formM.campoCantidadMontura.errors.pattern),e.xp6(2),e.Q6J("disabled",!t.formMonturas.valid)}}function fe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Ze(o,i){if(1&o&&(e.TgZ(0,"div",43),e.TgZ(1,"div",44),e._UZ(2,"ng-select",45),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.s9C("formControlName",t.nombre_sedesLuna),e.Q6J("items",t.listSedes)}}function be(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ve(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros enteros "),e.qZA())}function Ae(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Ce(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function Te(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function xe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function qe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div"),e.TgZ(3,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveEvent()}),e.TgZ(4,"p",22),e._uU(5,"* Campo requerido"),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label",26),e._uU(10,"Fecha"),e.qZA(),e._UZ(11,"input",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"div",28),e.TgZ(14,"div",25),e.TgZ(15,"label",26),e._uU(16,"Material *"),e.qZA(),e._UZ(17,"input",46),e.TgZ(18,"div",30),e.YNc(19,fe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",28),e.TgZ(21,"div",25),e.TgZ(22,"label",26),e._uU(23,"Sede *"),e.qZA(),e.TgZ(24,"div",33),e.YNc(25,Ze,3,2,"div",34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",23),e.TgZ(27,"div",28),e.TgZ(28,"div",25),e.TgZ(29,"label",26),e._uU(30,"Stock *"),e.qZA(),e._UZ(31,"input",40),e.TgZ(32,"div",30),e.YNc(33,be,2,0,"div",31),e.YNc(34,ve,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",28),e.TgZ(36,"div",25),e.TgZ(37,"label",26),e._uU(38,"Precio de Compra *"),e.qZA(),e._UZ(39,"input",39),e.TgZ(40,"div",30),e.YNc(41,Ae,2,0,"div",31),e.YNc(42,Ce,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",28),e.TgZ(44,"div",25),e.TgZ(45,"label",26),e._uU(46,"Precio de Venta *"),e.qZA(),e._UZ(47,"input",39),e.TgZ(48,"div",30),e.YNc(49,Te,2,0,"div",31),e.YNc(50,xe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",41),e.TgZ(52,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().guardarLunas()}),e._uU(53," Registrar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.formLunas),e.xp6(8),e.s9C("formControlName",t.fecha_registro_luna),e.xp6(6),e.s9C("formControlName",t.material_luna),e.Q6J("ngClass",e.VKq(19,f,t.formL.campoMaterialLuna.invalid&&(t.formL.campoMaterialLuna.dirty||t.formL.campoMaterialLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formL.campoMaterialLuna.errors?null:t.formL.campoMaterialLuna.errors.required),e.xp6(6),e.Q6J("appRole",t.role),e.xp6(6),e.s9C("formControlName",t.cantidad_luna),e.Q6J("ngClass",e.VKq(21,f,t.formL.campoCantidadLuna.invalid&&(t.formL.campoCantidadLuna.dirty||t.formL.campoCantidadLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formL.campoCantidadLuna.errors?null:t.formL.campoCantidadLuna.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formL.campoCantidadLuna.errors?null:t.formL.campoCantidadLuna.errors.pattern),e.xp6(5),e.s9C("formControlName",t.precio_compra_luna),e.Q6J("ngClass",e.VKq(23,f,t.formL.campoCompraLuna.invalid&&(t.formL.campoCompraLuna.dirty||t.formL.campoCompraLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formL.campoCompraLuna.errors?null:t.formL.campoCompraLuna.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formL.campoCompraLuna.errors?null:t.formL.campoCompraLuna.errors.pattern),e.xp6(5),e.s9C("formControlName",t.precio_venta_luna),e.Q6J("ngClass",e.VKq(25,f,t.formL.campoVentaLuna.invalid&&(t.formL.campoVentaLuna.dirty||t.formL.campoVentaLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formL.campoVentaLuna.errors?null:t.formL.campoVentaLuna.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formL.campoVentaLuna.errors?null:t.formL.campoVentaLuna.errors.pattern),e.xp6(2),e.Q6J("disabled",!t.formLunas.valid)}}function Ne(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Ie(o,i){if(1&o&&(e.TgZ(0,"div",43),e.TgZ(1,"div",44),e._UZ(2,"ng-select",45),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.s9C("formControlName",t.nombre_sedesAccesorio),e.Q6J("items",t.listSedes)}}function Pe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Me(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros enteros "),e.qZA())}function ye(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Ee(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function Se(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Oe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function De(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div"),e.TgZ(3,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveEvent()}),e.TgZ(4,"p",22),e._uU(5,"* Campo requerido"),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label",26),e._uU(10,"Fecha"),e.qZA(),e._UZ(11,"input",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"div",28),e.TgZ(14,"div",25),e.TgZ(15,"label",26),e._uU(16,"Nombre del Accesorio *"),e.qZA(),e._UZ(17,"input",47),e.TgZ(18,"div",30),e.YNc(19,Ne,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",28),e.TgZ(21,"div",25),e.TgZ(22,"label",26),e._uU(23,"Sede *"),e.qZA(),e.TgZ(24,"div",33),e.YNc(25,Ie,3,2,"div",34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",23),e.TgZ(27,"div",28),e.TgZ(28,"div",25),e.TgZ(29,"label",26),e._uU(30,"Stock *"),e.qZA(),e._UZ(31,"input",48),e.TgZ(32,"div",30),e.YNc(33,Pe,2,0,"div",31),e.YNc(34,Me,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",28),e.TgZ(36,"div",25),e.TgZ(37,"label",26),e._uU(38,"Precio de Compra *"),e.qZA(),e._UZ(39,"input",49),e.TgZ(40,"div",30),e.YNc(41,ye,2,0,"div",31),e.YNc(42,Ee,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",28),e.TgZ(44,"div",25),e.TgZ(45,"label",26),e._uU(46,"Precio de Venta *"),e.qZA(),e._UZ(47,"input",50),e.TgZ(48,"div",30),e.YNc(49,Se,2,0,"div",31),e.YNc(50,Oe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",41),e.TgZ(52,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().guardarAccesorios()}),e._uU(53," Registrar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.formAccesorios),e.xp6(8),e.s9C("formControlName",t.fecha_registro_accesorio),e.xp6(6),e.s9C("formControlName",t.nombre_accesorio),e.Q6J("ngClass",e.VKq(19,f,t.formA.campoNombreAccesorio.invalid&&(t.formA.campoNombreAccesorio.dirty||t.formA.campoNombreAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formA.campoNombreAccesorio.errors?null:t.formA.campoNombreAccesorio.errors.required),e.xp6(6),e.Q6J("appRole",t.role),e.xp6(6),e.s9C("formControlName",t.cantidad_accesorio),e.Q6J("ngClass",e.VKq(21,f,t.formA.campoCantidadAccesorio.invalid&&(t.formA.campoCantidadAccesorio.dirty||t.formA.campoCantidadAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formA.campoCantidadAccesorio.errors?null:t.formA.campoCantidadAccesorio.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formA.campoCantidadAccesorio.errors?null:t.formA.campoCantidadAccesorio.errors.pattern),e.xp6(5),e.s9C("formControlName",t.precio_compra_accesorio),e.Q6J("ngClass",e.VKq(23,f,t.formA.campoCompraAccesorio.invalid&&(t.formA.campoCompraAccesorio.dirty||t.formA.campoCompraAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formA.campoCompraAccesorio.errors?null:t.formA.campoCompraAccesorio.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formA.campoCompraAccesorio.errors?null:t.formA.campoCompraAccesorio.errors.pattern),e.xp6(5),e.s9C("formControlName",t.precio_venta_accesorio),e.Q6J("ngClass",e.VKq(25,f,t.formA.campoVentaAccesorio.invalid&&(t.formA.campoVentaAccesorio.dirty||t.formA.campoVentaAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formA.campoVentaAccesorio.errors?null:t.formA.campoVentaAccesorio.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formA.campoVentaAccesorio.errors?null:t.formA.campoVentaAccesorio.errors.pattern),e.xp6(2),e.Q6J("disabled",!t.formAccesorios.valid)}}let we=(()=>{class o{constructor(t,r,a,s){this.fb=t,this.productosService=r,this.userService=a,this.usuarioService=s,this.role="Admin",this.idSede="",this.submitted=!1,this.orden_montura="campoOrdenMontura",this.material_montura="campoMaterialMontura",this.marca_montura="campoMarcaMontura",this.talla_montura="campoTallaMontura",this.color_montura="campoColorMontura",this.codigo_montura="campoCodigoMontura",this.codigo_montura_caja="campoCodigoMonturaCaja",this.cantidad_montura="campoCantidadMontura",this.precio_compra_montura="campoCompraMontura",this.precio_venta_montura="campoVentaMontura",this.fecha_registro_montura="campoFechaRegistroMontura",this.fecha_modificacion_montura="campoFechaModificacionMontura",this.nombre_sedesMontura="campoSedeMOntura",this.orden_luna="campoOrdenLuna",this.material_luna="campoMaterialLuna",this.cantidad_luna="campoCantidadLuna",this.precio_compra_luna="campoCompraLuna",this.precio_venta_luna="campoVentaLuna",this.fecha_registro_luna="campoFechaRegistroLuna",this.fecha_modificacion_luna="campoFechaModificacionLuna",this.nombre_sedesLuna="campoSedeLuna",this.orden_accesorio="campoOrdenAccesorio",this.nombre_accesorio="campoNombreAccesorio",this.cantidad_accesorio="campoCantidadAccesorio",this.precio_compra_accesorio="campoCompraAccesorio",this.precio_venta_accesorio="campoVentaAccesorio",this.fecha_registro_accesorio="campoFechaRegistroAccesorio",this.fecha_modificacion_accesorio="campoFechaModificacionAccesorio",this.nombre_sedesAccesorio="campoSedeAccesorio",this.lunas=new U.I,this.monturas=new L.c,this.accesorios=new T.N,this.numberPattern="[0-9]+",this.decimalPattern=/^\d+(\.\d{2})?$/,this.lettersPattern="[a-zA-Z ]*"}ngOnInit(){this.breadCrumbItems=[{label:"Productos"},{label:"A\xf1adir Productos",active:!0}],this.getListSedes(),this.crearFormulario()}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}crearFormulario(){this.fecha_actual=new Date(Date.now()),this.formMonturas=this.fb.group({[this.material_montura]:[null,[l.kI.required]],[this.marca_montura]:[null,[l.kI.required]],[this.talla_montura]:[null,[l.kI.required]],[this.color_montura]:[null,[l.kI.required,l.kI.pattern(this.lettersPattern)]],[this.codigo_montura]:[null,[l.kI.required]],[this.codigo_montura_caja]:[null,[l.kI.required]],[this.cantidad_montura]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.precio_compra_montura]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.precio_venta_montura]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fecha_registro_montura]:[{value:this.fecha_actual.toLocaleDateString(),disabled:!0}],[this.fecha_modificacion_montura]:[],[this.nombre_sedesMontura]:[this.idSede,[l.kI.required]]}),this.formLunas=this.fb.group({[this.material_luna]:[null,[l.kI.required]],[this.cantidad_luna]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.precio_compra_luna]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.precio_venta_luna]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fecha_registro_luna]:[{value:this.fecha_actual.toLocaleDateString(),disabled:!0}],[this.fecha_modificacion_luna]:[],[this.nombre_sedesLuna]:[this.idSede,[l.kI.required]]}),this.formAccesorios=this.fb.group({[this.nombre_accesorio]:[null,[l.kI.required]],[this.cantidad_accesorio]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.precio_compra_accesorio]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.precio_venta_accesorio]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fecha_registro_accesorio]:[{value:this.fecha_actual.toLocaleDateString(),disabled:!0}],[this.fecha_modificacion_accesorio]:[],[this.nombre_sedesAccesorio]:[this.idSede,[l.kI.required]]})}saveEvent(){this.submitted=!0}fA(t){return this.formAccesorios.get(t)}fL(t){return this.formLunas.get(t)}fM(t){return this.formMonturas.get(t)}guardarAccesorios(){this.formAccesorios.valid&&(this.accesorios.nombre_accesorio=this.fA(this.nombre_accesorio).value,this.accesorios.cantidad=Number(this.fA(this.cantidad_accesorio).value),this.accesorios.fecha_creacion_accesorio=new Date(Date.now()),this.accesorios.precio_accesorio_v=Number(this.fA(this.precio_venta_accesorio).value),this.accesorios.precio_accesorio_c=Number(this.fA(this.precio_compra_accesorio).value),this.accesorios.fecha_modificacion_accesorio=new Date(Date.now()),this.accesorios.id_sede=this.fA(this.nombre_sedesAccesorio).value,this.accesorios.habilitado=!0,this.accesorios.tipo="accesorio",(0,u.H)("loading","Cargando..."),this.productosService.createAccesorios(this.accesorios).subscribe(t=>{(0,u.H)("close",null),(0,u.H)("success","Accesorio guardado"),this.formAccesorios.reset(),this.fA(this.fecha_registro_accesorio).setValue(this.fecha_actual.toLocaleDateString())}))}guardarLunas(){this.formLunas.valid&&(this.lunas.material=this.fL(this.material_luna).value,this.lunas.precio_luna_c=Number(this.fL(this.precio_compra_luna).value),this.lunas.precio_luna_v=Number(this.fL(this.precio_venta_luna).value),this.lunas.fecha_creacion_luna=new Date(Date.now()),this.lunas.fecha_modificacion_luna=new Date(Date.now()),this.lunas.cantidad=Number(this.fL(this.cantidad_luna).value),this.lunas.id_sede=this.fL(this.nombre_sedesLuna).value,this.lunas.habilitado=!0,this.lunas.tipo="luna",(0,u.H)("loading","Cargando..."),this.productosService.createLunas(this.lunas).subscribe(t=>{(0,u.H)("close",null),(0,u.H)("success","Luna guardada"),this.formLunas.reset(),this.fL(this.fecha_registro_luna).setValue(this.fecha_actual.toLocaleDateString())}))}guardarMonturas(){this.formMonturas.valid&&(this.monturas.material=this.fM(this.material_montura).value,this.monturas.marca=this.fM(this.marca_montura).value,this.monturas.talla=this.fM(this.talla_montura).value,this.monturas.color=this.fM(this.color_montura).value,this.monturas.codigo=this.fM(this.codigo_montura).value,this.monturas.codigo_montura=this.fM(this.codigo_montura_caja).value,this.monturas.precio_montura_c=Number(this.fM(this.precio_compra_montura).value),this.monturas.precio_montura_v=Number(this.fM(this.precio_venta_montura).value),this.monturas.fecha_creacion_monturas=new Date(Date.now()),this.monturas.fecha_modificacion_monturas=new Date(Date.now()),this.monturas.cantidad=Number(this.fM(this.cantidad_montura).value),this.monturas.id_sede=this.fM(this.nombre_sedesMontura).value,this.monturas.habilitado=!0,this.monturas.tipo="montura",(0,u.H)("loading","Cargando..."),this.productosService.createMonturas(this.monturas).subscribe(t=>{(0,u.H)("close",null),(0,u.H)("success","Montura guardada"),this.formMonturas.reset(),this.fM(this.fecha_registro_montura).setValue(this.fecha_actual.toLocaleDateString())}))}get formM(){return this.formMonturas.controls}get formL(){return this.formLunas.controls}get formA(){return this.formAccesorios.controls}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(O.k),e.Y36(E.i),e.Y36(E.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-product"]],decls:32,vars:6,consts:[[1,"container-fluid"],["title","Registrar un Producto",3,"breadcrumbItems"],[1,"row","mb-4"],[1,"col-xl-12"],[1,"card","mb-0"],["ngbNav","",1,"nav","nav-tabs","nav-justified","nav-tabs-custom",3,"activeId"],["justifiednav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","",1,"nav-link"],[1,"uil","uil-nerd","font-size-20"],[1,"d-none","d-sm-block"],["ngbNavContent",""],[1,"uil","uil-panorama-h-alt","font-size-20"],[1,"uil","uil-box","font-size-20"],[3,"ngbNavOutlet"],["TabContentAbout",""],["TabContentTasks",""],["TabContentMessages",""],[3,"ngTemplateOutlet"],[1,"tab-content","p-4"],[1,"tab-pane","active"],[3,"formGroup","ngSubmit"],[1,"card-title-desc","text-danger"],[1,"row"],[1,"col-12","col-sm-3"],[1,"mb-3"],[1,"control-label"],["placeholder","Seleccione la fecha","type","text","name","title",1,"form-control",3,"formControlName"],[1,"col-12","col-sm-4"],["placeholder","Material de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"invalid-feedback"],[4,"ngIf"],["placeholder","Marca de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["role","toolbar",1,"btn-toolbar"],["class","col-12 d-grid",4,"appRole"],["placeholder","C\xf3digo interno","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","C\xf3digo montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Talla de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Color de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Precio","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Cantidad","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"text-end","mt-2"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"disabled","click"],[1,"col-12","d-grid"],["ngbDropdown",""],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName"],["placeholder","Material de la luna","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Accesorio","type","text","name","accesorio",1,"form-control",3,"formControlName","ngClass"],["placeholder","Cantidad","type","text","name","cantidad",1,"form-control",3,"formControlName","ngClass"],["placeholder","Precio","type","text","name","accesorio_compra",1,"form-control",3,"formControlName","ngClass"],["placeholder","Precio","type","text","name","accesorio_venta",1,"form-control",3,"formControlName","ngClass"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"ul",5,6),e.TgZ(7,"li",7),e.TgZ(8,"a",8),e._UZ(9,"i",9),e.TgZ(10,"span",10),e._uU(11,"Montura"),e.qZA(),e.qZA(),e.YNc(12,X,1,1,"ng-template",11),e.qZA(),e.TgZ(13,"li",7),e.TgZ(14,"a",8),e._UZ(15,"i",12),e.TgZ(16,"span",10),e._uU(17,"Luna"),e.qZA(),e.qZA(),e.YNc(18,$,1,1,"ng-template",11),e.qZA(),e.TgZ(19,"li",7),e.TgZ(20,"a",8),e._UZ(21,"i",13),e.TgZ(22,"span",10),e._uU(23,"Accesorio"),e.qZA(),e.qZA(),e.YNc(24,te,1,1,"ng-template",11),e.qZA(),e.qZA(),e._UZ(25,"div",14),e.qZA(),e.YNc(26,he,92,53,"ng-template",null,15,e.W1O),e.YNc(28,qe,54,27,"ng-template",null,16,e.W1O),e.YNc(30,De,54,27,"ng-template",null,17,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(6);e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(4),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngbNavItem",2),e.xp6(6),e.Q6J("ngbNavItem",3),e.xp6(6),e.Q6J("ngbNavOutlet",a)}},directives:[D.V,m.Pz,m.nv,m.Vx,m.uN,m.tO,_.tP,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,_.mk,_.O5,G.g,m.jt,x.w9],styles:[""]}),o})();var Ue=d(72156),Le=d(59801),N=d(45788),z=d(19039),w=d(4680);class R{constructor(){this.cabeceraExcelCodMontura="CODIGO MONTURA",this.cabeceraExcelIdMont="ID MONTURA",this.cabeceraExcelMaterial="MATERIAL",this.cabeceraExcelMarca="MARCA",this.cabeceraExcelCodigo="CODIGO",this.cabeceraExcelTalla="TALLA",this.cabeceraExcelColor="COLOR",this.cabeceraExcelCantidad="CANTIDAD",this.cabeceraExcelPCompra="PRECIO COMPRA",this.cabeceraExcelPVenta="PRECIO VENTA",this.cabeceraExcelFIngreso="FECHA INGRESO",this.cabeceraExcelTipo="TIPO",this.cabeceraExcelSede="SEDE",this.cabeceraExcelIdLun="ID LUNA",this.cabeceraExcelIdAccesorio="ID ACCESORIO",this.cabeceraExcelNombre="NOMBRE"}}var J=d(8239),ze=d(35427);function Je(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ngx-dropzone-remove-badge",1),e.NdJ("click",function(a){return e.CHM(t),e.oxw()._remove(a)}),e.qZA()}}const Fe=[[["ngx-dropzone-label"]]],ke=["ngx-dropzone-label"],Qe=["fileInput"];function Re(o,i){1&o&&e.Hsn(0,2,["*ngIf","!_hasPreviews"])}const Ve=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],He=["ngx-dropzone-preview","*","ngx-dropzone-label"];let je=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["ngx-dropzone-label"]]}),o})();function M(o){return null!=o&&"false"!=`${o}`}let Be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(t,r){1&t&&(e.O4$(),e.TgZ(0,"svg"),e._UZ(1,"line",0),e._UZ(2,"line",1),e.qZA())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),o})();var S=(()=>{return(o=S||(S={}))[o.BACKSPACE=8]="BACKSPACE",o[o.DELETE=46]="DELETE",S;var o})();let V=(()=>{class o{constructor(t){this.sanitizer=t,this._removable=!1,this.removed=new e.vpe,this.tabIndex=0}set file(t){this._file=t}get file(){return this._file}get removable(){return this._removable}set removable(t){this._removable=M(t)}keyEvent(t){switch(t.keyCode){case S.BACKSPACE:case S.DELETE:this.remove()}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}_remove(t){t.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){var t=this;return(0,J.Z)(function*(){return new Promise((r,a)=>{const s=new FileReader;if(s.onload=c=>{r(c.target.result)},s.onerror=c=>{console.error(`FileReader failed on file ${t.file.name}.`),a(c)},!t.file)return a("No file to read. Please provide a file using the [file] Input property.");s.readAsDataURL(t.file)})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ze.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(t,r){1&t&&e.NdJ("keyup",function(s){return r.keyEvent(s)}),2&t&&(e.Ikx("tabindex",r.tabIndex),e.Akn(r.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:ke,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(t,r){1&t&&(e.F$t(Fe),e.Hsn(0),e.YNc(1,Je,1,0,"ngx-dropzone-remove-badge",0)),2&t&&(e.xp6(1),e.Q6J("ngIf",r.removable))},directives:[_.O5,Be],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),o})(),H=(()=>{class o{parseFileList(t,r,a,s){const c=[],n=[];for(let Z=0;Z<t.length;Z++){const b=t.item(Z);this.isAccepted(b,r)?a&&b.size>a?this.rejectFile(n,b,"size"):!s&&c.length>=1?this.rejectFile(n,b,"no_multiple"):c.push(b):this.rejectFile(n,b,"type")}return{addedFiles:c,rejectedFiles:n}}isAccepted(t,r){if("*"===r)return!0;const a=r.split(",").map(g=>g.toLowerCase().trim()),s=t.type.toLowerCase(),c=t.name.toLowerCase();return!!a.find(g=>g.endsWith("/*")?s.split("/")[0]===g.split("/")[0]:g.startsWith(".")?c.endsWith(g):g==s)}rejectFile(t,r,a){const s=r;s.reason=a,t.push(s)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Ge=(()=>{class o{constructor(t){this.service=t,this.change=new e.vpe,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(t){this._disabled=M(t),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(t){this._multiple=M(t)}get maxFileSize(){return this._maxFileSize}set maxFileSize(t){this._maxFileSize=function(o){return isNaN(parseFloat(o))||isNaN(Number(o))?null:Number(o)}(t)}get expandable(){return this._expandable}set expandable(t){this._expandable=M(t)}get disableClick(){return this._disableClick}set disableClick(t){this._disableClick=M(t)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(t){this._processDirectoryDrop=M(t)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(t){this.disabled||(this.preventDefault(t),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(t){if(!this.disabled)if(this.preventDefault(t),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){const r=t.dataTransfer.items;if(r.length>0){const a=[],s=[];for(let n=0;n<r.length;n++){const g=r[n].webkitGetAsEntry();g.isFile?a.push(t.dataTransfer.files[n]):g.isDirectory&&s.push(g)}const c=new DataTransfer;if(a.forEach(n=>{c.items.add(n)}),!s.length&&c.items.length&&this.handleFileDrop(c.files),s.length){const n=[];for(const g of s)n.push(this.extractFilesFromDirectory(g));Promise.all(n).then(g=>{g.reduce((Z,b)=>[...Z,...b]).forEach(Z=>{c.items.add(Z)}),this.handleFileDrop(c.files)})}}}else this.handleFileDrop(t.dataTransfer.files)}extractFilesFromDirectory(t){function r(s){return a.apply(this,arguments)}function a(){return(a=(0,J.Z)(function*(s){try{return yield new Promise((c,n)=>s.file(c,n))}catch(c){console.log("Error converting a fileEntry to a File: ",c)}})).apply(this,arguments)}return new Promise((s,c)=>{const n=[],g=t.createReader(),Z=()=>{g.readEntries(function(){var b=(0,J.Z)(function*(h){if(h.length){const p=h.filter(k=>k.isFile);for(const k of p){const Tt=yield r(k);n.push(Tt)}Z()}else s(n)});return function(h){return b.apply(this,arguments)}}())};Z()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(t){this.handleFileDrop(t.target.files),this._fileInput.nativeElement.value="",this.preventDefault(t)}handleFileDrop(t){const r=this.service.parseFileList(t,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:r.addedFiles,rejectedFiles:r.rejectedFiles,source:this})}preventDefault(t){t.preventDefault(),t.stopPropagation()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(H,2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(t,r,a){if(1&t&&e.Suo(a,V,5),2&t){let s;e.iGM(s=e.CRH())&&(r._previewChildren=s)}},viewQuery:function(t,r){if(1&t&&e.Gf(Qe,7),2&t){let a;e.iGM(a=e.CRH())&&(r._fileInput=a.first)}},hostVars:8,hostBindings:function(t,r){1&t&&e.NdJ("click",function(){return r._onClick()})("dragover",function(s){return r._onDragOver(s)})("dragleave",function(){return r._onDragLeave()})("drop",function(s){return r._onDrop(s)}),2&t&&e.ekj("ngx-dz-disabled",r.disabled)("expandable",r.expandable)("unclickable",r.disableClick)("ngx-dz-hovered",r._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[e._Bn([H])],ngContentSelectors:He,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(t,r){1&t&&(e.F$t(Ve),e.TgZ(0,"input",0,1),e.NdJ("change",function(s){return r._onFilesSelected(s)}),e.qZA(),e.YNc(2,Re,1,0,"ng-content",2),e.Hsn(3),e.Hsn(4,1)),2&t&&(e.Q6J("id",r.id)("multiple",r.multiple)("accept",r.accept)("disabled",r.disabled),e.uIk("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedBy),e.xp6(2),e.Q6J("ngIf",!r._hasPreviews))},directives:[_.O5],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),o})(),We=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[_.ez]]}),o})();function Xe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ngx-dropzone-preview",26),e.NdJ("removed",function(){const s=e.CHM(t).$implicit;return e.oxw().onRemove(s)}),e.TgZ(1,"ngx-dropzone-label"),e._uU(2),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("file",t)("removable",!0),e.xp6(2),e.hij("",t.name," ")}}let Ke=(()=>{class o{constructor(t,r,a,s){this.fb=t,this.productoService=r,this.usuarioService=a,this.label=s,this.sede="campoSede",this.producto="campoProducto",this.sedeC="campoSedeC",this.productoC="campoProductoC",this.productos="campoProductos",this.files=[],this.errorImagen="",this.listProductos=[{id:1,nombre:"Monturas"},{id:2,nombre:"Lunas"},{id:3,nombre:"Accesorios"}],this.filebutton=!1,this.idSede=""}ngOnInit(){this.getListSedes(),this.crearFormulario(),this.breadCrumbItems=[{label:"Productos"},{label:"Actualizaci\xf3n por Excel",active:!0}],this.message="<div class='mb-3'><i class=\"display-4 text-muted uil uil-cloud-upload\"></i></div>Suelte los archivos aqu\xed o haga clic para cargar."}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}crearFormulario(){this.formExportar=this.fb.group({sede:[this.idSede,[l.kI.required]],producto:[null,[l.kI.required]]}),this.formExportarCrear=this.fb.group({[this.sedeC]:[this.idSede,[l.kI.required]],[this.productoC]:[null,[l.kI.required]]}),this.formImportar=this.fb.group({productos:[null,[l.kI.required]]})}f(t){return this.formExportar.get(t)}fC(t){return this.formExportarCrear.get(t)}exportarProductos(){if((0,u.H)("loading","Cargando..."),this.formExportar.valid){let t="";switch(this.f("producto").value){case 1:t="montura";break;case 2:t="luna";break;case 3:t="accesorio"}this.productoService.getProductosbySede(this.f("sede").value,t).subscribe(r=>{if((0,u.H)("close",null),0==r.length)(0,u.H)("success","No existen productos");else{let c=[];switch(t){case"montura":c=r.map(p=>({"ID MONTURA":p.id_producto,"PRECIO COMPRA":p.precio_montura_c,"PRECIO VENTA":p.precio_montura_v,TALLA:p.talla,CODIGO:p.codigo,"CODIGO MONTURA":p.codigo_montura,MARCA:p.marca,CANTIDAD:p.cantidad,COLOR:p.color,MATERIAL:p.material,TIPO:p.tipo,SEDE:p.id_sede,"FECHA INGRESO":new Date(p.fecha_creacion_monturas).toLocaleDateString("en-GB")}));break;case"luna":c=r.map(p=>({"ID LUNA":p.id_producto,"PRECIO COMPRA":p.precio_luna_c,"PRECIO VENTA":p.precio_luna_v,CANTIDAD:p.cantidad,MATERIAL:p.material,TIPO:p.tipo,SEDE:p.id_sede,"FECHA INGRESO":new Date(p.fecha_creacion_luna).toLocaleDateString("en-GB")}));break;case"accesorio":c=r.map(p=>({"ID ACCESORIO":p.id_producto,NOMBRE:p.nombre_accesorio,"PRECIO COMPRA":p.precio_accesorio_c,"PRECIO VENTA":p.precio_accesorio_v,CANTIDAD:p.cantidad,TIPO:p.tipo,SEDE:p.id_sede,"FECHA INGRESO":new Date(p.fecha_creacion_accesorio).toLocaleDateString("en-GB")}))}const g={Sheets:{hoja:N.P6.json_to_sheet(c)},SheetNames:["hoja"]},Z=N.cW(g,{bookType:"xlsx",type:"array"}),b=new Blob([Z],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),h=this.listSedes.find(p=>p.id_sede==this.f("sede").value);(0,z.Z)(b,t+"_"+h.nombre_sede)}})}}onSelect(t){this.files.push(...t.addedFiles),this.files.length>1?(this.errorImagen="Solo un archivo",this.files=[],this.filebutton=!1):(this.errorImagen="",this.filebutton=!0)}onRemove(t){this.filebutton=!1,this.files.splice(this.files.indexOf(t),1)}uploadFile(){const t=new FileReader;t.readAsBinaryString(this.files[0]),t.onload=r=>{let c,s=N.ij(r.target.result,{type:"binary"});if(s.SheetNames.forEach(n=>{c=N.P6.sheet_to_json(s.Sheets[n],{raw:!1,defval:""})}),this.validarCampoFecha(c))switch(c[0].TIPO.toLowerCase()){case"montura":c[0].hasOwnProperty(this.label.cabeceraExcelIdMont)?this.actualizarProducto(c,c[0].TIPO):this.crearProducto(c,c[0].TIPO);break;case"luna":c[0].hasOwnProperty(this.label.cabeceraExcelIdLun)?this.actualizarProducto(c,c[0].TIPO):this.crearProducto(c,c[0].TIPO);break;case"accesorio":c[0].hasOwnProperty(this.label.cabeceraExcelIdAccesorio)?this.actualizarProducto(c,c[0].TIPO):this.crearProducto(c,c[0].TIPO)}else(0,u.H)("error","Excel con fechas incorrectas")}}actualizarProducto(t,r){let a;this.validarCabeceraExcelUpdate(t,r)?(a=this.objExceltoDBUpdate(t,r),this.validarIdSede(t,a[0].id_sede)&&this.validarTipo(t,r)?((0,u.H)("loading","Cargando..."),this.productoService.updateProductsbyExcel(a).subscribe(c=>{(0,u.H)("close",null),(0,u.H)("success","Lista de "+r+" actualizada"),this.files=[],this.filebutton=!1})):(0,u.H)("error","Columna ID SEDE o TIPO incorrectos o faltantes")):(0,u.H)("error","Excel con cabecera incorrecta")}crearProducto(t,r){let a;if(this.validarCabeceraExcelCreate(t,r)){if(a=this.objExceltoDBCreate(t,r),!this.validarIdSede(t,a[0].id_sede)||!this.validarTipo(t,r))return void(0,u.H)("error","Columna ID SEDE o TIPO incorrectos o faltantes");(0,u.H)("loading","Cargando..."),this.productoService.createProductsbyExcel(a).subscribe(c=>{(0,u.H)("close",null),(0,u.H)("success","Lista de "+r+" creada"),this.files=[],this.filebutton=!1})}else(0,u.H)("error","Excel con cabecera incorrecta")}objExceltoDBCreate(t,r){let a,s,c;switch(r.toLowerCase()){case"montura":return a=t.map(n=>({material:""==n.MATERIAL?"SIN ESPECIFICAR":n.MATERIAL,marca:""==n.MARCA?"SIN ESPECIFICAR":n.MARCA,codigo:""==n.CODIGO?"SIN ESPECIFICAR":n.CODIGO,codigo_montura:""==n["CODIGO MONTURA"]?"SIN ESPECIFICAR":n["CODIGO MONTURA"],talla:""==n.TALLA?"SIN ESPECIFICAR":n.TALLA,color:""==n.COLOR?"SIN ESPECIFICAR":n.COLOR,precio_montura_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_montura_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,habilitado:!0,fecha_creacion_monturas:(0,w.p6)(n[this.label.cabeceraExcelFIngreso]),fecha_modificacion_monturas:new Date(Date.now())})),a.forEach(n=>{n.tipo=r.toLowerCase()}),a;case"luna":return s=t.map(n=>({material:""==n.MATERIAL?"SIN ESPECIFICAR":n.MATERIAL,precio_luna_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_luna_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,habilitado:!0,fecha_creacion_luna:(0,w.p6)(n[this.label.cabeceraExcelFIngreso]),fecha_modificacion_luna:new Date(Date.now())})),s.forEach(n=>{n.tipo=r.toLowerCase()}),s;case"accesorio":return c=t.map(n=>({nombre_accesorio:""==n.NOMBRE?"SIN ESPECIFICAR":n.NOMBRE,precio_accesorio_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_accesorio_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),fecha_creacion_accesorio:(0,w.p6)(n[this.label.cabeceraExcelFIngreso]),fecha_modificacion_accesorio:new Date(Date.now()),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,habilitado:!0})),c.forEach(n=>{n.tipo=r.toLowerCase()}),c}}objExceltoDBUpdate(t,r){let a,s,c;switch(r.toLowerCase()){case"montura":return a=t.map(n=>({id_producto:n["ID MONTURA"],precio_montura_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_montura_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),fecha_modificacion_monturas:new Date(Date.now()),tipo:n.TIPO,id_sede:n.SEDE,codigo_montura:n["CODIGO MONTURA"]})),a;case"luna":return s=t.map(n=>({id_producto:n["ID LUNA"],precio_luna_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_luna_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),fecha_modificacion_luna:new Date(Date.now()),tipo:n.TIPO,id_sede:n.SEDE})),s;case"accesorio":return c=t.map(n=>({id_producto:n["ID ACCESORIO"],precio_accesorio_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_accesorio_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),fecha_modificacion_accesorio:new Date(Date.now()),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,tipo:n.TIPO})),c}}validarCabeceraExcelCreate(t,r){switch(r.toLowerCase()){case"montura":return 12==Object.keys(t[0]).length&&t[0].hasOwnProperty(this.label.cabeceraExcelCodMontura)&&t[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&t[0].hasOwnProperty(this.label.cabeceraExcelMarca)&&t[0].hasOwnProperty(this.label.cabeceraExcelCodigo)&&t[0].hasOwnProperty("TALLA")&&t[0].hasOwnProperty("COLOR")&&t[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&t[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&t[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&t[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&t[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&t[0].hasOwnProperty(this.label.cabeceraExcelSede);case"luna":return 7==Object.keys(t[0]).length&&t[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&t[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&t[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&t[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&t[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&t[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&t[0].hasOwnProperty(this.label.cabeceraExcelSede);case"accesorio":return 7==Object.keys(t[0]).length&&t[0].hasOwnProperty(this.label.cabeceraExcelNombre)&&t[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&t[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&t[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&t[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&t[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&t[0].hasOwnProperty(this.label.cabeceraExcelSede);default:return!1}}validarCabeceraExcelUpdate(t,r){switch(r.toLowerCase()){case"montura":return 13==Object.keys(t[0]).length&&t[0].hasOwnProperty(this.label.cabeceraExcelCodMontura)&&t[0].hasOwnProperty(this.label.cabeceraExcelIdMont)&&t[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&t[0].hasOwnProperty(this.label.cabeceraExcelMarca)&&t[0].hasOwnProperty(this.label.cabeceraExcelCodigo)&&t[0].hasOwnProperty(this.label.cabeceraExcelTalla)&&t[0].hasOwnProperty(this.label.cabeceraExcelColor)&&t[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&t[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&t[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&t[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&t[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&t[0].hasOwnProperty(this.label.cabeceraExcelSede);case"luna":return 8==Object.keys(t[0]).length&&t[0].hasOwnProperty(this.label.cabeceraExcelIdLun)&&t[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&t[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&t[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&t[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&t[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&t[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&t[0].hasOwnProperty(this.label.cabeceraExcelSede);case"accesorio":return 8==Object.keys(t[0]).length&&t[0].hasOwnProperty(this.label.cabeceraExcelIdAccesorio)&&t[0].hasOwnProperty(this.label.cabeceraExcelNombre)&&t[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&t[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&t[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&t[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&t[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&t[0].hasOwnProperty(this.label.cabeceraExcelSede);default:return!1}}validarIdSede(t,r){return t.every(a=>a[this.label.cabeceraExcelSede]===r)}validarTipo(t,r){switch(r){case"montura":case"luna":case"accesorio":return t.every(a=>a[this.label.cabeceraExcelTipo]===r);default:return!1}}validarCampoFecha(t){return t.every(r=>10==r[this.label.cabeceraExcelFIngreso].length&&Date.parse((0,w.wd)(r[this.label.cabeceraExcelFIngreso])))}descargarPlantilla(){if(this.formExportarCrear.valid){let t="";switch(this.fC(this.productoC).value){case 1:t="montura";break;case 2:t="luna";break;case 3:t="accesorio"}let r=this.fC(this.sedeC).value;const a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8";let c=[];switch(t){case"montura":c[0]={"PRECIO COMPRA":0,"PRECIO VENTA":0,TALLA:0,CODIGO:0,"CODIGO MONTURA":"--",MARCA:"MARCA",CANTIDAD:0,COLOR:"COLOR",MATERIAL:"MATERIAL",TIPO:t,SEDE:r,"FECHA INGRESO":new Date(Date.now()).toLocaleDateString("en-GB")};break;case"luna":c[0]={"PRECIO COMPRA":0,"PRECIO VENTA":0,CANTIDAD:0,MATERIAL:"MATERIAL",TIPO:t,SEDE:r,"FECHA INGRESO":new Date(Date.now()).toLocaleDateString("en-GB")};break;case"accesorio":c[0]={NOMBRE:"NOMBRE","PRECIO COMPRA":0,"PRECIO VENTA":0,CANTIDAD:0,TIPO:t,SEDE:r,"FECHA INGRESO":new Date(Date.now()).toLocaleDateString("en-GB")}}const g={Sheets:{hoja:N.P6.json_to_sheet(c)},SheetNames:["hoja"]},Z=N.cW(g,{bookType:"xlsx",type:"array"}),b=new Blob([Z],{type:a}),h=this.listSedes.find(p=>p.id_sede==r);(0,z.Z)(b,t+"_"+h.nombre_sede)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(O.k),e.Y36(E.i),e.Y36(R))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-update-excel"]],decls:89,vars:15,consts:[[1,"container-fluid"],["title","Actualici\xf3n de Stock por Archivo Excel",3,"breadcrumbItems"],[1,"row"],[1,"col-12","col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-title-desc"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[3,"formGroup"],[1,"mb-1"],["ngbDropdown","",1,"mt-2","me-1"],["formControlName","sede","placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items"],["formControlName","producto","placeholder","Seleccione el producto","bindValue","id","bindLabel","nombre",3,"items"],[1,"col-12","d-grid"],["type","button",1,"btn","btn-primary","btn-block","mt-2","me-1",3,"disabled","click"],[1,"uil","uil-cloud-download","me-2"],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName"],["placeholder","Seleccione el producto","bindValue","id","bindLabel","nombre",3,"items","formControlName"],[1,"col-12"],["ngx-dropzone","",1,"custom-dropzone",3,"accept","change"],[1,"display-4","text-muted","uil","uil-cloud-upload"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e._uU(7,"Exportar para Actualizar"),e.qZA(),e.TgZ(8,"p",7),e._uU(9,"Seleccione la "),e.TgZ(10,"strong"),e._uU(11,"sede"),e.qZA(),e._uU(12," y "),e.TgZ(13,"strong"),e._uU(14,"tipo de producto"),e.qZA(),e._uU(15," para generar la tabla Excel a modificar. "),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"h4",9),e._uU(18,"Advertencia al Actualizar!"),e.qZA(),e.TgZ(19,"p"),e._uU(20,"No modificar las siguientes columnas: ID MONTURA, TALLA, CODIGO, MARCA, COLOR, MATERIAL, TIPO, SEDE y FECHA INGRESO. Solo se podr\xe1 modificar las siguientes columnas: PRECIO COMPRA, PRECIO VENTA y CANTIDAD (solo digitos). No se permite eliminar productos por excel, a tal efecto ir a Men\xfa -> Listas de Productos."),e.qZA(),e.qZA(),e.TgZ(21,"div"),e.TgZ(22,"form",10),e.TgZ(23,"div",11),e.TgZ(24,"div",2),e.TgZ(25,"div",3),e.TgZ(26,"div",12),e._UZ(27,"ng-select",13),e.qZA(),e.qZA(),e.TgZ(28,"div",3),e.TgZ(29,"div",12),e._UZ(30,"ng-select",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",15),e.TgZ(32,"button",16),e.NdJ("click",function(){return r.exportarProductos()}),e._UZ(33,"i",17),e._uU(34," Descargar Archivo "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",3),e.TgZ(36,"div",4),e.TgZ(37,"div",5),e.TgZ(38,"div",6),e._uU(39,"Exportar para Crear"),e.qZA(),e.TgZ(40,"p",7),e._uU(41,"Seleccione la "),e.TgZ(42,"strong"),e._uU(43,"sede"),e.qZA(),e._uU(44," y "),e.TgZ(45,"strong"),e._uU(46,"tipo de producto"),e.qZA(),e._uU(47," para generar la tabla Excel a modificar. "),e.qZA(),e.TgZ(48,"div",8),e.TgZ(49,"h4",9),e._uU(50,"Advertencia al Crear!"),e.qZA(),e._UZ(51,"hr"),e.TgZ(52,"p"),e._uU(53,"Cada elemento (nuevo producto) debe reutilizarse copiando el TIPO y SEDE. (TIPO en min\xfasculas)."),e.qZA(),e._UZ(54,"hr"),e.qZA(),e.TgZ(55,"div"),e.TgZ(56,"form",10),e.TgZ(57,"div",11),e.TgZ(58,"div",2),e.TgZ(59,"div",3),e.TgZ(60,"div",12),e._UZ(61,"ng-select",18),e.qZA(),e.qZA(),e.TgZ(62,"div",3),e.TgZ(63,"div",12),e._UZ(64,"ng-select",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",15),e.TgZ(66,"button",16),e.NdJ("click",function(){return r.descargarPlantilla()}),e._UZ(67,"i",17),e._uU(68," Descargar Archivo "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",2),e.TgZ(70,"div",20),e.TgZ(71,"div",4),e.TgZ(72,"div",5),e.TgZ(73,"div",6),e._uU(74,"Importar"),e.qZA(),e.TgZ(75,"p",7),e._uU(76,"Cargue el archivo mofificado. "),e.qZA(),e.TgZ(77,"div"),e.TgZ(78,"form",10),e.TgZ(79,"div",21),e.NdJ("change",function(s){return r.onSelect(s)}),e.TgZ(80,"ngx-dropzone-label"),e.TgZ(81,"div"),e._UZ(82,"i",22),e.TgZ(83,"h3"),e._uU(84,"Suelte los archivos aqu\xed o haga clic para cargar."),e.qZA(),e.qZA(),e.qZA(),e.YNc(85,Xe,3,3,"ngx-dropzone-preview",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",24),e.TgZ(87,"button",25),e.NdJ("click",function(){return r.uploadFile()}),e._uU(88,"Subir Archivo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(21),e.Q6J("formGroup",r.formExportar),e.xp6(5),e.Q6J("items",r.listSedes),e.xp6(3),e.Q6J("items",r.listProductos),e.xp6(2),e.Q6J("disabled",!r.formExportar.valid),e.xp6(24),e.Q6J("formGroup",r.formExportarCrear),e.xp6(5),e.s9C("formControlName",r.sedeC),e.Q6J("items",r.listSedes),e.xp6(3),e.s9C("formControlName",r.productoC),e.Q6J("items",r.listProductos),e.xp6(2),e.Q6J("disabled",!r.formExportarCrear.valid),e.xp6(12),e.Q6J("formGroup",r.formImportar),e.xp6(1),e.Q6J("accept","text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),e.xp6(6),e.Q6J("ngForOf",r.files),e.xp6(2),e.Q6J("disabled",!r.filebutton))},directives:[D.V,l._Y,l.JL,l.sg,m.jt,x.w9,l.JJ,l.u,Ge,je,_.sg,V],styles:["ngx-dropzone[_ngcontent-%COMP%], .custom-dropzone[_ngcontent-%COMP%]{margin:20px}.custom-dropzone[_ngcontent-%COMP%]{border-radius:5px;font-size:1vh}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:5px solid #eb4f4f}.icon[_ngcontent-%COMP%]{width:15%;height:15%}"]}),o})();const $e={asc:"desc",desc:"","":"asc"};let et=(()=>{class o{constructor(){this.sortable="",this.direction="",this.sort=new e.vpe}rotate(){this.direction=$e[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(t,r){1&t&&e.NdJ("click",function(){return r.rotate()}),2&t&&e.ekj("asc","asc"===r.direction)("desc","desc"===r.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}}),o})();var F=d(94774);const tt=["autocomplete"];function ot(o,i){1&o&&e._UZ(0,"a",34),2&o&&e.Q6J("innerHTML",i.$implicit.id_producto,e.oJD)}function rt(o,i){1&o&&e._UZ(0,"div",34),2&o&&e.Q6J("innerHTML",i.$implicit,e.oJD)}function at(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"td"),e.TgZ(2,"td"),e._UZ(3,"ngb-highlight",35),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"ngb-highlight",35),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"ngb-highlight",35),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"ngb-highlight",35),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"ngb-highlight",35),e.qZA(),e.TgZ(12,"td"),e._UZ(13,"ngb-highlight",35),e.qZA(),e.TgZ(14,"td"),e._UZ(15,"ngb-highlight",35),e.qZA(),e.TgZ(16,"td"),e._UZ(17,"ngb-highlight",35),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"ngb-highlight",35),e.qZA(),e.TgZ(20,"td"),e._UZ(21,"ngb-highlight",35),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"td"),e.TgZ(24,"a",36),e.NdJ("click",function(){const a=e.CHM(t),s=a.$implicit,c=a.index;return e.oxw().eliminar(s,c)}),e._UZ(25,"i",37),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=i.index;e.xp6(3),e.Q6J("result",r+1),e.xp6(2),e.Q6J("result",t.material),e.xp6(2),e.Q6J("result",t.marca),e.xp6(2),e.Q6J("result",t.codigo),e.xp6(2),e.Q6J("result",t.talla),e.xp6(2),e.Q6J("result",t.color),e.xp6(2),e.Q6J("result",t.cantidad),e.xp6(2),e.Q6J("result",t.precio_montura_c),e.xp6(2),e.Q6J("result",t.precio_montura_v),e.xp6(2),e.Q6J("result",e.xi3(22,10,t.fecha_creacion_monturas,"dd/MM/yyyy"))}}function it(o,i){1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"div",24),e.TgZ(2,"div",38),e.TgZ(3,"a",39),e._UZ(4,"i",40),e._uU(5," Cargando "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}let nt=(()=>{class o{constructor(t,r,a){this.fb=t,this.usuarioService=r,this.monturasService=a,this.mostrarSpinner=!1,this.isMasterSel=!1,this.listSedes=[],this.checkedMonturasList=[],this.listAllProducts=[],this.keyword="id_producto",this.products=[],this.nombre_sedes="campoSede",this.idSede="",this.monturasList=[]}ngOnInit(){(0,u.H)("loading","Cargando..."),this.getListSedes(),this.getListMonturas(),this.crearFormulario(),this.breadCrumbItems=[{label:"Productos"},{label:"Inventario de Monturas",active:!0}]}getListMonturas(){this.monturasService.getProductosbySede(this.usuarioService.getSedebyUser(),"montura").subscribe(t=>{(0,u.H)("close",null),this.listMonturas=t;const r={isSelected:!1};this.listMonturas.forEach(a=>{Object.assign(a,r)}),this.mostrarSpinner=!0})}crearFormulario(){this.formInventario=this.fb.group({[this.nombre_sedes]:[this.idSede]})}fS(t){return this.formInventario.get(t)}changeSede(){this.products=[],this.idSede=this.fS(this.nombre_sedes).value,(0,u.H)("loading","Cargando..."),this.updateListMonturas(this.idSede)}updateListMonturas(t){this.monturasService.getProductosbySede(t,"montura").subscribe(r=>{(0,u.H)("close",null),this.listMonturas=r;const a={isSelected:!1};this.listMonturas.forEach(s=>{Object.assign(s,a)}),this.mostrarSpinner=!0})}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}removeProduct(){this.products=this.products.filter(t=>!1!==t.isSelected)}eliminar(t,r){this.products[r].isSelected=!1,this.removeProduct()}selectEvent(t){if(this.products.find(a=>a.id_producto===t.id_producto))return(0,u.H)("error","Este producto ya fue registrado"),this.autocomplete.clear(),void this.autocomplete.close();"montura"===t.tipo&&(this.products.push(Object.assign(Object.assign({},t),{isSelected:!0})),this.autocomplete.clear(),this.autocomplete.close())}onChangeSearch(t){}onFocused(t){this.autocomplete.close()}exportarMonturas(){const a=this.filterArrays(this.listMonturas,this.products);this.products.push(...a);let s=[];s=this.products.map(h=>({"ID MONTURA":h.id_producto,TALLA:h.talla,"CODIGO MONTURA":h.codigo_montura,CODIGO:h.codigo,MARCA:h.marca,CANTIDAD:h.cantidad,COLOR:h.color,MATERIAL:h.material,INVENTARIO:h.isSelected?"SI":"NO","FECHA INGRESO":new Date(h.fecha_creacion_monturas).toLocaleDateString("en-GB")}));const n={Sheets:{hoja:N.P6.json_to_sheet(s)},SheetNames:["hoja"]},g=N.cW(n,{bookType:"xlsx",type:"array"}),Z=new Blob([g],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),b=this.listSedes.find(h=>h.id_sede==this.fS(this.nombre_sedes).value);(0,z.Z)(Z,"monturas_"+b.nombre_sede),this.products=[]}filterArrays(t,r){let a=[];return a=t.filter(s=>!r.find(c=>c.id_producto===s.id_producto)),a}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(E.i),e.Y36(O.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-inventario"]],viewQuery:function(t,r){if(1&t&&(e.Gf(tt,5),e.Gf(et,5)),2&t){let a;e.iGM(a=e.CRH())&&(r.autocomplete=a.first),e.iGM(a=e.CRH())&&(r.headers=a)}},features:[e._Bn([_.JJ])],decls:74,vars:16,consts:[[1,"container-fluid"],["title","Inventario de Monturas",3,"breadcrumbItems"],[1,"row"],[1,"col-12","mb-2"],["role","toolbar",1,"btn-toolbar"],[1,"col-12","col-md-3","d-grid","mb-2"],[3,"formGroup"],["ngbDropdown",""],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName","change"],[1,"col-12","col-md-6","d-grid","mb-2","px-2"],[1,"position-relative"],["placeholder","Buscar productos","historyIdentifier","","focusFirst","true","minQueryLength","8",3,"data","searchKeyword","itemTemplate","notFoundTemplate","selected","inputChanged","inputFocused","keyup.enter"],["autocomplete",""],["itemTemplate",""],["notFoundTemplate",""],[1,"col-12","col-md-3","d-grid"],[1,"btn-group","mb-2"],["type","button","value","Descargar Archivo",1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"row","md-2"],[1,"col-sm-12","col-md-12"],[1,"dataTables_length","text-md-end"],[1,"d-inline-flex","align-items-center"],["name","pageSize",1,"custom-select","custom-select-sm","form-control","form-control-sm","form-select","form-select-sm"],[3,"ngValue"],[1,"col-12"],[1,"table-responsive","mb-4"],[1,"table","table-centered","table-nowrap","mb-0","align-middle","table-card-list",2,"border-spacing","0 12px","width","100%"],[1,"bg-transparent"],[2,"width","20px"],[2,"width","170px"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center"],[1,"text-md-end","float-md-end","pagination-rounded"],[3,"innerHTML"],[3,"result","term"],["placement","top","ngbTooltip","Eliminar",1,"px-2","text-danger",3,"click"],[1,"uil","uil-trash-alt","font-size-18"],[1,"text-center","my-3"],["href","javascript:void(0);",1,"text-primary"],[1,"mdi","mdi-loading","mdi-spin","font-size-20","align-middle","me-2"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div"),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"form",6),e.TgZ(8,"div",7),e.TgZ(9,"ng-select",8),e.NdJ("change",function(){return r.changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"ng-autocomplete",11,12),e.NdJ("selected",function(s){return r.selectEvent(s)})("inputChanged",function(s){return r.onChangeSearch(s)})("inputFocused",function(s){return r.onFocused(s)})("keyup.enter",function(s){return r.selectEvent(s)}),e.qZA(),e.YNc(14,ot,1,1,"ng-template",null,13,e.W1O),e.YNc(16,rt,1,1,"ng-template",null,14,e.W1O),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"div",16),e.TgZ(20,"input",17),e.NdJ("click",function(){return r.exportarMonturas()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",18),e.TgZ(22,"div",19),e.TgZ(23,"div",20),e.TgZ(24,"label",21),e._uU(25,"Mostrar"),e.TgZ(26,"select",22),e.TgZ(27,"option",23),e._uU(28,"10"),e.qZA(),e.TgZ(29,"option",23),e._uU(30,"25"),e.qZA(),e.TgZ(31,"option",23),e._uU(32,"50"),e.qZA(),e.TgZ(33,"option",23),e._uU(34,"100"),e.qZA(),e.TgZ(35,"option",23),e._uU(36,"200"),e.qZA(),e.qZA(),e._uU(37," entradas"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",2),e.TgZ(39,"div",24),e.TgZ(40,"div",25),e.TgZ(41,"form"),e.TgZ(42,"table",26),e.TgZ(43,"thead"),e.TgZ(44,"tr",27),e._UZ(45,"th",28),e.TgZ(46,"th"),e._uU(47,"Ord."),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Material"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Marca"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"C\xf3d."),e.qZA(),e.TgZ(54,"th"),e._uU(55,"Talla"),e.qZA(),e.TgZ(56,"th"),e._uU(57,"Color"),e.qZA(),e.TgZ(58,"th"),e._uU(59,"Stock"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"P. Compra"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"P. Venta"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"Fecha de ing."),e.qZA(),e.TgZ(66,"th",29),e._uU(67,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"tbody"),e.YNc(69,at,26,13,"tr",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(70,it,6,0,"div",31),e.TgZ(71,"div",32),e.TgZ(72,"div",24),e._UZ(73,"div",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(15),s=e.MAs(17);e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(6),e.Q6J("formGroup",r.formInventario),e.xp6(2),e.s9C("formControlName",r.nombre_sedes),e.Q6J("items",r.listSedes),e.xp6(3),e.Q6J("data",r.listMonturas)("searchKeyword",r.keyword)("itemTemplate",a)("notFoundTemplate",s),e.xp6(8),e.Q6J("disabled",!(r.products.length>0)),e.xp6(7),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(2),e.Q6J("ngValue",200),e.xp6(34),e.Q6J("ngForOf",r.products),e.xp6(1),e.Q6J("ngIf",!r.mostrarSpinner)}},directives:[D.V,l._Y,l.JL,l.sg,m.jt,x.w9,l.JJ,l.u,F.YR,l.YN,l.Kr,l.F,_.sg,_.O5,m._h,m._L],pipes:[_.uU],styles:[""]}),o})();var I=d(85298),st=d(1659),j=d.n(st);const ct=["autocomplete"];function lt(o,i){1&o&&e._UZ(0,"a",33),2&o&&e.Q6J("innerHTML",i.$implicit.id_producto,e.oJD)}function dt(o,i){1&o&&e._UZ(0,"div",33),2&o&&e.Q6J("innerHTML",i.$implicit,e.oJD)}function ut(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"ngb-highlight",38),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngb-highlight",38),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngb-highlight",38),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"ngb-highlight",38),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"ngb-highlight",38),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"ngb-highlight",38),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"ngb-highlight",38),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"ngb-highlight",38),e.qZA(),e.TgZ(17,"td"),e._UZ(18,"ngb-highlight",38),e.qZA(),e.TgZ(19,"td"),e._UZ(20,"ngb-highlight",38),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"td"),e.TgZ(23,"a",39),e.NdJ("click",function(){const a=e.CHM(t),s=a.$implicit,c=a.index;return e.oxw(2).eliminar(s,c)}),e._UZ(24,"i",40),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=i.index;e.xp6(2),e.Q6J("result",r+1),e.xp6(2),e.Q6J("result",t.material),e.xp6(2),e.Q6J("result",t.marca),e.xp6(2),e.Q6J("result",t.codigo),e.xp6(2),e.Q6J("result",t.talla),e.xp6(2),e.Q6J("result",t.color),e.xp6(2),e.Q6J("result",t.cantidad),e.xp6(2),e.Q6J("result",t.precio_montura_c),e.xp6(2),e.Q6J("result",t.precio_montura_v),e.xp6(2),e.Q6J("result",e.xi3(21,10,t.fecha_creacion_monturas,"dd/MM/yyyy"))}}function pt(o,i){if(1&o&&(e.TgZ(0,"table",34),e.TgZ(1,"thead"),e.TgZ(2,"tr",35),e.TgZ(3,"th"),e._uU(4,"Ord."),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Material"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Marca"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"C\xf3d."),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Talla"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Color"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Stock"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"P. Compra"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"P. Venta"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Fecha de ing."),e.qZA(),e.TgZ(23,"th",36),e._uU(24,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"tbody"),e.YNc(26,ut,25,13,"tr",37),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(26),e.Q6J("ngForOf",t.products)}}function mt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"ngb-highlight",38),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngb-highlight",38),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngb-highlight",38),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"ngb-highlight",38),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"ngb-highlight",38),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"ngb-highlight",38),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e.TgZ(15,"a",39),e.NdJ("click",function(){const a=e.CHM(t),s=a.$implicit,c=a.index;return e.oxw(2).eliminar(s,c)}),e._UZ(16,"i",40),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=i.index;e.xp6(2),e.Q6J("result",r+1),e.xp6(2),e.Q6J("result",t.material),e.xp6(2),e.Q6J("result",t.cantidad),e.xp6(2),e.Q6J("result",t.precio_luna_c),e.xp6(2),e.Q6J("result",t.precio_luna_v),e.xp6(2),e.Q6J("result",e.xi3(13,6,t.fecha_creacion_luna,"dd/MM/yyyy"))}}function gt(o,i){if(1&o&&(e.TgZ(0,"table",34),e.TgZ(1,"thead"),e.TgZ(2,"tr",35),e.TgZ(3,"th"),e._uU(4,"Ord."),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Material"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Stock"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"P. Compra"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"P. Venta"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Fecha de ing."),e.qZA(),e.TgZ(15,"th",36),e._uU(16,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,mt,17,9,"tr",37),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(18),e.Q6J("ngForOf",t.products)}}function _t(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._UZ(2,"ngb-highlight",38),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"ngb-highlight",38),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"ngb-highlight",38),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"ngb-highlight",38),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"ngb-highlight",38),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"ngb-highlight",38),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e.TgZ(15,"a",39),e.NdJ("click",function(){const a=e.CHM(t),s=a.$implicit,c=a.index;return e.oxw(2).eliminar(s,c)}),e._UZ(16,"i",40),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=i.index;e.xp6(2),e.Q6J("result",r+1),e.xp6(2),e.Q6J("result",t.nombre_accesorio),e.xp6(2),e.Q6J("result",t.cantidad),e.xp6(2),e.Q6J("result",t.precio_accesorio_c),e.xp6(2),e.Q6J("result",t.precio_accesorio_v),e.xp6(2),e.Q6J("result",e.xi3(13,6,t.fecha_creacion_accesorio,"dd/MM/yyyy"))}}function ht(o,i){if(1&o&&(e.TgZ(0,"table",34),e.TgZ(1,"thead"),e.TgZ(2,"tr",35),e.TgZ(3,"th"),e._uU(4,"Ord."),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Stock"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"P. Compra"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"P. Venta"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Fecha de ing."),e.qZA(),e.TgZ(15,"th",36),e._uU(16,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,_t,17,9,"tr",37),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(18),e.Q6J("ngForOf",t.products)}}const Zt=[{path:"addproducts",component:we,data:{role:["Admin"]},canActivate:[I.a]},{path:"accesorios",component:v.c,data:{role:["Vendedor","Admin"]},canActivate:[I.a]},{path:"lunas",component:Ue.N,data:{role:["Vendedor","Admin"]},canActivate:[I.a]},{path:"monturas",component:Le.x,data:{role:["Vendedor","Admin"]},canActivate:[I.a]},{path:"updateexcel",component:Ke,data:{role:["Admin"]},canActivate:[I.a]},{path:"inventario",component:nt,data:{role:["Admin"]},canActivate:[I.a]},{path:"traslados",component:(()=>{class o{constructor(t,r,a){this.fb=t,this.usuarioService=r,this.productosService=a,this.mostrarSpinner=!1,this.listSedes=[],this.products=[],this.nombre_sedes="campoSede",this.nombre_sedeDestino="campoSedeDestino",this.idSede="",this.idSedeDestino="",this.keyword="id_producto",this.producto="campoProducto",this.listProductos=[{id:1,nombre:"Monturas"},{id:2,nombre:"Lunas"},{id:3,nombre:"Accesorios"}],this.tipoProducto=0}ngOnInit(){this.getListSedes(),this.crearFormulario(),this.breadCrumbItems=[{label:"Productos"},{label:"Traslado de Productos",active:!0}]}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}crearFormulario(){this.formInventario=this.fb.group({[this.nombre_sedes]:[this.idSede,[l.kI.required]],[this.producto]:[null,[l.kI.required]]}),this.formSede=this.fb.group({[this.nombre_sedeDestino]:[null,[l.kI.required]]})}fS(t){return this.formInventario.get(t)}fD(t){return this.formSede.get(t)}changeSede(){this.products=[],this.idSede=this.fS(this.nombre_sedes).value,this.tipoProducto=this.fS(this.producto).value,null!=this.idSede&&null!=this.tipoProducto&&((0,u.H)("loading","Cargando..."),this.updateListProducts(this.idSede,this.tipoProducto))}updateListProducts(t,r){switch(r){case 1:this.productosService.getMonturasforSale(t).subscribe(a=>{(0,u.H)("close",null),this.listProducts=a,this.mostrarSpinner=!0});break;case 2:this.productosService.getLunasforSale(t).subscribe(a=>{(0,u.H)("close",null),this.listProducts=a,this.mostrarSpinner=!0});break;case 3:this.productosService.getAccesoriosforSale(t).subscribe(a=>{(0,u.H)("close",null),this.listProducts=a,this.mostrarSpinner=!0})}}selectEvent(t){if(this.products.find(a=>a.id_producto===t.id_producto))return(0,u.H)("error","Este producto ya fue registrado"),this.autocomplete.clear(),void this.autocomplete.close();switch(t.tipo){case"montura":case"luna":case"accesorio":this.products.push(Object.assign({},t)),this.autocomplete.clear(),this.autocomplete.close()}}onChangeSearch(t){}onFocused(t){this.autocomplete.close()}trasladoSedes(){const t=j().mixin({customClass:{cancelButton:"btn btn-danger ms-2",confirmButton:"btn btn-success"},buttonsStyling:!1});t.fire({title:"\xbfEst\xe1 seguro de realizar el traslado?",text:"\xa1No se podr\xe1 revertir esto!",icon:"warning",cancelButtonText:"No, cancelar!",confirmButtonText:"Si, trasladar!",showCancelButton:!0}).then(r=>{if(r.value&&this.formSede.valid){(0,u.H)("loading","Cargando...");let a=this.fD(this.nombre_sedeDestino).value,s=this.usuarioService.getUser().nombres+" "+this.usuarioService.getUser().apellidos;this.products.forEach(c=>{c.hasOwnProperty("traslado")||Object.assign(c,{traslado:[]})}),this.productosService.updateSedeofListProducts(s,a,this.products).subscribe(c=>{(0,u.H)("close",null),(0,u.H)("success","Traslado realizado"),this.products=[]},c=>{(0,u.H)("close",null),404!==c.status&&(0,u.H)("error","Error en la conexi\xf3n")})}else r.dismiss===j().DismissReason.cancel&&t.fire("Cancelado","La venta no se ha realizado","error")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(E.i),e.Y36(O.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-traslados"]],viewQuery:function(t,r){if(1&t&&e.Gf(ct,5),2&t){let a;e.iGM(a=e.CRH())&&(r.autocomplete=a.first)}},decls:68,vars:22,consts:[[1,"container-fluid"],["title","Traslado de Productos",3,"breadcrumbItems"],[1,"row"],[1,"col-6"],[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[3,"formGroup"],[1,"mb-1"],[1,"col-12","col-md-6"],["ngbDropdown","",1,"mt-2","me-1"],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName","change"],["placeholder","Seleccione el producto","bindValue","id","bindLabel","nombre",3,"items","formControlName","change"],[1,"col-12","d-grid","mt-2","px-2"],[1,"position-relative"],["placeholder","Buscar productos","historyIdentifier","","focusFirst","true","minQueryLength","8",3,"data","searchKeyword","itemTemplate","notFoundTemplate","selected","inputChanged","inputFocused","keyup.enter"],["autocomplete",""],["itemTemplate",""],["notFoundTemplate",""],[1,"col-12"],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName"],[1,"btn-group"],["type","button","value","Trasladar",1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"row","md-2"],[1,"col-sm-12","col-md-12"],[1,"dataTables_length","text-md-end"],[1,"d-inline-flex","align-items-center"],["name","pageSize",1,"custom-select","custom-select-sm","form-control","form-control-sm","form-select","form-select-sm"],[3,"ngValue"],[1,"table-responsive","mb-4"],["class","table  table-centered table-nowrap mb-0 align-middle table-card-list ","style","border-spacing: 0 12px; width: 100%;",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center"],[1,"text-md-end","float-md-end","pagination-rounded"],[3,"innerHTML"],[1,"table","table-centered","table-nowrap","mb-0","align-middle","table-card-list",2,"border-spacing","0 12px","width","100%"],[1,"bg-transparent"],[2,"width","170px"],[4,"ngFor","ngForOf"],[3,"result","term"],["placement","top","ngbTooltip","Eliminar",1,"px-2","text-danger",3,"click"],[1,"uil","uil-trash-alt","font-size-18"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4",6),e._uU(7,"DE:"),e.qZA(),e.TgZ(8,"form",7),e.TgZ(9,"div",8),e.TgZ(10,"div",2),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"ng-select",11),e.NdJ("change",function(){return r.changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"div",10),e.TgZ(16,"ng-select",12),e.NdJ("change",function(){return r.changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",2),e.TgZ(18,"div",13),e.TgZ(19,"div",14),e.TgZ(20,"ng-autocomplete",15,16),e.NdJ("selected",function(s){return r.selectEvent(s)})("inputChanged",function(s){return r.onChangeSearch(s)})("inputFocused",function(s){return r.onFocused(s)})("keyup.enter",function(s){return r.selectEvent(s)}),e.qZA(),e.YNc(22,lt,1,1,"ng-template",null,17,e.W1O),e.YNc(24,dt,1,1,"ng-template",null,18,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",3),e.TgZ(27,"div",4),e.TgZ(28,"div",5),e.TgZ(29,"h4",6),e._uU(30,"A:"),e.qZA(),e.TgZ(31,"div",8),e.TgZ(32,"div",2),e.TgZ(33,"div",19),e.TgZ(34,"form",7),e.TgZ(35,"div",10),e._UZ(36,"ng-select",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",2),e.TgZ(38,"div",13),e.TgZ(39,"div",21),e.TgZ(40,"input",22),e.NdJ("click",function(){return r.trasladoSedes()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",23),e.TgZ(42,"div",24),e.TgZ(43,"div",25),e.TgZ(44,"label",26),e._uU(45,"Mostrar"),e.TgZ(46,"select",27),e.TgZ(47,"option",28),e._uU(48,"10"),e.qZA(),e.TgZ(49,"option",28),e._uU(50,"25"),e.qZA(),e.TgZ(51,"option",28),e._uU(52,"50"),e.qZA(),e.TgZ(53,"option",28),e._uU(54,"100"),e.qZA(),e.TgZ(55,"option",28),e._uU(56,"200"),e.qZA(),e.qZA(),e._uU(57," entradas"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",2),e.TgZ(59,"div",19),e.TgZ(60,"div",29),e.TgZ(61,"form"),e.YNc(62,pt,27,1,"table",30),e.YNc(63,gt,19,1,"table",30),e.YNc(64,ht,19,1,"table",30),e.qZA(),e.qZA(),e.TgZ(65,"div",31),e.TgZ(66,"div",19),e._UZ(67,"div",32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(23),s=e.MAs(25);e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(7),e.Q6J("formGroup",r.formInventario),e.xp6(5),e.s9C("formControlName",r.nombre_sedes),e.Q6J("items",r.listSedes),e.xp6(3),e.s9C("formControlName",r.producto),e.Q6J("items",r.listProductos),e.xp6(4),e.Q6J("data",r.listProducts)("searchKeyword",r.keyword)("itemTemplate",a)("notFoundTemplate",s),e.xp6(14),e.Q6J("formGroup",r.formSede),e.xp6(2),e.s9C("formControlName",r.nombre_sedeDestino),e.Q6J("items",r.listSedes),e.xp6(4),e.Q6J("disabled",!(r.products.length>0||r.formSede.valid)),e.xp6(7),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(2),e.Q6J("ngValue",200),e.xp6(7),e.Q6J("ngIf",1==r.tipoProducto),e.xp6(1),e.Q6J("ngIf",2==r.tipoProducto),e.xp6(1),e.Q6J("ngIf",3==r.tipoProducto)}},directives:[D.V,l._Y,l.JL,l.sg,m.jt,x.w9,l.JJ,l.u,F.YR,l.YN,l.Kr,l.F,_.O5,_.sg,m._h,m._L],pipes:[_.uU],styles:[""]}),o})(),data:{role:["Admin"]},canActivate:[I.a]}];let bt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[C.Bz.forChild(Zt)],C.Bz]}),o})();var Y=d(41867),B=d(64351),vt=d(2974);const At={url:"https://httpbin.org/post"};let Ct=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[R,{provide:Y._t,useValue:At}],imports:[[bt,_.ez,l.UX,l.u5,y.h,m.XC,Y.Ti,q.v,A.bt,x.A0,m.jF,m.HK,m.Gs,m.ZS,m.lQ,m.Oz,m.IJ,We,B.n4,F.rP,B.Tf,vt.o]]}),o})()},4680:(Q,P,d)=>{function _(A){return new Promise((q,C)=>{var v=new Image;v.setAttribute("crossOrigin","anonymous"),v.onload=()=>{var T=document.createElement("canvas");T.width=v.width,T.height=v.height,T.getContext("2d").drawImage(v,0,0);var L=T.toDataURL("image/png");q(L)},v.onerror=T=>{C(T)},v.src=A})}function l(A){const[q,C,v]=A.split("/");return new Date(+v,+C-1,+q)}function m(A){const[q,C,v]=A.split("/");return v+"-"+C+"-"+q}function x(A,q){var C=Math.pow(10,q||0);return Math.round(A*C)/C}function y(A){return A.toISOString().substring(0,7)}d.d(P,{up:()=>_,p6:()=>l,wd:()=>m,NM:()=>x,fh:()=>y})}}]);