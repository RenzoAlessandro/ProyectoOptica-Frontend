"use strict";(self.webpackChunkminible_ng=self.webpackChunkminible_ng||[]).push([[409],{70409:(I,T,a)=>{a.r(T),a.d(T,{StoreModule:()=>xe});var l=a(86019),n=a(49133),u=a(20154),J=a(40345),y=a(98816),D=a(16541),b=a(41867),Q=a(5426),w=a(63091),Z=a(56225),q=a(85298),C=a(16550),c=a(63782),e=a(83668),A=a(21061),S=a(11950),p=a(91918);function O(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function R(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 3 caracteres "),e.qZA())}function F(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor a 40 caracteres "),e.qZA())}function z(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Y(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 3 caracteres "),e.qZA())}function $(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor a 60 caracteres "),e.qZA())}function k(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function M(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros "),e.qZA())}function j(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 8 caracteres "),e.qZA())}function V(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor e igual a 11 caracteres "),e.qZA())}function H(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function B(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros "),e.qZA())}function P(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 6 caracteres "),e.qZA())}function W(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor e igual a 9 caracteres "),e.qZA())}function K(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",27),e.NdJ("removed",function(){const d=e.CHM(t).$implicit;return e.oxw().onRemove(d)}),e.qZA()}2&o&&e.Q6J("file",r.$implicit)("removable",!0)}const f=function(o){return{"is-invalid":o}};let G=(()=>{class o{constructor(t,i){this.fb=t,this.sedeService=i,this.selectValue=[],this.selectedValue="",this.stateValue=[],this.submitted=!1,this.nombre_tienda="campoNombreTienda",this.direccion_tienda="campoDireccionTienda",this.telefono_tienda="campoTelefonoTienda",this.ruc_tienda="campoRucTienda",this.color_tienda="campoColorTienda",this.numberPattern="^[0-9]+$|^S*$",this.sede=new C.t,this.files=[]}ngOnInit(){this.breadCrumbItems=[{label:"Tiendas"},{label:"A\xf1adir Tienda",active:!0}],this.crearFormulario(),this.selectValue=["Abierto","Cerrado"]}crearFormulario(){this.formTiendas=this.fb.group({[this.nombre_tienda]:[null,[n.kI.required,n.kI.minLength(3),n.kI.maxLength(40)]],[this.direccion_tienda]:[null,[n.kI.required,n.kI.minLength(3),n.kI.maxLength(60)]],[this.telefono_tienda]:[null,[n.kI.required,n.kI.pattern(this.numberPattern),n.kI.minLength(6),n.kI.maxLength(9)]],[this.ruc_tienda]:[null,[n.kI.required,n.kI.pattern(this.numberPattern),n.kI.minLength(8),n.kI.maxLength(11)]],[this.color_tienda]:[]})}saveEvent(){this.submitted=!0}f(t){return this.formTiendas.get(t)}guardarSede(){if(this.formTiendas.valid){this.sede.direccion=this.f(this.direccion_tienda).value,this.sede.fecha_creacion_sede=new Date(Date.now()),this.sede.nombre_sede=this.f(this.nombre_tienda).value,this.sede.habilitado=!0,this.sede.fecha_modificacion_sede=new Date(Date.now()),this.sede.ruc=this.f(this.ruc_tienda).value,this.sede.telefono=this.f(this.telefono_tienda).value,this.sede.color=this.f(this.color_tienda).value,(0,c.H)("loading","Cargando...");let t=new FormData;0!=this.files.length?(t.append("photo",this.files[0],this.files[0].name),this.sedeService.saveImageBackend(t).subscribe(i=>{this.sede.logoURL=i.logoURL,this.sede.logoDOWNLOAD=i.logoDOWNLOAD,this.sedeService.createSede(this.sede).subscribe(s=>{this.files=[],this.getListSedes(),(0,c.H)("close",null),(0,c.H)("success","Tienda guardada"),this.formTiendas.reset()})})):this.sedeService.createSede(this.sede).subscribe(i=>{this.sede.logoURL=null,this.sede.logoDOWNLOAD=null,this.files=[],this.getListSedes(),(0,c.H)("close",null),(0,c.H)("success","Tienda guardada"),this.formTiendas.reset()})}}getListSedes(){this.sedeService.getSedes().subscribe(t=>{localStorage.setItem("sedes",JSON.stringify(t))})}get formT(){return this.formTiendas.controls}onSelect(t){this.files.push(...t.addedFiles),this.files.length>1&&(this.files=[])}onRemove(t){this.files.splice(this.files.indexOf(t),1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(n.qu),e.Y36(A.Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-store"]],decls:69,vars:35,consts:[[1,"container-fluid"],["title","Registrar Nueva Tienda",3,"breadcrumbItems"],[1,"row","justify-content-center","Absolute-Center"],[1,"col-sm-12","col-lg-6"],[1,"card"],[1,"card-body"],[3,"formGroup"],[1,"card-title-desc","text-danger"],[1,"row"],[1,"col-12"],[1,"mb-3"],["for","validationCustom01"],["placeholder","Nombre de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"invalid-feedback"],[4,"ngIf"],[1,"col-12","col-sm-12"],["placeholder","Direcci\xf3n de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","RUC de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Tel\xe9fono de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["ngx-dropzone","",1,"custom-dropzone",3,"accept","change"],[1,"display-4","text-muted","uil","uil-cloud-upload"],["ngProjectAs","ngx-dropzone-preview","accept","'image/jpeg,image/jpg,image/png'",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],[1,"row","my-2"],[1,"col"],[1,"text-sm-end","mt-2","mt-sm-0"],[1,"btn","btn-success",3,"disabled","click"],[1,"uil","uil-store-alt","me-1"],["ngProjectAs","ngx-dropzone-preview","accept","'image/jpeg,image/jpg,image/png'",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"form",6),e.TgZ(7,"p",7),e._uU(8,"* Campo requerido"),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e._uU(13,"Nombre *"),e.qZA(),e._UZ(14,"input",12),e.TgZ(15,"div",13),e.YNc(16,O,2,0,"div",14),e.YNc(17,R,2,0,"div",14),e.YNc(18,F,2,0,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",8),e.TgZ(20,"div",15),e.TgZ(21,"div",10),e.TgZ(22,"label",11),e._uU(23,"Direcci\xf3n *"),e.qZA(),e._UZ(24,"input",16),e.TgZ(25,"div",13),e.YNc(26,z,2,0,"div",14),e.YNc(27,Y,2,0,"div",14),e.YNc(28,$,2,0,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",8),e.TgZ(30,"div",15),e.TgZ(31,"div",10),e.TgZ(32,"label",11),e._uU(33,"RUC *"),e.qZA(),e._UZ(34,"input",17),e.TgZ(35,"div",13),e.YNc(36,k,2,0,"div",14),e.YNc(37,M,2,0,"div",14),e.YNc(38,j,2,0,"div",14),e.YNc(39,V,2,0,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",8),e.TgZ(41,"div",15),e.TgZ(42,"div",10),e.TgZ(43,"label",11),e._uU(44,"Tel\xe9fono *"),e.qZA(),e._UZ(45,"input",18),e.TgZ(46,"div",13),e.YNc(47,H,2,0,"div",14),e.YNc(48,B,2,0,"div",14),e.YNc(49,P,2,0,"div",14),e.YNc(50,W,2,0,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",8),e.TgZ(52,"div",15),e.TgZ(53,"div",10),e.TgZ(54,"label",11),e._uU(55,"Logo de la Tienda"),e.qZA(),e.TgZ(56,"div",19),e.NdJ("change",function(d){return i.onSelect(d)}),e.TgZ(57,"ngx-dropzone-label"),e.TgZ(58,"div"),e._UZ(59,"i",20),e.TgZ(60,"h3"),e._uU(61,"Suelte los archivos aqu\xed o haga clic para cargar."),e.qZA(),e.qZA(),e.qZA(),e.YNc(62,K,1,2,"ngx-dropzone-image-preview",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",22),e.TgZ(64,"div",23),e.TgZ(65,"div",24),e.TgZ(66,"button",25),e.NdJ("click",function(){return i.guardarSede()}),e._UZ(67,"i",26),e._uU(68," Registar Tienda "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("breadcrumbItems",i.breadCrumbItems),e.xp6(5),e.Q6J("formGroup",i.formTiendas),e.xp6(8),e.s9C("formControlName",i.nombre_tienda),e.Q6J("ngClass",e.VKq(27,f,i.formT.campoNombreTienda.invalid&&(i.formT.campoNombreTienda.dirty||i.formT.campoNombreTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==i.formT.campoNombreTienda.errors?null:i.formT.campoNombreTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoNombreTienda.errors?null:i.formT.campoNombreTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoNombreTienda.errors?null:i.formT.campoNombreTienda.errors.maxlength),e.xp6(6),e.s9C("formControlName",i.direccion_tienda),e.Q6J("ngClass",e.VKq(29,f,i.formT.campoDireccionTienda.invalid&&(i.formT.campoDireccionTienda.dirty||i.formT.campoDireccionTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==i.formT.campoDireccionTienda.errors?null:i.formT.campoDireccionTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoDireccionTienda.errors?null:i.formT.campoDireccionTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoDireccionTienda.errors?null:i.formT.campoDireccionTienda.errors.maxlength),e.xp6(6),e.s9C("formControlName",i.ruc_tienda),e.Q6J("ngClass",e.VKq(31,f,i.formT.campoRucTienda.invalid&&(i.formT.campoRucTienda.dirty||i.formT.campoRucTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==i.formT.campoRucTienda.errors?null:i.formT.campoRucTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoRucTienda.errors?null:i.formT.campoRucTienda.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoRucTienda.errors?null:i.formT.campoRucTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoRucTienda.errors?null:i.formT.campoRucTienda.errors.maxlength),e.xp6(6),e.s9C("formControlName",i.telefono_tienda),e.Q6J("ngClass",e.VKq(33,f,i.formT.campoTelefonoTienda.invalid&&(i.formT.campoTelefonoTienda.dirty||i.formT.campoTelefonoTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==i.formT.campoTelefonoTienda.errors?null:i.formT.campoTelefonoTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoTelefonoTienda.errors?null:i.formT.campoTelefonoTienda.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoTelefonoTienda.errors?null:i.formT.campoTelefonoTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==i.formT.campoTelefonoTienda.errors?null:i.formT.campoTelefonoTienda.errors.maxlength),e.xp6(6),e.Q6J("accept","image/*"),e.xp6(6),e.Q6J("ngForOf",i.files),e.xp6(4),e.Q6J("disabled",!i.formTiendas.valid))},directives:[S.V,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,l.mk,l.O5,p._f,p.NP,l.sg,p.sv],styles:[""]}),o})();var _=a(34099),X=a(23405),ee=a(22411),h=a(81366),x=a(65686),N=a(79204),L=a(5250);let E=(()=>{class o{constructor(t,i){this.pipe=t,this.storeService=i,this._loading$=new _.X(!0),this._search$=new X.xQ,this._customers$=new _.X([]),this._total$=new _.X(0),this._mostrar$=new _.X(!1),this.storesList=[],this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:""},this.getListStores()}updateTable(t){this.storesList=t,this._mostrar$.next(!0),this._search$.pipe((0,h.b)(()=>this._loading$.next(!0)),(0,x.b)(200),(0,N.w)(()=>this._search()),(0,L.g)(200),(0,h.b)(()=>this._loading$.next(!1))).subscribe(i=>{this._customers$.next(i.customers),this._total$.next(i.total)}),this._search$.next()}get customers$(){return this._customers$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get mostrar(){return this._mostrar$.asObservable()}set page(t){this._set({page:t})}set pageSize(t){this._set({pageSize:t})}set searchTerm(t){this._set({searchTerm:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}_set(t){Object.assign(this._state,t),this._search$.next()}_search(){const{sortColumn:t,sortDirection:i,pageSize:s,page:d,searchTerm:g}=this._state;let m=function(o,r,t){return""===t||""===r?o:[...o].sort((i,s)=>{const d=((o,r)=>o<r?-1:o>r?1:0)(i[r],s[r]);return"asc"===t?d:-d})}(this.storesList,t,i);m=m.filter(Le=>function(o,r,t){var i,s;return(null===(i=o.nombre_sede)||void 0===i?void 0:i.toLowerCase().includes(r.toLowerCase()))||(null===(s=o.direccion)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()))}(Le,g));const Ne=m.length;return m=m.slice((d-1)*s,(d-1)*s+s),(0,ee.of)({customers:m,total:Ne})}getListStores(){this.storeService.getSedes().subscribe(t=>{this.storesList=t,this._mostrar$.next(!0),this._search$.pipe((0,h.b)(()=>this._loading$.next(!0)),(0,x.b)(200),(0,N.w)(()=>this._search()),(0,L.g)(200),(0,h.b)(()=>this._loading$.next(!1))).subscribe(i=>{this._customers$.next(i.customers),this._total$.next(i.total)}),this._search$.next()})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(l.JJ),e.LFG(A.Z))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var re=a(1659),U=a.n(re);function ne(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"div",17),e.TgZ(5,"div",18),e._UZ(6,"i",19),e.qZA(),e.qZA(),e.TgZ(7,"div",20),e.TgZ(8,"div"),e.TgZ(9,"h5",21),e.TgZ(10,"a",22),e._uU(11),e.qZA(),e.qZA(),e.TgZ(12,"p",23),e._uU(13,"Direcci\xf3n : "),e.TgZ(14,"span",24),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",25),e.TgZ(17,"ul",26),e.TgZ(18,"li",27),e.TgZ(19,"a",28),e.NdJ("click",function(){const d=e.CHM(t).$implicit,g=e.oxw(),m=e.MAs(13);return g.OpenModalEditStore(m,d)}),e._UZ(20,"i",29),e.qZA(),e.qZA(),e.TgZ(21,"li",30),e.TgZ(22,"a",28),e.NdJ("click",function(){const d=e.CHM(t).$implicit;return e.oxw().elimninarVenta(d)}),e._UZ(23,"i",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div"),e.TgZ(25,"div",9),e.TgZ(26,"div",3),e.TgZ(27,"div",32),e.TgZ(28,"p",33),e._uU(29,"R.U.C."),e.qZA(),e.TgZ(30,"h5",34),e._uU(31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",3),e.TgZ(33,"div",32),e.TgZ(34,"p",33),e._uU(35,"Tel\xe9fono"),e.qZA(),e.TgZ(36,"h5",34),e._uU(37),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",3),e.TgZ(39,"div",32),e.TgZ(40,"p",33),e._uU(41,"Fecha"),e.qZA(),e.TgZ(42,"h5",34),e._uU(43),e.ALo(44,"date"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(11),e.Oqu(t.nombre_sede),e.xp6(4),e.Oqu(t.direccion),e.xp6(16),e.Oqu(t.ruc),e.xp6(6),e.Oqu(t.telefono),e.xp6(6),e.Oqu(e.xi3(44,5,t.fecha_creacion_sede,"dd/MM/yyyy"))}}function se(o,r){1&o&&(e.TgZ(0,"div",9),e.TgZ(1,"div",35),e.TgZ(2,"div",36),e.TgZ(3,"a",37),e._UZ(4,"i",38),e._uU(5," Cargando "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}function ae(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function de(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 3 caracteres "),e.qZA())}function le(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor a 40 caracteres "),e.qZA())}function ce(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function me(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 3 caracteres "),e.qZA())}function ue(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor a 60 caracteres "),e.qZA())}function pe(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ge(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros "),e.qZA())}function Te(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 8 caracteres "),e.qZA())}function fe(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor e igual a 11 caracteres "),e.qZA())}function _e(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function he(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros "),e.qZA())}function ve(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser mayor a 6 caracteres "),e.qZA())}function Ze(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1," El campo debe ser menor e igual a 9 caracteres "),e.qZA())}function Ae(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",60),e.NdJ("removed",function(){const d=e.CHM(t).$implicit;return e.oxw(2).onRemove(d)}),e.qZA()}2&o&&e.Q6J("file",r.$implicit)("removable",!0)}const v=function(o){return{"is-invalid":o}};function be(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"h5",40),e._uU(2,"Editar Tienda"),e.qZA(),e.TgZ(3,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e.qZA(),e.qZA(),e.TgZ(4,"form",42),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveEvent()}),e.TgZ(5,"div",43),e.TgZ(6,"p",44),e._uU(7,"* Campo requerido"),e.qZA(),e.TgZ(8,"div",9),e.TgZ(9,"div",35),e.TgZ(10,"div",45),e.TgZ(11,"label",46),e._uU(12,"Nombre *"),e.qZA(),e._UZ(13,"input",47),e.TgZ(14,"div",48),e.YNc(15,ae,2,0,"div",49),e.YNc(16,de,2,0,"div",49),e.YNc(17,le,2,0,"div",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",9),e.TgZ(19,"div",50),e.TgZ(20,"div",45),e.TgZ(21,"label",46),e._uU(22,"Direcci\xf3n *"),e.qZA(),e._UZ(23,"input",51),e.TgZ(24,"div",48),e.YNc(25,ce,2,0,"div",49),e.YNc(26,me,2,0,"div",49),e.YNc(27,ue,2,0,"div",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",9),e.TgZ(29,"div",50),e.TgZ(30,"div",45),e.TgZ(31,"label",46),e._uU(32,"RUC *"),e.qZA(),e._UZ(33,"input",52),e.TgZ(34,"div",48),e.YNc(35,pe,2,0,"div",49),e.YNc(36,ge,2,0,"div",49),e.YNc(37,Te,2,0,"div",49),e.YNc(38,fe,2,0,"div",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",9),e.TgZ(40,"div",50),e.TgZ(41,"div",45),e.TgZ(42,"label",46),e._uU(43,"Tel\xe9fono *"),e.qZA(),e._UZ(44,"input",53),e.TgZ(45,"div",48),e.YNc(46,_e,2,0,"div",49),e.YNc(47,he,2,0,"div",49),e.YNc(48,ve,2,0,"div",49),e.YNc(49,Ze,2,0,"div",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",9),e.TgZ(51,"div",50),e.TgZ(52,"div",45),e.TgZ(53,"label",46),e._uU(54,"Logo de la Tienda"),e.qZA(),e.TgZ(55,"div",54),e.NdJ("change",function(s){return e.CHM(t),e.oxw().onSelect(s)}),e.TgZ(56,"ngx-dropzone-label"),e.TgZ(57,"div"),e._UZ(58,"i",55),e.TgZ(59,"h3"),e._uU(60,"Suelte los archivos aqu\xed "),e._UZ(61,"br"),e._uU(62,"o haga clic para cargar."),e.qZA(),e.qZA(),e.qZA(),e.YNc(63,Ae,1,2,"ngx-dropzone-image-preview",56),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",57),e.TgZ(65,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEventModal()}),e._uU(66,"Cerrar"),e.qZA(),e.TgZ(67,"button",59),e.NdJ("click",function(){return e.CHM(t),e.oxw().guardarTienda()}),e._uU(68,"Guardar"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formEditarTiendas),e.xp6(9),e.s9C("formControlName",t.nombre_tienda),e.Q6J("ngClass",e.VKq(25,v,t.formET.campoNombreTienda.invalid&&(t.formET.campoNombreTienda.dirty||t.formET.campoNombreTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formET.campoNombreTienda.errors?null:t.formET.campoNombreTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoNombreTienda.errors?null:t.formET.campoNombreTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoNombreTienda.errors?null:t.formET.campoNombreTienda.errors.maxlength),e.xp6(6),e.s9C("formControlName",t.direccion_tienda),e.Q6J("ngClass",e.VKq(27,v,t.formET.campoDireccionTienda.invalid&&(t.formET.campoDireccionTienda.dirty||t.formET.campoDireccionTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formET.campoDireccionTienda.errors?null:t.formET.campoDireccionTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoDireccionTienda.errors?null:t.formET.campoDireccionTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoDireccionTienda.errors?null:t.formET.campoDireccionTienda.errors.maxlength),e.xp6(6),e.s9C("formControlName",t.ruc_tienda),e.Q6J("ngClass",e.VKq(29,v,t.formET.campoRucTienda.invalid&&(t.formET.campoRucTienda.dirty||t.formET.campoRucTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formET.campoRucTienda.errors?null:t.formET.campoRucTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoRucTienda.errors?null:t.formET.campoRucTienda.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoRucTienda.errors?null:t.formET.campoRucTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoRucTienda.errors?null:t.formET.campoRucTienda.errors.maxlength),e.xp6(6),e.s9C("formControlName",t.telefono_tienda),e.Q6J("ngClass",e.VKq(31,v,t.formET.campoTelefonoTienda.invalid&&(t.formET.campoTelefonoTienda.dirty||t.formET.campoTelefonoTienda.touched))),e.xp6(2),e.Q6J("ngIf",null==t.formET.campoTelefonoTienda.errors?null:t.formET.campoTelefonoTienda.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoTelefonoTienda.errors?null:t.formET.campoTelefonoTienda.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoTelefonoTienda.errors?null:t.formET.campoTelefonoTienda.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.formET.campoTelefonoTienda.errors?null:t.formET.campoTelefonoTienda.errors.maxlength),e.xp6(6),e.Q6J("accept","image/*"),e.xp6(8),e.Q6J("ngForOf",t.files)}}const Ce=[{path:"addstore",component:G,data:{role:["Admin"]},canActivate:[q.a]},{path:"liststores",component:(()=>{class o{constructor(t,i,s,d){this.service=t,this.modalService=i,this.sedeService=s,this.fb=d,this.submitted=!1,this.nombre_tienda="campoNombreTienda",this.direccion_tienda="campoDireccionTienda",this.telefono_tienda="campoTelefonoTienda",this.ruc_tienda="campoRucTienda",this.color_tienda="campoColorTienda",this.numberPattern="^[0-9]+$|^S*$",this.mostrar=!1,this.files=[],this.listSedes=[],this.sede=new C.t,this.searchSedes=[],this.editLogoSede=""}ngOnInit(){this.breadCrumbItems=[{label:"Tiendas"},{label:"Lista de Tiendas",active:!0}],this.getListSedes()}searchFilter(t){const i=t.target.value;this.searchSedes=this.listSedes.filter(s=>-1!==s.nombre_sede.toLowerCase().search(i.toLowerCase()))}getListSedes(){this.sedeService.getSedes().subscribe(t=>{this.listSedes=t,this.searchSedes=Object.assign([],this.listSedes),this.mostrar=!0})}crearFormulario(){this.formEditarTiendas=this.fb.group({[this.nombre_tienda]:[null,[n.kI.required,n.kI.minLength(3),n.kI.maxLength(40)]],[this.direccion_tienda]:[null,[n.kI.required,n.kI.minLength(3),n.kI.maxLength(60)]],[this.telefono_tienda]:[null,[n.kI.required,n.kI.pattern(this.numberPattern),n.kI.minLength(6),n.kI.maxLength(9)]],[this.ruc_tienda]:[null,[n.kI.required,n.kI.pattern(this.numberPattern),n.kI.minLength(8),n.kI.maxLength(11)]],[this.color_tienda]:[]})}get formET(){return this.formEditarTiendas.controls}OpenModalEditStore(t,i){this.crearFormulario(),this.f(this.nombre_tienda).setValue(i.nombre_sede),this.f(this.direccion_tienda).setValue(i.direccion),this.f(this.ruc_tienda).setValue(i.ruc),this.f(this.telefono_tienda).setValue(i.telefono),this.sede.id_sede=i.id_sede,this.editLogoSede=i.logoURL,this.editlogoDOWNLOAD=i.logoDOWNLOAD,this.modalService.open(t,{centered:!0,windowClass:"modal-holder"})}closeEventModal(){this.modalService.dismissAll()}saveEvent(){this.submitted=!0}f(t){return this.formEditarTiendas.get(t)}guardarTienda(){if(this.formEditarTiendas.valid){this.sede.direccion=this.f(this.direccion_tienda).value,this.sede.nombre_sede=this.f(this.nombre_tienda).value,this.sede.fecha_modificacion_sede=new Date(Date.now()),this.sede.ruc=this.f(this.ruc_tienda).value,this.sede.telefono=this.f(this.telefono_tienda).value,this.sede.color="",(0,c.H)("loading","Cargando...");let t=new FormData;0!=this.files.length?(t.append("photo",this.files[0],this.files[0].name),this.sedeService.saveImageBackend(t).subscribe(i=>{this.sede.logoURL=i.logoURL,this.sede.logoDOWNLOAD=i.logoDOWNLOAD,this.sedeService.editSede(this.sede).subscribe(s=>{this.files=[],this.getListSedesJSON(),this.modalService.dismissAll(),(0,c.H)("close",null),(0,c.H)("success","Tienda actualizada"),this.formEditarTiendas.reset()})})):(this.sede.logoURL=this.editLogoSede,this.sede.logoDOWNLOAD=this.editlogoDOWNLOAD,this.sedeService.editSede(this.sede).subscribe(i=>{this.files=[],this.getListSedesJSON(),this.modalService.dismissAll(),(0,c.H)("close",null),(0,c.H)("success","Tienda actualizada"),this.formEditarTiendas.reset(),this.getListSedes()}))}}getListSedesJSON(){this.sedeService.getSedes().subscribe(t=>{localStorage.setItem("sedes",JSON.stringify(t))})}updateListStores(){this.sedeService.getSedes().subscribe(t=>{this.service.updateTable(t)})}onSelect(t){this.files.push(...t.addedFiles),this.files.length>1&&(this.files=[])}onRemove(t){this.files.splice(this.files.indexOf(t),1)}elimninarVenta(t){const i=U().mixin({customClass:{cancelButton:"btn btn-danger ms-2",confirmButton:"btn btn-success"},buttonsStyling:!1});i.fire({title:"\xbfEst\xe1 seguro de eliminar la sede?",html:"\xa1No se podr\xe1 revertir esto! <br> Se eliminar\xe1 los productos (accesorios, monturas, lunas), ventas, usuarios, caja",icon:"warning",cancelButtonText:"No, cancelar!",confirmButtonText:"Si, Eliminar!",showCancelButton:!0}).then(s=>{s.value||s.dismiss===U().DismissReason.cancel&&i.fire("Cancelado","La eliminaci\xf3n no se ha realizado","error")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E),e.Y36(u.FF),e.Y36(A.Z),e.Y36(n.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-list-stores"]],features:[e._Bn([E,l.JJ])],decls:14,vars:3,consts:[[1,"container-fluid"],["title","Tiendas",3,"breadcrumbItems"],[1,"row","mb-2"],[1,"col-md-4"],[1,"form-inline","mb-3"],[1,"search-box","ml-2"],[1,"position-relative"],["type","text","placeholder","Buscar tienda","name","searchTerm","aria-controls","tickets-table",1,"form-control","rounded","border-0",3,"input"],[1,"mdi","mdi-magnify","search-icon"],[1,"row"],["class","col-xl-6",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["DataModalEditStore",""],[1,"col-xl-6"],[1,"card","border"],[1,"card-body"],[1,"d-flex","align-items-start","border-bottom","pb-3"],[1,"avatar-md","me-4"],[1,"avatar-title","bg-soft-primary","rounded-circle","text-primary"],[1,"mdi","mdi-home-city","display-6","m-0","text-primary"],[1,"flex-1","align-self-center","overflow-hidden"],[1,"text-truncate","font-size-16"],["routerLink","/ecommerce/product-detail/1",1,"text-dark"],[1,"mb-1"],[1,"fw-medium"],[1,"ms-2"],[1,"list-inline","mb-0","font-size-16"],["data-toggle","tooltip","data-placement","top","title","Editar",1,"list-inline-item"],[1,"text-muted","px-2",3,"click"],[1,"uil","uil-edit-alt"],["data-toggle","tooltip","data-placement","top","title","Eliminar",1,"list-inline-item"],[1,"uil","uil-trash-alt"],[1,"mt-3"],[1,"text-muted","mb-2"],[1,"font-size-16"],[1,"col-12"],[1,"text-center","my-3"],["href","javascript:void(0);",1,"text-primary"],[1,"mdi","mdi-loading","mdi-spin","font-size-20","align-middle","me-2"],[1,"modal-header"],[1,"modal-title","mt-0"],["type","button",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"card-title-desc","text-danger"],[1,"mb-3"],["for","validationCustom01"],["placeholder","Nombre de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"invalid-feedback"],[4,"ngIf"],[1,"col-12","col-sm-12"],["placeholder","Direcci\xf3n de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","RUC de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Tel\xe9fono de la tienda","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["ngx-dropzone","",1,"custom-dropzone",3,"accept","change"],[1,"display-4","text-muted","uil","uil-cloud-upload"],["ngProjectAs","ngx-dropzone-preview","accept","'image/jpeg,image/jpg,image/png'",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","id","btn-save-event",1,"btn","btn-success","ms-1",3,"click"],["ngProjectAs","ngx-dropzone-preview","accept","'image/jpeg,image/jpg,image/png'",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"input",7),e.NdJ("input",function(d){return i.searchFilter(d)}),e.qZA(),e._UZ(8,"i",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e.YNc(10,ne,45,8,"div",10),e.qZA(),e.YNc(11,se,6,0,"div",11),e.qZA(),e.YNc(12,be,69,33,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(1),e.Q6J("breadcrumbItems",i.breadCrumbItems),e.xp6(9),e.Q6J("ngForOf",i.searchSedes),e.xp6(1),e.Q6J("ngIf",!i.mostrar))},directives:[S.V,l.sg,l.O5,Z.yS,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,l.mk,p._f,p.NP,p.sv],pipes:[l.uU],styles:[""]}),o})(),data:{role:["Admin"]},canActivate:[q.a]}];let Se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(Ce)],Z.Bz]}),o})(),xe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:b._t,useValue:Q.v}],imports:[[Se,l.ez,n.UX,n.u5,y.h,u.XC,b.Ti,w.v,D.bt,J.A0,u.jF,u.HK,u.Gs,u.ZS,u.lQ,p.bB]]}),o})()},16550:(I,T,a)=>{a.d(T,{t:()=>l});class l{}}}]);