(self.webpackChunkminible_ng=self.webpackChunkminible_ng||[]).push([[468],{7082:function(F,A){!function(s){"use strict";var g="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},l={weekdays:{shorthand:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],longhand:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"]},months:{shorthand:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],longhand:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},ordinal:function(){return"\xba"},firstDayOfWeek:1,rangeSeparator:" a ",time_24hr:!0};g.l10ns.es=l;var c=g.l10ns;s.Spanish=l,s.default=c,Object.defineProperty(s,"__esModule",{value:!0})}(A)},69468:(F,A,s)=>{"use strict";s.r(A),s.d(A,{SaleModule:()=>ge});var g=s(86019),l=s(49133),c=s(72344),T=s(40345),H=s(98816),q=s(16541),x=s(41867),E=s(5426),R=s(63091),S=s(56225),D=s(64762),p=s(34099),U=s(23405),N=s(22411);const $=[{index:1,id:"#MN0123",tipo:"Montura",detalle:"ACETATO KEVIN",cantidad:"3",precio:"33.00",total:"37.00"},{index:2,id:"#MN0122",tipo:"Montura",detalle:"ACETATO BEIKUBEI",cantidad:"4",precio:"18.00",total:"86.00"},{index:3,id:"#MN0121",tipo:"Montura",detalle:"ACETATO VIPSUAL",cantidad:"2",precio:"73.90",total:"26.00"},{index:4,id:"#MN0120",tipo:"Montura",detalle:"CAREY\tCOLOR WISE",cantidad:"1",precio:"84.00",total:"83.00"},{index:5,id:"#MN0119",tipo:"Montura",detalle:"ACETATO FIORALBA",cantidad:"5",precio:"62.00",total:"38.00"}];var C=s(81366),y=s(65686),J=s(79204),M=s(5250),t=s(83668);let w=(()=>{class o{constructor(e){this.pipe=e,this._loading$=new p.X(!0),this._search$=new U.xQ,this._Addsales$=new p.X([]),this._total$=new p.X(0),this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:""},this._search$.pipe((0,C.b)(()=>this._loading$.next(!0)),(0,y.b)(200),(0,J.w)(()=>this._search()),(0,M.g)(200),(0,C.b)(()=>this._loading$.next(!1))).subscribe(a=>{this._Addsales$.next(a.Addsales),this._total$.next(a.total)}),this._search$.next()}get Addsales$(){return this._Addsales$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}set page(e){this._set({page:e})}set pageSize(e){this._set({pageSize:e})}set searchTerm(e){this._set({searchTerm:e})}set sortColumn(e){this._set({sortColumn:e})}set sortDirection(e){this._set({sortDirection:e})}_set(e){Object.assign(this._state,e),this._search$.next()}_search(){const{sortColumn:e,sortDirection:a,pageSize:i,page:r,searchTerm:d}=this._state;let u=function(o,n,e){return""===e||""===n?o:[...o].sort((a,i)=>{const r=((o,n)=>o<n?-1:o>n?1:0)(a[n],i[n]);return"asc"===e?r:-r})}($,e,a);u=u.filter(f=>function(o,n,e){return o.id.toLowerCase().includes(n)||o.detalle.toLowerCase().includes(n.toLowerCase())||o.cantidad.toLowerCase().includes(n)||o.precio.toLowerCase().includes(n)||o.total.toLowerCase().includes(n)}(f,d));const h=u.length;return u=u.slice((r-1)*i,(r-1)*i+i),(0,N.of)({Addsales:u,total:h})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.JJ))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const G={asc:"desc",desc:"","":"asc"};let j=(()=>{class o{constructor(){this.sortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=G[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(e,a){1&e&&t.NdJ("click",function(){return a.rotate()}),2&e&&t.ekj("asc","asc"===a.direction)("desc","desc"===a.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}}),o})();class K{constructor(){this.list_monturas=[],this.list_lunas=[],this.list_accesorios=[],this.tipo_venta=[]}}class W{}var X=s(1659),Z=s.n(X),m=s(63782),tt=s(54900),z=s.n(tt),et=s(52653),P=s(4680),ot=s(91917),it=s(95686),at=s(20566),V=s(11950),Q=s(94774);const nt=["autocomplete"];function rt(o,n){1&o&&t._UZ(0,"a",27),2&o&&t.Q6J("innerHTML",n.$implicit.codigo_interno,t.oJD)}function st(o,n){1&o&&t._UZ(0,"div",27),2&o&&t.Q6J("innerHTML",n.$implicit,t.oJD)}function lt(o,n){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngb-highlight",28),t._uU(2,"\xa0 "),t._UZ(3,"ngb-highlight",28),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("result",e.material),t.xp6(2),t.Q6J("result",e.marca)}}function dt(o,n){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngb-highlight",28),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("result",e.material)}}function ct(o,n){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngb-highlight",28),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("result",e.nombre_accesorio)}}function ut(o,n){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngb-highlight",28),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("result",e.precio_montura_v)}}function gt(o,n){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngb-highlight",28),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("result",e.precio_luna_v)}}function mt(o,n){if(1&o&&(t.TgZ(0,"td"),t._UZ(1,"ngb-highlight",28),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("result",e.precio_accesorio_v)}}function _t(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._UZ(2,"ngb-highlight",28),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"ngb-highlight",28),t.qZA(),t.YNc(5,lt,4,2,"td",29),t.YNc(6,dt,2,1,"td",29),t.YNc(7,ct,2,1,"td",29),t.TgZ(8,"td"),t._UZ(9,"ngb-highlight",28),t.qZA(),t.YNc(10,ut,2,1,"td",29),t.YNc(11,gt,2,1,"td",29),t.YNc(12,mt,2,1,"td",29),t.TgZ(13,"td"),t._UZ(14,"ngb-highlight",28),t.qZA(),t.TgZ(15,"td"),t.TgZ(16,"a",30),t.TgZ(17,"i",31),t.NdJ("click",function(i){const d=t.CHM(e).index;return t.oxw().substractQuantityProduct(i,d)}),t.qZA(),t.qZA(),t.TgZ(18,"a",32),t.TgZ(19,"i",33),t.NdJ("ngModelChange",function(i){return t.CHM(e).$implicit.num=i})("click",function(i){const d=t.CHM(e).index;return t.oxw().addQuantityProduct(i,d)}),t.qZA(),t.qZA(),t.TgZ(20,"a",34),t._UZ(21,"i",35),t.qZA(),t.TgZ(22,"a",36),t.TgZ(23,"i",37),t.NdJ("click",function(i){const d=t.CHM(e).index;return t.oxw().removeCartProduct(i,d)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.Q6J("result",a+1),t.xp6(2),t.Q6J("result",e.tipo),t.xp6(1),t.Q6J("ngIf","montura"==e.tipo),t.xp6(1),t.Q6J("ngIf","luna"==e.tipo),t.xp6(1),t.Q6J("ngIf","accesorio"==e.tipo),t.xp6(2),t.Q6J("result",e.cant_vendida),t.xp6(1),t.Q6J("ngIf","montura"==e.tipo),t.xp6(1),t.Q6J("ngIf","luna"==e.tipo),t.xp6(1),t.Q6J("ngIf","accesorio"==e.tipo),t.xp6(2),t.Q6J("result",e.precio),t.xp6(5),t.Q6J("ngModel",e.num)}}function pt(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"This value is required."),t.qZA())}function Zt(o,n){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,pt,2,0,"span",29),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.title.errors.required)}}function ht(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"This value is required."),t.qZA())}function ft(o,n){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,ht,2,0,"span",29),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.title.errors.required)}}const _=function(o){return{"is-invalid":o}};function At(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",38),t.TgZ(1,"h5",39),t._uU(2,"Cambio de Precio"),t.qZA(),t.TgZ(3,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeEventModal()}),t.qZA(),t.qZA(),t.TgZ(4,"div",41),t.TgZ(5,"form",42),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().saveEvent()}),t.TgZ(6,"div",5),t.TgZ(7,"div",43),t.TgZ(8,"div",44),t.TgZ(9,"label",45),t._uU(10,"Precio Original"),t.qZA(),t._UZ(11,"input",46),t.YNc(12,Zt,2,1,"div",47),t.qZA(),t.qZA(),t.TgZ(13,"div",43),t.TgZ(14,"div",44),t.TgZ(15,"label",45),t._uU(16,"Fecha de Cambio"),t.qZA(),t._UZ(17,"input",48),t.YNc(18,ft,2,1,"div",47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",5),t.TgZ(20,"div",49),t.TgZ(21,"div",44),t.TgZ(22,"label",45),t._uU(23,"Nuevo Precio de Venta"),t.qZA(),t._UZ(24,"input",50),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",21),t.TgZ(26,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeEventModal()}),t._uU(27," Cerrar "),t.qZA(),t.TgZ(28,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeEventModal()}),t._uU(29," Guardar "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("formGroup",e.formEditar),t.xp6(6),t.s9C("formControlName",e.precioOriginal_Editar),t.Q6J("ngClass",t.VKq(9,_,e.submitted&&e.form.title.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.form.title.errors),t.xp6(5),t.s9C("formControlName",e.fechaCambio_Editar),t.Q6J("ngClass",t.VKq(11,_,e.submitted&&e.form.title.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.form.title.errors),t.xp6(6),t.s9C("formControlName",e.nuevoPrecio_Editar),t.Q6J("ngClass",t.VKq(13,_,e.submitted&&e.form.title.errors))}}function Ct(o,n){1&o&&(t.TgZ(0,"div",81),t._uU(1," Campo requerido "),t.qZA())}function vt(o,n){1&o&&(t.TgZ(0,"div",81),t._uU(1," Ingrese como m\xe1ximo 2 decimales "),t.qZA())}function Tt(o,n){if(1&o&&(t.TgZ(0,"div",81),t.YNc(1,Ct,2,0,"div",68),t.YNc(2,vt,2,0,"div",68),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.formContado.controls.campoCantidadRecibidaContado.errors.required),t.xp6(1),t.Q6J("ngIf",e.formContado.controls.campoCantidadRecibidaContado.errors.pattern)}}function bt(o,n){1&o&&(t.TgZ(0,"div",81),t._uU(1," Campo requerido "),t.qZA())}function qt(o,n){if(1&o&&(t.TgZ(0,"div",81),t.YNc(1,bt,2,0,"div",68),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.formContado.controls.campoMetodoPagoContado.errors.required)}}function xt(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"This value is required."),t.qZA())}function St(o,n){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,xt,2,0,"span",29),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.title.errors.required)}}function Ut(o,n){1&o&&t._UZ(0,"a",27),2&o&&t.Q6J("innerHTML",n.$implicit.nombres_apellidos,t.oJD)}function Nt(o,n){1&o&&t._UZ(0,"div",27),2&o&&t.Q6J("innerHTML",n.$implicit,t.oJD)}function yt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",42),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw(2).saveEvent()}),t.TgZ(1,"div",65),t.TgZ(2,"div",66),t.TgZ(3,"div",44),t.TgZ(4,"label",45),t._uU(5,"Cantidad Recibida"),t.qZA(),t.TgZ(6,"input",67),t.NdJ("change",function(i){return t.CHM(e),t.oxw(2).updatePago(i)}),t.qZA(),t.YNc(7,Tt,3,2,"div",68),t.qZA(),t.qZA(),t.TgZ(8,"div",66),t.TgZ(9,"div",44),t.TgZ(10,"label",69),t._uU(11,"M\xe9todo"),t.qZA(),t._UZ(12,"ng-select",70),t.YNc(13,qt,2,1,"div",68),t.qZA(),t.qZA(),t.TgZ(14,"div",66),t.TgZ(15,"div",44),t.TgZ(16,"label",45),t._uU(17,"Fecha"),t.qZA(),t._UZ(18,"input",71),t.YNc(19,St,2,1,"div",47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",5),t.TgZ(21,"div",49),t.TgZ(22,"div",44),t.TgZ(23,"label",45),t._uU(24,"Buscar Cliente"),t.qZA(),t.TgZ(25,"ng-autocomplete",72),t.NdJ("selected",function(i){return t.CHM(e),t.oxw(2).selectEventCliente(i)}),t.qZA(),t.YNc(26,Ut,1,1,"ng-template",null,73,t.W1O),t.YNc(28,Nt,1,1,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",5),t.TgZ(31,"div",49),t.TgZ(32,"label",74),t._uU(33,"Montos:"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",5),t.TgZ(35,"div",66),t.TgZ(36,"div",44),t.TgZ(37,"label",45),t._uU(38,"Total"),t.qZA(),t._UZ(39,"input",75),t.qZA(),t.qZA(),t.TgZ(40,"div",66),t.TgZ(41,"div",44),t.TgZ(42,"label",45),t._uU(43,"Pago"),t.qZA(),t._UZ(44,"input",76),t.qZA(),t.qZA(),t.TgZ(45,"div",66),t.TgZ(46,"div",44),t.TgZ(47,"label",45),t._uU(48,"Cambio"),t.qZA(),t._UZ(49,"input",77),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",5),t.TgZ(51,"div",12),t.TgZ(52,"div",78),t.TgZ(53,"label",79),t._uU(54,"Observaciones"),t.qZA(),t._UZ(55,"textarea",80),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"div",21),t.TgZ(57,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeEventModal()}),t._uU(58," Cerrar "),t.qZA(),t.TgZ(59,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).guardarVenta()}),t._uU(60," Registrar Venta "),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(27),a=t.MAs(29),i=t.oxw(2);t.Q6J("formGroup",i.formContado),t.xp6(6),t.s9C("formControlName",i.cantidadRecibida_Contado),t.xp6(1),t.Q6J("ngIf",i.formContado.controls.campoCantidadRecibidaContado.invalid&&(i.formContado.controls.campoCantidadRecibidaContado.dirty||i.formContado.controls.campoCantidadRecibidaContado.touched)),t.xp6(5),t.s9C("formControlName",i.metodoPagoContado),t.Q6J("items",i.listMetodosPagos),t.xp6(1),t.Q6J("ngIf",i.formContado.controls.campoMetodoPagoContado.invalid&&(i.formContado.controls.campoMetodoPagoContado.dirty||i.formContado.controls.campoMetodoPagoContado.touched)),t.xp6(5),t.s9C("formControlName",i.fechaVenta_Contado),t.Q6J("ngClass",t.VKq(22,_,i.submitted&&i.form.title.errors)),t.xp6(1),t.Q6J("ngIf",i.submitted&&i.form.title.errors),t.xp6(6),t.s9C("formControlName",i.nombreContado),t.Q6J("data",i.listClients)("searchKeyword",i.keywordCliente)("itemTemplate",e)("notFoundTemplate",a),t.xp6(14),t.s9C("formControlName",i.precioTotal_Contado),t.Q6J("ngClass",t.VKq(24,_,i.submitted&&i.form.title.errors)),t.xp6(5),t.s9C("formControlName",i.pago_Contado),t.Q6J("ngClass",t.VKq(26,_,i.submitted&&i.form.title.errors)),t.xp6(5),t.s9C("formControlName",i.cambio_Contado),t.Q6J("ngClass",t.VKq(28,_,i.submitted&&i.form.title.errors)),t.xp6(6),t.s9C("formControlName",i.observaciones_Contado),t.xp6(4),t.Q6J("disabled",!i.formContado.valid)}}function Jt(o,n){1&o&&(t.TgZ(0,"div",81),t._uU(1," Campo requerido "),t.qZA())}function Mt(o,n){1&o&&(t.TgZ(0,"div",81),t._uU(1," Ingrese como m\xe1ximo 2 decimales "),t.qZA())}function wt(o,n){if(1&o&&(t.TgZ(0,"div",81),t.YNc(1,Jt,2,0,"div",68),t.YNc(2,Mt,2,0,"div",68),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.formCredito.controls.campoCantidadRecibidaCredito.errors.required),t.xp6(1),t.Q6J("ngIf",e.formCredito.controls.campoCantidadRecibidaCredito.errors.pattern)}}function zt(o,n){1&o&&(t.TgZ(0,"div",81),t._uU(1," Campo requerido "),t.qZA())}function Pt(o,n){if(1&o&&(t.TgZ(0,"div",81),t.YNc(1,zt,2,0,"div",68),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.formCredito.controls.campoMetodoPagoCredito.errors.required)}}function Vt(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"This value is required."),t.qZA())}function Qt(o,n){if(1&o&&(t.TgZ(0,"div",53),t.YNc(1,Vt,2,0,"span",29),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.title.errors.required)}}function kt(o,n){1&o&&t._UZ(0,"a",27),2&o&&t.Q6J("innerHTML",n.$implicit.nombres_apellidos,t.oJD)}function It(o,n){1&o&&t._UZ(0,"div",27),2&o&&t.Q6J("innerHTML",n.$implicit,t.oJD)}function Lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",42),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw(2).saveEvent()}),t.TgZ(1,"div",65),t.TgZ(2,"div",66),t.TgZ(3,"div",44),t.TgZ(4,"label",45),t._uU(5,"Cantidad Recibida"),t.qZA(),t.TgZ(6,"input",82),t.NdJ("change",function(i){return t.CHM(e),t.oxw(2).updatePago(i)}),t.qZA(),t.YNc(7,wt,3,2,"div",68),t.qZA(),t.qZA(),t.TgZ(8,"div",66),t.TgZ(9,"div",44),t.TgZ(10,"label",69),t._uU(11,"M\xe9todo"),t.qZA(),t._UZ(12,"ng-select",70),t.YNc(13,Pt,2,1,"div",68),t.qZA(),t.qZA(),t.TgZ(14,"div",66),t.TgZ(15,"div",44),t.TgZ(16,"label",45),t._uU(17,"Fecha"),t.qZA(),t._UZ(18,"input",83),t.YNc(19,Qt,2,1,"div",47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",5),t.TgZ(21,"div",49),t.TgZ(22,"div",44),t.TgZ(23,"label",45),t._uU(24,"N\xfamero de Cuotas"),t.qZA(),t.TgZ(25,"div",84),t.TgZ(26,"ng5-slider",85),t.NdJ("valueChange",function(i){return t.CHM(e),t.oxw(2).tickValue=i}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",5),t.TgZ(28,"div",49),t.TgZ(29,"div",44),t.TgZ(30,"label",45),t._uU(31,"Buscar o Crear nuevo Cliente"),t.qZA(),t.TgZ(32,"ng-autocomplete",86),t.NdJ("selected",function(i){return t.CHM(e),t.oxw(2).selectEventCliente(i)}),t.qZA(),t.YNc(33,kt,1,1,"ng-template",null,87,t.W1O),t.YNc(35,It,1,1,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",5),t.TgZ(38,"div",49),t.TgZ(39,"label",74),t._uU(40,"Montos:"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",5),t.TgZ(42,"div",66),t.TgZ(43,"div",44),t.TgZ(44,"label",45),t._uU(45,"Total"),t.qZA(),t._UZ(46,"input",88),t.qZA(),t.qZA(),t.TgZ(47,"div",66),t.TgZ(48,"div",44),t.TgZ(49,"label",45),t._uU(50,"Pago"),t.qZA(),t._UZ(51,"input",89),t.qZA(),t.qZA(),t.TgZ(52,"div",66),t.TgZ(53,"div",44),t.TgZ(54,"label",45),t._uU(55,"Cambio"),t.qZA(),t._UZ(56,"input",90),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",5),t.TgZ(58,"div",12),t.TgZ(59,"div",78),t.TgZ(60,"label",79),t._uU(61,"Observaciones"),t.qZA(),t._UZ(62,"textarea",80),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",21),t.TgZ(64,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeEventModal()}),t._uU(65," Cerrar "),t.qZA(),t.TgZ(66,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).guardarVenta()}),t._uU(67," Registrar Venta "),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(34),a=t.MAs(36),i=t.oxw(2);t.Q6J("formGroup",i.formCredito),t.xp6(6),t.s9C("formControlName",i.cantidadRecibida_Credito),t.xp6(1),t.Q6J("ngIf",i.formCredito.controls.campoCantidadRecibidaCredito.invalid&&(i.formCredito.controls.campoCantidadRecibidaCredito.dirty||i.formCredito.controls.campoCantidadRecibidaCredito.touched)),t.xp6(5),t.s9C("formControlName",i.metodoPagoCredito),t.Q6J("items",i.listMetodosPagos),t.xp6(1),t.Q6J("ngIf",i.formCredito.controls.campoMetodoPagoCredito.invalid&&(i.formCredito.controls.campoMetodoPagoCredito.dirty||i.formCredito.controls.campoMetodoPagoCredito.touched)),t.xp6(5),t.s9C("formControlName",i.fechaVenta_Credito),t.Q6J("ngClass",t.VKq(24,_,i.submitted&&i.form.title.errors)),t.xp6(1),t.Q6J("ngIf",i.submitted&&i.form.title.errors),t.xp6(7),t.Q6J("value",i.tickValue)("options",i.tickValueoptions),t.xp6(6),t.s9C("formControlName",i.nombreCredito),t.Q6J("data",i.listClients)("searchKeyword",i.keywordCliente)("itemTemplate",e)("notFoundTemplate",a),t.xp6(14),t.s9C("formControlName",i.precioTotal_Credito),t.Q6J("ngClass",t.VKq(26,_,i.submitted&&i.form.title.errors)),t.xp6(5),t.s9C("formControlName",i.pago_Credito),t.Q6J("ngClass",t.VKq(28,_,i.submitted&&i.form.title.errors)),t.xp6(5),t.s9C("formControlName",i.cambio_Credito),t.Q6J("ngClass",t.VKq(30,_,i.submitted&&i.form.title.errors)),t.xp6(6),t.s9C("formControlName",i.observaciones_Credito),t.xp6(4),t.Q6J("disabled",!i.formCredito.valid)}}function Ft(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",38),t.TgZ(1,"h5",39),t._uU(2,"Registrar Venta"),t.qZA(),t.TgZ(3,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeEventModal()}),t.qZA(),t.qZA(),t.TgZ(4,"div",41),t.TgZ(5,"div",54),t.TgZ(6,"ul",55,56),t.NdJ("navChange",function(i){return t.CHM(e),t.oxw().selectorMetodoPago(i)}),t.TgZ(8,"li",57),t.TgZ(9,"a",58),t.TgZ(10,"span",59),t._UZ(11,"i",60),t.qZA(),t.TgZ(12,"span",61),t._uU(13,"Al Contado"),t.qZA(),t.qZA(),t.YNc(14,yt,61,30,"ng-template",62),t.qZA(),t.TgZ(15,"li",57),t.TgZ(16,"a",58),t.TgZ(17,"span",59),t._UZ(18,"i",63),t.qZA(),t.TgZ(19,"span",61),t._uU(20,"Al Cr\xe9dito"),t.qZA(),t.qZA(),t.YNc(21,Lt,68,32,"ng-template",62),t.qZA(),t.qZA(),t._UZ(22,"div",64),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(7),a=t.oxw();t.xp6(6),t.Q6J("activeId",a.activePago),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(7),t.Q6J("ngbNavItem",2),t.xp6(7),t.Q6J("ngbNavOutlet",e)}}function Ht(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",38),t.TgZ(1,"h5",91),t._uU(2,"Factura de Venta"),t.qZA(),t.TgZ(3,"button",92),t.NdJ("click",function(){return t.CHM(e).$implicit.dismiss("Cross click")}),t.qZA(),t.qZA(),t.TgZ(4,"div",93),t.TgZ(5,"div",5),t.TgZ(6,"div",12),t.TgZ(7,"div",13),t.TgZ(8,"div",14),t.TgZ(9,"div",94),t.TgZ(10,"h4",95),t._uU(11,"Factura #MN0131 "),t.TgZ(12,"span",96),t._uU(13,"Paid"),t.qZA(),t.qZA(),t.TgZ(14,"div",78),t._UZ(15,"img",97),t.qZA(),t.TgZ(16,"div",98),t.TgZ(17,"p",99),t._UZ(18,"i",100),t._uU(19,"641 Counts Lane Wilmore, KY 40390"),t.qZA(),t.TgZ(20,"p",99),t._UZ(21,"i",101),t._uU(22," abc@123.com"),t.qZA(),t.TgZ(23,"p"),t._UZ(24,"i",102),t._uU(25," 012-345-6789"),t.qZA(),t.qZA(),t.qZA(),t._UZ(26,"hr",103),t.TgZ(27,"div",5),t.TgZ(28,"div",104),t.TgZ(29,"div",98),t.TgZ(30,"h5",105),t._uU(31,"Facturado a:"),t.qZA(),t.TgZ(32,"h5",106),t._uU(33,"Preston Miller"),t.qZA(),t.TgZ(34,"p",99),t._uU(35,"4450 Fancher Drive Dallas, TX 75247"),t.qZA(),t.TgZ(36,"p",99),t._uU(37,"PrestonMiller@armyspy.com"),t.qZA(),t.TgZ(38,"p"),t._uU(39,"001-234-5678"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",104),t.TgZ(41,"div",107),t.TgZ(42,"div"),t.TgZ(43,"h5",108),t._uU(44,"N\xba de Factura:"),t.qZA(),t.TgZ(45,"p"),t._uU(46,"#MN0131"),t.qZA(),t.qZA(),t.TgZ(47,"div",109),t.TgZ(48,"h5",108),t._uU(49,"Fecha de la Factura:"),t.qZA(),t.TgZ(50,"p"),t._uU(51,"09 Jul, 2020"),t.qZA(),t.qZA(),t.TgZ(52,"div",109),t.TgZ(53,"h5",108),t._uU(54,"N\xba de pedido:"),t.qZA(),t.TgZ(55,"p"),t._uU(56,"#1123456"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",110),t.TgZ(58,"h5",111),t._uU(59,"Resumen del Pedido"),t.qZA(),t.TgZ(60,"div",16),t.TgZ(61,"table",112),t.TgZ(62,"thead"),t.TgZ(63,"tr"),t.TgZ(64,"th",113),t._uU(65,"No."),t.qZA(),t.TgZ(66,"th"),t._uU(67,"Detalle"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Precio"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Cantidad"),t.qZA(),t.TgZ(72,"th",114),t._uU(73,"Total"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(74,"tbody"),t.TgZ(75,"tr"),t.TgZ(76,"th",115),t._uU(77,"01"),t.qZA(),t.TgZ(78,"td"),t.TgZ(79,"h5",116),t._uU(80,"Nike N012 Running Shoes"),t.qZA(),t.TgZ(81,"ul",117),t.TgZ(82,"li",118),t._uU(83,"Color : "),t.TgZ(84,"span",119),t._uU(85,"Gray"),t.qZA(),t.qZA(),t.TgZ(86,"li",118),t._uU(87,"Size : "),t.TgZ(88,"span",119),t._uU(89,"08"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"td"),t._uU(91,"$260"),t.qZA(),t.TgZ(92,"td"),t._uU(93,"1"),t.qZA(),t.TgZ(94,"td",120),t._uU(95,"PEN 260.00"),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"th",115),t._uU(98,"02"),t.qZA(),t.TgZ(99,"td"),t.TgZ(100,"h5",116),t._uU(101,"Adidas Running Shoes"),t.qZA(),t.TgZ(102,"ul",117),t.TgZ(103,"li",118),t._uU(104,"Color : "),t.TgZ(105,"span",119),t._uU(106,"Black"),t.qZA(),t.qZA(),t.TgZ(107,"li",118),t._uU(108,"Size : "),t.TgZ(109,"span",119),t._uU(110,"09"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"td"),t._uU(112,"$250"),t.qZA(),t.TgZ(113,"td"),t._uU(114,"1"),t.qZA(),t.TgZ(115,"td",120),t._uU(116,"PEN 250.00"),t.qZA(),t.qZA(),t.TgZ(117,"tr"),t.TgZ(118,"th",121),t._uU(119,"Sub Total"),t.qZA(),t.TgZ(120,"td",120),t._uU(121,"PEN 510.00"),t.qZA(),t.qZA(),t.TgZ(122,"tr"),t.TgZ(123,"th",122),t._uU(124," Descuento :"),t.qZA(),t.TgZ(125,"td",123),t._uU(126,"- PEN 50.00"),t.qZA(),t.qZA(),t.TgZ(127,"tr"),t.TgZ(128,"th",122),t._uU(129," Costo de env\xedo :"),t.qZA(),t.TgZ(130,"td",123),t._uU(131,"PEN 25.00"),t.qZA(),t.qZA(),t.TgZ(132,"tr"),t.TgZ(133,"th",122),t._uU(134," Impuesto (IGV)"),t.qZA(),t.TgZ(135,"td",123),t._uU(136,"PEN 13.00"),t.qZA(),t.qZA(),t.TgZ(137,"tr"),t.TgZ(138,"th",122),t._uU(139,"Total"),t.qZA(),t.TgZ(140,"td",123),t.TgZ(141,"h4",124),t._uU(142,"PEN 498.00"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(143,"div",125),t.TgZ(144,"a",126),t._UZ(145,"i",127),t.qZA(),t.TgZ(146,"a",128),t._UZ(147,"i",129),t.qZA(),t.TgZ(148,"button",130),t.NdJ("click",function(){return t.CHM(e).$implicit.close("Close click")}),t._uU(149,"Cerrar"),t.qZA(),t.TgZ(150,"button",131),t._uU(151,"Guardar cambios"),t.qZA(),t.qZA()}}z().vfs=et.I.vfs;let Et=(()=>{class o{constructor(e,a,i,r,d,u){this.service=e,this.fb=a,this.modalService=i,this.productosService=r,this.customerService=d,this.usuarioService=u,this.submitted_Contado=!1,this.cantidadRecibida_Contado="campoCantidadRecibidaContado",this.fechaVenta_Contado="campoFechaVentaContado",this.usuario_Contado="campoUsuarioContado",this.nombreContado="campoNombreContado",this.precioTotal_Contado="campoPrecioTotalContado",this.pago_Contado="campoPagoContado",this.cambio_Contado="campoCambioContado",this.observaciones_Contado="campoObservacionesContado",this.metodoPagoContado="campoMetodoPagoContado",this.cantidadRecibida_Credito="campoCantidadRecibidaCredito",this.fechaVenta_Credito="campoFechaVentaCredito",this.usuario_Credito="campoUsuarioCredito",this.nombreCredito="campoNombreCredito",this.precioTotal_Credito="campoPrecioTotalCredito",this.pago_Credito="campoPagoCredito",this.cambio_Credito="campoCambioCredito",this.observaciones_Credito="campoObservacionesCredito",this.metodoPagoCredito="campoMetodoPagoCredito",this.precioOriginal_Editar="campoPrecioOriginalEditar",this.fechaCambio_Editar="campoFechaCambioEditar",this.nuevoPrecio_Editar="campoNuevoPrecioEditar",this.listAllProducts=[],this.active=1,this.keyword="codigo_interno",this.keywordCliente="nombres_apellidos",this.products=[],this.venta=new K,this.tipoPago=new W,this.activePago=1,this.selectorPago="contado",this.listMetodosPagos=["F\xedsico","Yape","Plin","Interbancario"],this.listClients=[],this.btnGuardar=!1,this.numberPattern="(^[0-9])+([.][0-9]{1,2})?$",this.decimalPattern=/^\d+(\.\d{1,2})?$/,this.tickValue=2,this.tickValueoptions={showTicksValues:!0,stepsArray:[{value:2,legend:"M\xednimo"},{value:3},{value:4},{value:5,legend:"M\xe1ximo"}]},this.addsales$=e.Addsales$,this.total$=e.total$}ngOnInit(){this.breadCrumbItems=[{label:"Venta"},{label:"Realizar Venta",active:!0}],this.getListMonturas()}onSort({column:e,direction:a}){this.headers.forEach(i=>{i.sortable!==e&&(i.direction="")}),this.service.sortColumn=e,this.service.sortDirection=a}centerModal(e,a){this.crearFormulario(),this.getListClients(),this.fechaVenta=new Date(Date.now()),this.modalService.open(e,{centered:!0,windowClass:"modal-holder"}),console.log("modal",a),this.f(this.fechaVenta_Contado).setValue(this.fechaVenta.toLocaleDateString()),this.f(this.precioTotal_Contado).setValue(this.precioTotalVenta.toFixed(2)),this.g(this.fechaVenta_Credito).setValue(this.fechaVenta.toLocaleDateString()),this.g(this.precioTotal_Credito).setValue(this.precioTotalVenta)}scrollModal(e){this.modalService.open(e,{size:"xl",scrollable:!0})}deleteEventData(){this.editEvent.remove(),this.modalService.dismissAll()}closeEventModal(){this.modalService.dismissAll()}saveEvent(){this.submitted_Contado=!0}getListMonturas(){this.getListAccesorios()}getListAccesorios(){this.productosService.getAccesoriosforSale(this.usuarioService.getSedebyUser()).subscribe(e=>{this.listAllProducts=[...e,...this.listAllProducts],console.log("accesorios",this.listAllProducts),this.getListLunas()})}getListLunas(){this.productosService.getLunasforSale(this.usuarioService.getSedebyUser()).subscribe(e=>{this.listAllProducts=[...e,...this.listAllProducts],console.log("lunas",this.listAllProducts)})}getListClients(){this.customerService.getAllClientsforSale().subscribe(e=>{this.listClients=e,this.listClients.forEach(a=>{a.nombres_apellidos=a.apellidos+" "+a.nombres}),console.log("clientes",this.listClients)})}selectorProducts(e){switch(console.log(e.nextId),e.nextId){case 1:this.getListMonturas(),this.keyword="marca";break;case 2:this.getListLunas(),this.keyword="material";break;case 3:this.getListAccesorios(),this.keyword="nombre_accesorio"}}selectorMetodoPago(e){console.log(e.nextId),this.selectorPago=1==e.nextId?"contado":"credito"}selectEvent(e){switch(console.log(e),e.tipo){case"montura":this.products.push(Object.assign(Object.assign({},e),{cant_vendida:1,precio:e.precio_montura_v})),this.autocomplete.clear();break;case"luna":this.products.push(Object.assign(Object.assign({},e),{cant_vendida:1,precio:e.precio_luna_v})),this.autocomplete.clear();break;case"accesorio":this.products.push(Object.assign(Object.assign({},e),{cant_vendida:1,precio:e.precio_accesorio_v})),this.autocomplete.clear()}this.estadoBotonGuardar(),console.log("autocomplete",this.products)}selectEventCliente(e){console.log(e),"contado"==this.selectorPago?this.f(this.usuario_Contado).setValue(e.id_cliente):this.g(this.usuario_Credito).setValue(e.id_cliente),this.venta.nombre_cliente=e.nombres+" "+e.apellidos,console.log("autocompleteCliente",this.products)}onChangeSearch(e){}onFocused(e){}getTotalCost(){return this.precioTotalVenta=this.products.map(e=>e.precio).reduce((e,a)=>e+a,0),this.precioTotalVenta=(0,P.NM)(this.precioTotalVenta,1),this.precioTotalVenta}addQuantityProduct(e,a){if(console.log(this.products),console.log(this.products[a].cant_vendida+1,this.products[a].cantidad),this.products[a].cant_vendida+1>this.products[a].cantidad)(0,m.H)("error","No se puede agregar m\xe1s productos del stock");else switch(this.products[a].cant_vendida+=1,this.products[a].tipo){case"montura":this.products[a].precio=this.products[a].precio_montura_v*this.products[a].cant_vendida;break;case"luna":this.products[a].precio=this.products[a].precio_luna_v*this.products[a].cant_vendida;break;case"accesorio":this.products[a].precio=this.products[a].precio_accesorio_v*this.products[a].cant_vendida}}substractQuantityProduct(e,a){switch(console.log(this.products),this.products[a].cant_vendida-=1,this.products[a].tipo){case"montura":this.products[a].precio=this.products[a].precio_montura_v*this.products[a].cant_vendida;break;case"luna":this.products[a].precio=this.products[a].precio_luna_v*this.products[a].cant_vendida;break;case"accesorio":this.products[a].precio=this.products[a].precio_accesorio_v*this.products[a].cant_vendida}0===this.products[a].cant_vendida&&this.removeProduct()}removeProduct(){this.products=this.products.filter(e=>0!==e.cant_vendida)}removeCartProduct(e,a){console.log("eliminado",this.products),this.products[a].cant_vendida=0,this.removeProduct(),this.estadoBotonGuardar()}estadoBotonGuardar(){this.btnGuardar=0!=this.products.length}crearFormulario(){this.formContado=this.fb.group({[this.cantidadRecibida_Contado]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fechaVenta_Contado]:[{value:null,disabled:!0}],[this.usuario_Contado]:[null],[this.precioTotal_Contado]:[{value:null,disabled:!0}],[this.pago_Contado]:[{value:null,disabled:!0}],[this.cambio_Contado]:[{value:null,disabled:!0}],[this.observaciones_Contado]:[null],[this.metodoPagoContado]:[null,[l.kI.required]],[this.nombreContado]:[null,[l.kI.required]]}),this.formCredito=this.fb.group({[this.cantidadRecibida_Credito]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.fechaVenta_Credito]:[{value:null,disabled:!0}],[this.usuario_Credito]:[null],[this.precioTotal_Credito]:[{value:null,disabled:!0}],[this.pago_Credito]:[{value:null,disabled:!0}],[this.cambio_Credito]:[{value:null,disabled:!0}],[this.observaciones_Credito]:[null],[this.metodoPagoCredito]:[null,[l.kI.required]],[this.nombreCredito]:[null,[l.kI.required]]})}f(e){return this.formContado.get(e)}g(e){return this.formCredito.get(e)}updatePago(e){console.log("entre"),"contado"==this.selectorPago?(this.f(this.pago_Contado).setValue(this.f(this.cantidadRecibida_Contado).value),this.f(this.cambio_Contado).setValue((this.f(this.cantidadRecibida_Contado).value-this.precioTotalVenta).toFixed(2))):(this.g(this.pago_Credito).setValue(this.g(this.cantidadRecibida_Credito).value),this.g(this.cambio_Credito).setValue(this.g(this.cantidadRecibida_Credito).value-this.precioTotalVenta))}guardarVenta(){if(this.formContado.valid||this.formCredito.valid){const e=this.products.filter(r=>"montura"==r.tipo),a=this.products.filter(r=>"luna"==r.tipo),i=this.products.filter(r=>"accesorio"==r.tipo);this.venta.list_monturas=e,this.venta.list_lunas=a,this.venta.list_accesorios=i,"contado"==this.selectorPago?(this.venta.observaciones=this.f(this.observaciones_Contado).value,this.venta.fecha_creacion_venta=this.fechaVenta,this.tipoPago.cantidad_recibida=this.f(this.cantidadRecibida_Contado).value,this.tipoPago.deuda=0,this.tipoPago.metodo_pago=this.f(this.metodoPagoContado).value,this.tipoPago.cuotas=String(0),this.venta.id_cliente=this.f(this.usuario_Contado).value):(this.venta.observaciones=this.g(this.observaciones_Credito).value,this.venta.fecha_creacion_venta=this.fechaVenta,this.tipoPago.cantidad_recibida=this.g(this.cantidadRecibida_Credito).value,this.tipoPago.deuda=this.precioTotalVenta-this.g(this.cantidadRecibida_Credito).value,this.tipoPago.metodo_pago=this.g(this.metodoPagoCredito).value,this.tipoPago.cuotas=String(this.tickValue),this.venta.id_cliente=this.g(this.usuario_Credito).value),this.venta.id_vendedor="1234456",this.tipoPago.forma_pago=this.selectorPago,this.tipoPago.precio_total=this.precioTotalVenta,this.tipoPago.fecha_pago=new Date,this.venta.tipo_venta.push(this.tipoPago),this.venta.id_sede="1234234",this.venta.habilitado=!0,console.log("venta",this.venta),(0,m.H)("loading","Cargando..."),this.cancel()}}cancel(){const e=Z().mixin({customClass:{cancelButton:"btn btn-danger ms-2",confirmButton:"btn btn-success"},buttonsStyling:!1});e.fire({title:"\xbfEst\xe1 seguro de realizar la venta?",text:"\xa1No se podr\xe1 revertir esto!",icon:"warning",cancelButtonText:"No, cancelar!",confirmButtonText:"Si, vender!",showCancelButton:!0}).then(a=>{a.value?this.productosService.createVenta(this.venta).subscribe(i=>{console.log("Guardando venta"),this.createPDF(),(0,m.H)("close",null),(0,m.H)("success","Venta realizada"),this.modalService.dismissAll()},i=>{(0,m.H)("close",null),404!==i.status&&(0,m.H)("error","Error en la conexi\xf3n")}):a.dismiss===Z().DismissReason.cancel&&e.fire("Cancelado","La venta no se ha realizado","error")})}createPDF(){return(0,D.__awaiter)(this,void 0,void 0,function*(){var a=new Date(Date.now()).toLocaleDateString("en-GB"),i="S/. ";const he={pageSize:"A4",pageMargins:[40,60,40,60],content:[{style:"tableMargin",table:{widths:["*","*"],body:[[{image:yield(0,P.up)("/assets/images/logo-dark.png"),width:150},{text:"N\xba de Boleta: #MN0131",style:"tableHeader",rowSpan:4,alignment:"right"}],[{text:"Calle Santa Marta 218, Arequipa"},{}],[{text:"raulcg1234@hotmail.com "},{}],[{text:"955 739 464"},{}]]},layout:"noBorders"},{style:"tableMargin",table:{widths:["*","*"],body:[[{text:"Facturado a:",style:"tableHeader"},{text:"N\xba de Boleta:",style:"tableHeader",alignment:"right"}],[{text:"Renzo Alessando Sucari Velasques",style:"subtitulo"},{text:"#MN0131",style:"contenido",alignment:"right"}],[{text:"Fecha de Nacimiento: 14/02/96",style:"contenido"},{text:"Fecha de la Boleta:",style:"tableHeader",alignment:"right"}],[{text:"Correo: renzo.sucari@gmail.com",style:"contenido"},{text:a,style:"contenido",alignment:"right"}],[{text:"Telefono: 983 720 150",style:"contenido"},{}]]},layout:"noBorders"},{text:"Resumen del pedido:",style:"subtitulo"},{style:"tableMargin",color:"#444",table:{widths:[25,"*",63,60,63],heights:[20,20,20,20],headerRows:1,body:[[{text:"No.",style:"tableHeader",alignment:"center"},{text:"Detalle",style:"tableHeader",alignment:"center"},{text:"Precio",style:"tableHeader",alignment:"center"},{text:"Cantidad",style:"tableHeader",alignment:"center"},{text:"Total",style:"tableHeader",alignment:"center"}],[{text:"01",style:"tableHeader",alignment:"center"},{text:"Nike N012 Running Shoes",style:"contenido",alignment:"left"},{text:i+"140.00",style:"contenido",alignment:"right"},{text:"1",style:"contenido",alignment:"center"},{text:i+"140.54",style:"contenido",alignment:"right"}],[{text:"02",style:"tableHeader",alignment:"center"},{text:"Adidas Running Shoes",style:"contenido",alignment:"left"},{text:i+"260.54",style:"contenido",alignment:"right"},{text:"1",style:"contenido",alignment:"center"},{text:i+"260.56",style:"contenido",alignment:"right"}],[{text:"03",style:"tableHeader",alignment:"center"},{text:"Nike N012 Running Shoes",style:"contenido",alignment:"left"},{text:i+"140.23",style:"contenido",alignment:"right"},{text:"1",style:"contenido",alignment:"center"},{text:i+"140.67",style:"contenido",alignment:"right"}],[{text:"04",style:"tableHeader",alignment:"center"},{text:"Adidas Running Shoes",style:"contenido",alignment:"left"},{text:i+"260.00",style:"contenido",alignment:"right"},{text:"1",style:"contenido",alignment:"center"},{text:i+"260.12",style:"contenido",alignment:"right"}],[{text:" ",rowSpan:3,colSpan:2},{},{text:"Sub. Total:",style:"tableHeader",alignment:"right",colSpan:2},{},{text:i+"510.00",style:"contenido",alignment:"right"}],[{},{},{text:"IGV (18%) :",style:"tableHeader",alignment:"right",colSpan:2},{},{text:i+"13.00",style:"contenido",alignment:"right"}],[{},{},{text:"Total:",style:"tableHeader",alignment:"right",colSpan:2},{},{text:i+"498.00",style:"contenido",alignment:"right"}]]}},{text:[,{text:"Fecha de Entrega: ",style:"textBold"},"12/12/21","   ",{text:"Hora: ",style:"textBold"},"12:15 AM"]},{text:"Nota:",style:"subtitulo2"},{text:"Todo trabajo se efectuara con un adelanto del 50%.",style:"contenido2",alignment:"justify"},{text:"La empresa no se responsabiliza de los pedidos no recogidos despu\xe9s de un mes.",style:"contenido2",alignment:"justify"}],styles:{subtitulo:{bold:!0,fontSize:13,color:"black",margin:[0,10,0,5]},subtitulo2:{bold:!0,fontSize:10,color:"black",margin:[0,10,0,5]},contenido:{fontSize:12},contenido2:{fontSize:8},textBold:{fontSize:12,bold:!0},header:{fontSize:17,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:13,bold:!0,margin:[0,10,0,5]},subtitle:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableMargin:{margin:[0,15,0,15]},tableOpacityExample:{margin:[0,5,0,15],fillColor:"blue",fillOpacity:.3},tableHeader:{bold:!0,fontSize:13,color:"black"}}};z().createPdf(he).open()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(w),t.Y36(l.qu),t.Y36(c.FF),t.Y36(ot.k),t.Y36(it.$),t.Y36(at.i))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-sale"]],viewQuery:function(e,a){if(1&e&&(t.Gf(nt,5),t.Gf(j,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.autocomplete=i.first),t.iGM(i=t.CRH())&&(a.headers=i)}},features:[t._Bn([w,g.JJ])],decls:55,vars:11,consts:[[1,"container-fluid"],["title","A\xf1adir un Producto",3,"breadcrumbItems"],[1,"row","mb-4"],[1,"col-xl-12"],[1,"card","mb-0"],[1,"row"],[1,"col-sm-12","col-md-12","search-box","chat-search-box"],[1,"position-relative"],["placeholder","Buscar productos","historyIdentifier","","focusFirst","true",3,"data","searchKeyword","itemTemplate","notFoundTemplate","selected","inputChanged","inputFocused","keyup.enter"],["autocomplete",""],["itemTemplate",""],["notFoundTemplate",""],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[1,"table-responsive"],[1,"table","table-centered","dt-responsive","table-nowrap","mb-0","align-middle",2,"border-spacing","0 12px","width","100%"],[1,"table-light"],[1,"bg-transparent"],[4,"ngFor","ngForOf"],[1,"text-end","mt-2"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"disabled","click"],[1,"uil","uil-shopping-cart-alt","mt-2","me-1"],["centerDataModalEditar",""],["centerDataModalGuardar2",""],["scrollDataModal",""],[3,"innerHTML"],[3,"result"],[4,"ngIf"],["placement","top","ngbTooltip","Disminuir",1,"px-2","text-warning"],[1,"uil","uil-minus-circle","font-size-18",3,"click"],["placement","top","ngbTooltip","Agregar",1,"px-2","text-success"],["name","quantity","ngDefaultControl","","min","0",1,"uil","uil-plus-circle","font-size-18",3,"ngModel","ngModelChange","click"],["href","javascript:void(0);","placement","top","ngbTooltip","Editar",1,"px-2","text-primary"],[1,"uil","uil-pen","font-size-18"],["placement","top","ngbTooltip","Eliminar",1,"px-2","text-danger"],[1,"uil","uil-trash-alt","font-size-18",3,"click"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[3,"formGroup","ngSubmit"],[1,"col-6"],[1,"mb-3"],[1,"control-label"],["placeholder","PEN 000.00","type","text","name","namePrecioOriginalEditar",1,"form-control",3,"formControlName","ngClass"],["class","invalid-feedback",4,"ngIf"],["placeholder","Seleccione la fecha","type","text","name","nameFechaCambioEditar",1,"form-control",3,"formControlName","ngClass"],[1,"col-12"],["placeholder","Escriba el nuevo precio de venta","type","text","name","nameNuevoPrecioEditar",1,"form-control",3,"formControlName","ngClass"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"click"],[1,"invalid-feedback"],[1,"col-lg-14"],["ngbNav","",1,"nav-pills","nav-justified","bg-light",3,"activeId","navChange"],["justifiednavpills","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-block","d-sm-none"],[1,"fas","fa-home"],[1,"d-none","d-sm-block"],["ngbNavContent",""],[1,"far","fa-user"],[3,"ngbNavOutlet"],[1,"row","mt-4"],[1,"col-4"],["placeholder","Cantidad en soles","type","text","name","nameCantidadRecibidaContado",1,"form-control",3,"formControlName","change"],["class","text-danger",4,"ngIf"],[1,"form-label"],["name","selectMetodo","placeholder","Seleccione",3,"items","formControlName"],["placeholder","Seleccione la fecha","type","text","name","nameFechaRegistroContado",1,"form-control",3,"formControlName","ngClass"],["placeholder","Apellidos del cliente","historyIdentifier","",3,"data","searchKeyword","itemTemplate","formControlName","notFoundTemplate","selected"],["itemTemplate3",""],[1,"control-label",2,"text-align","left"],["placeholder","S/ 000.00","type","text","name","nameTotalContado",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","namePagoContado",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","nameCambioContado",1,"form-control",3,"formControlName","ngClass"],[1,"mb-4"],["for","billing-observaciones",1,"form-label"],["id","billing-observaciones","rows","3","placeholder","Ingrese las observaciones",1,"form-control",3,"formControlName"],[1,"text-danger"],["placeholder","Cantidad en soles","type","text","name","nameCantidadRecibidaCredito",1,"form-control",3,"formControlName","change"],["placeholder","Seleccione la fecha","type","text","name","nameFechaRegistroCredito",1,"form-control",3,"formControlName","ngClass"],[1,"p-3"],[3,"value","options","valueChange"],["placeholder","Apellidos del cliente","historyIdentifier","",3,"data","searchKeyword","itemTemplate","notFoundTemplate","formControlName","selected"],["itemTemplate2",""],["placeholder","S/ 000.00","type","text","name","nameTotalCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","namePagoCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","nameCambioCredito",1,"form-control",3,"formControlName","ngClass"],[1,"modal-title","mt-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"invoice-title"],[1,"float-end","font-size-16"],[1,"badge","bg-success","font-size-12","ms-2"],["src","assets/images/logo-dark.png","alt","logo","height","20"],[1,"text-muted"],[1,"mb-1"],[1,"uil","uil-map-marker","me-1"],[1,"uil","uil-envelope-alt","me-1"],[1,"uil","uil-phone","me-1"],[1,"my-4"],[1,"col-sm-6"],[1,"font-size-16","mb-3"],[1,"font-size-15","mb-2"],[1,"text-muted","text-sm-end"],[1,"font-size-16","mb-1"],[1,"mt-4"],[1,"py-2"],[1,"font-size-15"],[1,"table","table-nowrap","table-centered","mb-0"],[2,"width","70px"],[1,"text-end",2,"width","120px"],["scope","row"],[1,"font-size-15","mb-1"],[1,"list-inline","mb-0"],[1,"list-inline-item"],[1,"fw-medium"],[1,"text-end"],["scope","row","colspan","4",1,"text-end"],["scope","row","colspan","4",1,"border-0","text-end"],[1,"border-0","text-end"],[1,"m-0"],[1,"modal-footer"],["href","javascript(0)",1,"btn","btn-success","waves-effect","waves-light","me-1"],[1,"fa","fa-download"],["href","javascript:window.print()",1,"btn","btn-success","waves-effect","waves-light","me-1"],[1,"fa","fa-print"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary"]],template:function(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",0),t._UZ(1,"app-page-title",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"ng-autocomplete",8,9),t.NdJ("selected",function(d){return a.selectEvent(d)})("inputChanged",function(d){return a.onChangeSearch(d)})("inputFocused",function(d){return a.onFocused(d)})("keyup.enter",function(d){return a.selectEvent(d)}),t.qZA(),t.YNc(10,rt,1,1,"ng-template",null,10,t.W1O),t.YNc(12,st,1,1,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"h4"),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"h4",15),t._uU(23,"Lista de Productos"),t.qZA(),t.TgZ(24,"div",16),t.TgZ(25,"form"),t.TgZ(26,"table",17),t.TgZ(27,"thead",18),t.TgZ(28,"tr",19),t.TgZ(29,"th"),t._uU(30,"ID Producto"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Tipo"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Detalle"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Cantidad"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Precio"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Total"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tbody"),t.YNc(44,_t,24,11,"tr",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",21),t.TgZ(46,"button",22),t.NdJ("click",function(){t.CHM(i);const d=t.MAs(52);return a.centerModal(d,a.products)}),t._UZ(47,"i",23),t._uU(48," Guardar "),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,At,30,15,"ng-template",null,24,t.W1O),t.YNc(51,Ft,23,4,"ng-template",null,25,t.W1O),t.YNc(53,Ht,152,0,"ng-template",null,26,t.W1O)}if(2&e){const i=t.MAs(11),r=t.MAs(13);t.xp6(1),t.Q6J("breadcrumbItems",a.breadCrumbItems),t.xp6(7),t.Q6J("data",a.listAllProducts)("searchKeyword",a.keyword)("itemTemplate",i)("notFoundTemplate",r),t.xp6(8),t.hij("Total de la Venta: PEN ",t.xi3(17,8,a.getTotalCost(),"S/."),""),t.xp6(28),t.Q6J("ngForOf",a.products),t.xp6(2),t.Q6J("disabled",!a.btnGuardar)}},directives:[V.V,Q.YR,l._Y,l.JL,l.F,g.sg,c._h,g.O5,c._L,l.Fj,l.JJ,l.On,l.sg,l.u,g.mk,c.Pz,c.nv,c.Vx,c.uN,c.tO,T.w9,q.w5],pipes:[g.H9],styles:[""]}),o})();var b=s(18260),Rt=s(44522);let k=(()=>{class o{constructor(e){this.http=e}getVentas(){return this.http.get(b.N.urlBackend+"getAllVentas")}getVentasByDate(e,a){return this.http.get(b.N.urlBackend+"getAllVentasByDate/"+e+"/"+a)}darBajaVenta(e){return this.http.put(b.N.urlBackend+"unsubscribeVentasById/"+e,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Rt.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),I=(()=>{class o{constructor(e,a){this.pipe=e,this.ventaService=a,this._loading$=new p.X(!0),this._search$=new U.xQ,this._total$=new p.X(0),this._mostrar$=new p.X(!1),this._ventas$=new p.X([]),this.ventaList=[],this._state={page:1,pageSize:10,searchTerm:"",sortColumn:"",sortDirection:""},this.getAllVentas()}get transactions$(){return this._ventas$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get mostrar(){return this._mostrar$.asObservable()}set page(e){this._set({page:e})}set pageSize(e){this._set({pageSize:e})}set searchTerm(e){this._set({searchTerm:e})}set sortColumn(e){this._set({sortColumn:e})}set sortDirection(e){this._set({sortDirection:e})}_set(e){Object.assign(this._state,e),this._search$.next()}updateTable(e){this._ventas$.next(e)}_search(){const{sortColumn:e,sortDirection:a,pageSize:i,page:r,searchTerm:d}=this._state;let u=function(o,n,e){return""===e||""===n?o:[...o].sort((a,i)=>{const r=((o,n)=>o<n?-1:o>n?1:0)(a[n],i[n]);return"asc"===e?r:-r})}(this.ventaList,e,a);u=u.filter(f=>function(o,n,e){return o.id_cliente.toLowerCase().includes(n)||String(o.tipo_venta[0].precio_total).toLowerCase().includes(n.toLowerCase())||o.fecha_creacion_venta.toLocaleString().includes(n)}(f,d));const h=u.length;return u=u.slice((r-1)*i,(r-1)*i+i),(0,N.of)({transactions:u,total:h})}getAllVentas(){this.ventaService.getVentas().subscribe(e=>{this.ventaList=e,console.log(e),this._mostrar$.next(!0),this._search$.pipe((0,C.b)(()=>this._loading$.next(!0)),(0,y.b)(200),(0,J.w)(()=>this._search()),(0,M.g)(200),(0,C.b)(()=>this._loading$.next(!1))).subscribe(a=>{this._ventas$.next(a.transactions),this._total$.next(a.total)}),this._search$.next()})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.JJ),t.LFG(k))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ot={asc:"desc",desc:"","":"asc"};let Bt=(()=>{class o{constructor(){this.sortable="",this.direction="",this.sort=new t.vpe}rotate(){this.direction=Ot[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(e,a){1&e&&t.NdJ("click",function(){return a.rotate()}),2&e&&t.ekj("asc","asc"===a.direction)("desc","desc"===a.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}}),o})();var Gt=s(7082),jt=s.n(Gt);const L=function(o){return{"bg-soft-danger":o}};function Kt(o,n){if(1&o&&(t.TgZ(0,"td"),t.TgZ(1,"span",51),t._uU(2,"Deuda \xa0"),t.qZA(),t.TgZ(3,"span",52),t._uU(4),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngClass",t.VKq(2,L,e.tipo_venta[0].deuda>0)),t.xp6(1),t.hij(" ",e.tipo_venta[0].deuda," ")}}function Wt(o,n){1&o&&(t.TgZ(0,"td"),t.TgZ(1,"span",53),t._uU(2,"Pagado"),t.qZA(),t.qZA())}function Xt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",40),t.TgZ(1,"td"),t._UZ(2,"ngb-highlight",41),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"ngb-highlight",41),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t.TgZ(7,"div",42),t.TgZ(8,"span",43),t._uU(9),t.qZA(),t.qZA(),t._UZ(10,"ngb-highlight",41),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"ngb-highlight",41),t.qZA(),t.YNc(13,Kt,5,4,"td",44),t.YNc(14,Wt,3,0,"td",44),t.TgZ(15,"td"),t.TgZ(16,"div"),t.TgZ(17,"button",45),t._uU(18,"Pdf "),t._UZ(19,"i",46),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td"),t.TgZ(21,"a",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),r=t.MAs(77);return i.centerModalActualizar(r)}),t._UZ(22,"i",48),t.qZA(),t.TgZ(23,"a",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().eliminar(r)}),t._UZ(24,"i",50),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,a=n.index,i=t.oxw();t.xp6(2),t.Q6J("result",a+1)("term",i.service.searchTerm),t.xp6(2),t.Q6J("result",t.xi3(5,11,e.fecha_creacion_venta,"dd/MM/yyyy"))("term",i.service.searchTerm),t.xp6(5),t.hij(" ",e.nombre_cliente.charAt(0)," "),t.xp6(1),t.Q6J("result",e.nombre_cliente)("term",i.service.searchTerm),t.xp6(2),t.Q6J("result",e.tipo_venta[0].precio_total)("term",i.service.searchTerm),t.xp6(1),t.Q6J("ngIf",e.tipo_venta[0].deuda>0),t.xp6(1),t.Q6J("ngIf",0==e.tipo_venta[0].deuda)}}function te(o,n){1&o&&(t.TgZ(0,"div",24),t.TgZ(1,"div",25),t.TgZ(2,"div",54),t.TgZ(3,"a",55),t._UZ(4,"i",56),t._uU(5," Cargando "),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function ee(o,n){1&o&&(t.TgZ(0,"div",51),t._uU(1," Campo requerido "),t.qZA())}function oe(o,n){1&o&&(t.TgZ(0,"div",51),t._uU(1," Ingrese solo n\xfameros "),t.qZA())}function ie(o,n){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,ee,2,0,"div",72),t.YNc(2,oe,2,0,"div",72),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.errors.required),t.xp6(1),t.Q6J("ngIf",e.formCredito.controls.campoCantidadRecibidaCreditoActualizacion.errors.pattern)}}function ae(o,n){1&o&&(t.TgZ(0,"div",51),t._uU(1," Campo requerido "),t.qZA())}function ne(o,n){if(1&o&&(t.TgZ(0,"div",51),t.YNc(1,ae,2,0,"div",72),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.errors.required)}}function re(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"This value is required."),t.qZA())}function se(o,n){if(1&o&&(t.TgZ(0,"div",93),t.YNc(1,re,2,0,"span",44),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.title.errors.required)}}const v=function(o){return{"is-invalid":o}};function le(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",57),t.TgZ(1,"h5",58),t._uU(2,"Actualizar Venta - Al Credito"),t.qZA(),t.TgZ(3,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeEventModal()}),t.qZA(),t.qZA(),t.TgZ(4,"div",60),t.TgZ(5,"div",61),t.TgZ(6,"form",62),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().saveEvent()}),t.TgZ(7,"div",24),t.TgZ(8,"div",63),t.TgZ(9,"div",64),t.TgZ(10,"label",65),t._uU(11,"Nombres y Apellidos del Cliente"),t.qZA(),t.TgZ(12,"h5"),t._uU(13,"Renzo Alessandro Sucari Velasquez"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",63),t.TgZ(15,"div",66),t.TgZ(16,"div",67),t.TgZ(17,"div",68),t._uU(18,"Deuda \xa0"),t.qZA(),t.TgZ(19,"div",69),t._uU(20," S/. 100.00 "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",70),t.TgZ(22,"div",24),t.TgZ(23,"div",21),t.TgZ(24,"div",64),t.TgZ(25,"label",65),t._uU(26,"Cantidad Recibida"),t.qZA(),t.TgZ(27,"input",71),t.NdJ("change",function(i){return t.CHM(e),t.oxw().updatePago(i)}),t.qZA(),t.YNc(28,ie,3,2,"div",72),t.qZA(),t.qZA(),t.TgZ(29,"div",21),t.TgZ(30,"div",64),t.TgZ(31,"label",73),t._uU(32,"M\xe9todo"),t.qZA(),t._UZ(33,"ng-select",74),t.YNc(34,ne,2,1,"div",72),t.qZA(),t.qZA(),t.TgZ(35,"div",21),t.TgZ(36,"div",64),t.TgZ(37,"label",65),t._uU(38,"Fecha"),t.qZA(),t._UZ(39,"input",75),t.YNc(40,se,2,1,"div",76),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",24),t.TgZ(42,"div",25),t.TgZ(43,"div",64),t.TgZ(44,"label",65),t._uU(45,"Informaci\xf3n de Pagos"),t.qZA(),t.TgZ(46,"div",24),t.TgZ(47,"div",77),t.TgZ(48,"div",78),t.TgZ(49,"table",79),t.TgZ(50,"thead"),t.TgZ(51,"tr"),t.TgZ(52,"th",80),t._uU(53,"N\xba Cuotas"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Monto"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"M\xe9todo"),t.qZA(),t.TgZ(58,"th"),t._uU(59,"Fecha"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"tbody"),t.TgZ(61,"tr"),t.TgZ(62,"th",81),t._uU(63,"1"),t.qZA(),t.TgZ(64,"td"),t._uU(65,"S/. 60.00"),t.qZA(),t.TgZ(66,"td"),t._uU(67,"Plin"),t.qZA(),t.TgZ(68,"td"),t._uU(69,"09 Ago, 2022"),t.qZA(),t.qZA(),t.TgZ(70,"tr"),t.TgZ(71,"th",81),t._uU(72,"2"),t.qZA(),t.TgZ(73,"td"),t._uU(74,"S/. 30.00"),t.qZA(),t.TgZ(75,"td"),t._uU(76,"Interbancario"),t.qZA(),t.TgZ(77,"td"),t._uU(78,"14 Set, 2022"),t.qZA(),t.qZA(),t.TgZ(79,"tr"),t.TgZ(80,"th",81),t._uU(81,"3"),t.qZA(),t.TgZ(82,"td"),t._uU(83,"S/. 59.00"),t.qZA(),t.TgZ(84,"td"),t._uU(85,"F\xedsico"),t.qZA(),t.TgZ(86,"td"),t._uU(87,"18 Oct, 2022"),t.qZA(),t.qZA(),t.TgZ(88,"tr"),t.TgZ(89,"th",81),t._uU(90,"4"),t.qZA(),t.TgZ(91,"td"),t._uU(92,"S/. 30.00"),t.qZA(),t.TgZ(93,"td"),t._uU(94,"Yape"),t.qZA(),t.TgZ(95,"td"),t._uU(96,"29 Nov, 2022"),t.qZA(),t.qZA(),t.TgZ(97,"tr"),t.TgZ(98,"th",81),t._uU(99,"5"),t.qZA(),t.TgZ(100,"td"),t._uU(101,"-"),t.qZA(),t.TgZ(102,"td"),t._uU(103,"-"),t.qZA(),t.TgZ(104,"td"),t._uU(105,"-"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",24),t.TgZ(107,"div",25),t.TgZ(108,"label",82),t._uU(109,"Montos:"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"div",24),t.TgZ(111,"div",21),t.TgZ(112,"div",64),t.TgZ(113,"label",65),t._uU(114,"Total"),t.qZA(),t._UZ(115,"input",83),t.qZA(),t.qZA(),t.TgZ(116,"div",21),t.TgZ(117,"div",64),t.TgZ(118,"label",65),t._uU(119,"Pago"),t.qZA(),t._UZ(120,"input",84),t.qZA(),t.qZA(),t.TgZ(121,"div",21),t.TgZ(122,"div",64),t.TgZ(123,"label",65),t._uU(124,"Cambio"),t.qZA(),t._UZ(125,"input",85),t.qZA(),t.qZA(),t.qZA(),t.TgZ(126,"div",24),t.TgZ(127,"div",86),t.TgZ(128,"div",87),t.TgZ(129,"label",88),t._uU(130,"Observaciones"),t.qZA(),t._UZ(131,"textarea",89),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"div",90),t.TgZ(133,"button",91),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeEventModal()}),t._uU(134," Cerrar "),t.qZA(),t.TgZ(135,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw().guardarActualizacionDeuda()}),t._uU(136," Registrar Venta "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("formGroup",e.formCreditoActualizacion),t.xp6(13),t.Q6J("ngClass",t.VKq(18,L,!0)),t.xp6(8),t.s9C("formControlName",e.cantidadRecibida_CreditoActualizacion),t.xp6(1),t.Q6J("ngIf",e.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.invalid&&(e.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.dirty||e.formCreditoActualizacion.controls.campoCantidadRecibidaCreditoActualizacion.touched)),t.xp6(5),t.s9C("formControlName",e.metodoPagoCreditoActualizacion),t.Q6J("items",e.listMetodosPagos),t.xp6(1),t.Q6J("ngIf",e.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.invalid&&(e.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.dirty||e.formCreditoActualizacion.controls.campoMetodoPagoCreditoActualizacion.touched)),t.xp6(5),t.s9C("formControlName",e.fechaVenta_CreditoActualizacion),t.Q6J("ngClass",t.VKq(20,v,e.submitted&&e.form.title.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.form.title.errors),t.xp6(75),t.s9C("formControlName",e.precioTotal_CreditoActualizacion),t.Q6J("ngClass",t.VKq(22,v,e.submitted&&e.form.title.errors)),t.xp6(5),t.s9C("formControlName",e.pago_CreditoActualizacion),t.Q6J("ngClass",t.VKq(24,v,e.submitted&&e.form.title.errors)),t.xp6(5),t.s9C("formControlName",e.cambio_CreditoActualizacion),t.Q6J("ngClass",t.VKq(26,v,e.submitted&&e.form.title.errors)),t.xp6(6),t.s9C("formControlName",e.observaciones_CreditoActualizacion),t.xp6(4),t.Q6J("disabled",!e.formCreditoActualizacion.valid)}}const de=[{path:"addsale",component:Et},{path:"listsales",component:(()=>{class o{constructor(e,a,i,r,d){this.service=e,this.fb=a,this.fbActualizar=i,this.ventasService=r,this.modalService=d,this.mostrarSpinner=!1,this.submitted_CreditoActualizacion=!1,this.cantidadRecibida_CreditoActualizacion="campoCantidadRecibidaCreditoActualizacion",this.fechaVenta_CreditoActualizacion="campoFechaVentaCreditoActualizacion",this.usuario_CreditoActualizacion="campoUsuarioCreditoActualizacion",this.nombreCreditoActualizacion="campoNombreCreditoActualizacion",this.precioTotal_CreditoActualizacion="campoPrecioTotalCreditoActualizacion",this.pago_CreditoActualizacion="campoPagoCreditoActualizacion",this.cambio_CreditoActualizacion="campoCambioCreditoActualizacion",this.observaciones_CreditoActualizacion="campoObservacionesCreditoActualizacion",this.metodoPagoCreditoActualizacion="campoMetodoPagoCreditoActualizacion",this.numberPattern="[0-9]+",this.activePago=1,this.listMetodosPagos=["F\xedsico","Yape","Plin","Interbancario"],this.exampleOptions={altInputClass:"form-control",locale:jt().es},this.fechaDesde="campoFechaDesde",this.fechaHasta="campoFechaHasta",this.transactions$=e.transactions$,console.log(this.transactions$),this.total$=e.total$,e.mostrar.subscribe(u=>{this.mostrarSpinner=u})}ngOnInit(){this.breadCrumbItems=[{label:"Venta"},{label:"Lista de Ventas",active:!0}],this.crearFormulario()}onSort({column:e,direction:a}){this.headers.forEach(i=>{i.sortable!==e&&(i.direction="")}),this.service.sortColumn=e,this.service.sortDirection=a}centerModalActualizar(e){this.crearFormularioActualizar(),this.fechaVenta=new Date(Date.now()),this.modalService.open(e,{centered:!0,windowClass:"modal-holder"}),this.g(this.fechaVenta_CreditoActualizacion).setValue(this.fechaVenta.toLocaleDateString()),this.g(this.precioTotal_CreditoActualizacion).setValue(this.precioTotalVenta)}closeEventModal(){this.modalService.dismissAll()}saveEvent(){this.submitted_CreditoActualizacion=!0}crearFormulario(){this.formDateRange=this.fb.group({[this.fechaDesde]:[],[this.fechaHasta]:[]})}crearFormularioActualizar(){this.formCreditoActualizacion=this.fbActualizar.group({[this.cantidadRecibida_CreditoActualizacion]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.fechaVenta_CreditoActualizacion]:[{value:null,disabled:!0}],[this.usuario_CreditoActualizacion]:[null],[this.precioTotal_CreditoActualizacion]:[{value:null,disabled:!0}],[this.pago_CreditoActualizacion]:[{value:null,disabled:!0}],[this.cambio_CreditoActualizacion]:[{value:null,disabled:!0}],[this.observaciones_CreditoActualizacion]:[null],[this.metodoPagoCreditoActualizacion]:[null,[l.kI.required]],[this.nombreCreditoActualizacion]:[null,[l.kI.required]]})}g(e){return this.formCreditoActualizacion.get(e)}updatePago(e){console.log("entre"),this.g(this.pago_CreditoActualizacion).setValue(this.g(this.cantidadRecibida_CreditoActualizacion).value),this.g(this.cambio_CreditoActualizacion).setValue(this.g(this.cantidadRecibida_CreditoActualizacion).value-this.precioTotalVenta)}guardarActualizacionDeuda(){}f(e){return this.formDateRange.get(e)}filterDateRange(){if(this.formDateRange.valid){let e=new Date(this.f(this.fechaDesde).value),a=null!=this.f(this.fechaHasta).value?new Date(this.f(this.fechaHasta).value):new Date(Date.now());a.setDate(a.getDate()+1),e.setHours(0,0,0),a.setHours(23,59,0),console.log("fechas",e,a),this.ventasService.getVentasByDate(e,a).subscribe(i=>{console.log(i),this.service.updateTable(i)})}}eliminar(e){Z().fire({title:"\xbfEst\xe1 seguro que desea eliminar la venta?",text:"No se podr\xe1 revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Si, eliminar!"}).then(a=>{a.value?((0,m.H)("loading","Cargando..."),this.ventasService.darBajaVenta(e.id_ventas).subscribe(i=>{(0,m.H)("close",null),(0,m.H)("success","Venta eliminada"),console.log("venta borrado"),this.updateListVentas()},i=>{(0,m.H)("close",null),(0,m.H)("error","Error en la conexi\xf3n")})):a.dismiss===Z().DismissReason.cancel&&Z().fire("Cancelado","Venta no eliminada","error")})}updateListVentas(){this.ventasService.getVentas().subscribe(e=>{this.service.updateTable(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I),t.Y36(l.qu),t.Y36(l.qu),t.Y36(k),t.Y36(c.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-sales"]],viewQuery:function(e,a){if(1&e&&t.Gf(Bt,5),2&e){let i;t.iGM(i=t.CRH())&&(a.headers=i)}},features:[t._Bn([I,g.JJ])],decls:78,vars:24,consts:[[1,"container-fluid"],["title","Ventas",3,"breadcrumbItems"],[1,"row","mt-2","mb-2"],[1,"col-sm-12","col-md-6","justify-content-start"],[1,"row","mb-2"],[1,"col-12","search-box","chat-search-box"],[1,"position-relative"],["type","text","placeholder","Buscar venta","name","searchTerm","aria-controls","tickets-table",1,"form-control","border-light","rounded",3,"ngModel","ngModelChange"],[1,"uil","uil-search","search-icon"],[1,"col-sm-12","col-md-6","text-md-end"],[1,"dataTables_length"],[1,"d-inline-flex","align-items-center"],["name","pageSize",1,"custom-select","custom-select-sm","form-control","form-control-sm","form-select","form-select-sm",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"col-sm-12","col-md-8","justify-content-start"],[1,"col-8","search-box","chat-search-box"],[3,"formGroup"],[1,"input-daterange","input-group"],["type","date","id","billing-fechanacimiento","placeholder","Seleccione la fecha",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mdi","mdi-filter-variant"],[1,"col-4"],[1,"col-sm-12","col-md-4","text-md-end"],["name","sales",1,"custom-select","custom-select-sm","form-control","form-control-sm","form-select","form-select-sm"],[1,"row"],[1,"col-12"],[1,"table-responsive","mb-4"],[1,"table","datatables","table-centered","table-nowrap","mb-0","align-middle","table-card-list",2,"border-spacing","0 12px","width","100%"],[1,"bg-transparent"],["scope","col","sortable","observaciones",3,"sort"],["scope","col","sortable","id_sede",3,"sort"],["scope","col","sortable","",3,"sort"],["scope","col","sortable","pdf",3,"sort"],[2,"width","170px"],["class","odd",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center"],[1,"text-md-end","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["centerDataModalActualizarVenta",""],[1,"odd"],[3,"result","term"],[1,"avatar-xs","d-inline-block","me-2"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[4,"ngIf"],[1,"btn","btn-light","btn-sm","w-xs"],[1,"uil","uil-download-alt","ms-2"],["placement","top","ngbTooltip","Editar",1,"px-3","text-primary",3,"click"],[1,"uil","uil-pen","font-size-18"],["placement","top","ngbTooltip","Eliminar",1,"px-3","text-danger",3,"click"],[1,"uil","uil-trash-alt","font-size-18"],[1,"text-danger"],[1,"badge","rounded-pill","bg-soft-success","font-size-12",3,"ngClass"],[1,"text-success"],[1,"text-center","my-3"],["href","javascript:void(0);",1,"text-primary"],[1,"mdi","mdi-loading","mdi-spin","font-size-20","align-middle","me-2"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[1,"col-lg-14"],[3,"formGroup","ngSubmit"],[1,"col-sm-6"],[1,"mb-3"],[1,"control-label"],[1,"text-muted","text-sm-end"],[1,"mt-4"],[1,"text-danger","font-size-16"],[1,"badge","rounded-pill","bg-soft-success","font-size-16",3,"ngClass"],[1,"border-top","pt-4"],["placeholder","Cantidad en soles","type","text","name","nameCantidadRecibidaCredito",1,"form-control",3,"formControlName","change"],["class","text-danger",4,"ngIf"],[1,"form-label"],["name","selectMetodo","placeholder","Seleccione",3,"items","formControlName"],["placeholder","Seleccione la fecha","type","text","name","nameFechaRegistroCredito",1,"form-control",3,"formControlName","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","table-sm","m-0","table-centered"],[2,"width","70px"],["scope","row"],[1,"control-label",2,"text-align","left"],["placeholder","S/ 000.00","type","text","name","nameTotalCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","namePagoCredito",1,"form-control",3,"formControlName","ngClass"],["placeholder","S/ 000.00","type","text","name","nameCambioCredito",1,"form-control",3,"formControlName","ngClass"],[1,"col-lg-12"],[1,"mb-4"],["for","billing-observaciones",1,"form-label"],["id","billing-observaciones","rows","3","placeholder","Ingrese las observaciones",1,"form-control",3,"formControlName"],[1,"text-end","mt-2"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"disabled","click"],[1,"invalid-feedback"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-page-title",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"input",7),t.NdJ("ngModelChange",function(r){return a.service.searchTerm=r}),t.qZA(),t._UZ(8,"i",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",9),t.TgZ(10,"div",10),t.TgZ(11,"label",11),t._uU(12,"Mostrar"),t.TgZ(13,"select",12),t.NdJ("ngModelChange",function(r){return a.service.pageSize=r}),t.TgZ(14,"option",13),t._uU(15,"10"),t.qZA(),t.TgZ(16,"option",13),t._uU(17,"25"),t.qZA(),t.TgZ(18,"option",13),t._uU(19,"50"),t.qZA(),t.TgZ(20,"option",13),t._uU(21,"100"),t.qZA(),t.qZA(),t._uU(22," entradas "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",2),t.TgZ(24,"div",14),t.TgZ(25,"div",4),t.TgZ(26,"div",15),t.TgZ(27,"div",6),t.TgZ(28,"form",16),t.TgZ(29,"div",17),t._UZ(30,"input",18),t._UZ(31,"input",18),t.TgZ(32,"button",19),t.NdJ("click",function(){return a.filterDateRange()}),t._UZ(33,"i",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",21),t.qZA(),t.qZA(),t.TgZ(35,"div",22),t.TgZ(36,"div",10),t.TgZ(37,"label",11),t._uU(38,"Ventas"),t.TgZ(39,"select",23),t.TgZ(40,"option",13),t._uU(41,"pagados"),t.qZA(),t.TgZ(42,"option",13),t._uU(43,"deudas"),t.qZA(),t.qZA(),t._uU(44," entradas "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",24),t.TgZ(46,"div",25),t.TgZ(47,"div"),t.TgZ(48,"div",26),t.TgZ(49,"form"),t.TgZ(50,"table",27),t.TgZ(51,"thead"),t.TgZ(52,"tr",28),t.TgZ(53,"th",29),t.NdJ("sort",function(r){return a.onSort(r)}),t._uU(54,"Ord."),t.qZA(),t.TgZ(55,"th",30),t.NdJ("sort",function(r){return a.onSort(r)}),t._uU(56,"Fecha"),t.qZA(),t.TgZ(57,"th",31),t.NdJ("sort",function(r){return a.onSort(r)}),t._uU(58,"Nombre del Cliente"),t.qZA(),t.TgZ(59,"th",31),t.NdJ("sort",function(r){return a.onSort(r)}),t._uU(60,"Total"),t.qZA(),t.TgZ(61,"th",31),t.NdJ("sort",function(r){return a.onSort(r)}),t._uU(62,"Estado de Pago"),t.qZA(),t.TgZ(63,"th",32),t.NdJ("sort",function(r){return a.onSort(r)}),t._uU(64,"Descargar Pdf"),t.qZA(),t.TgZ(65,"th",33),t._uU(66,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"tbody"),t.YNc(68,Xt,25,14,"tr",34),t.ALo(69,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(70,te,6,0,"div",35),t.TgZ(71,"div",36),t.TgZ(72,"div",25),t.TgZ(73,"div",37),t.TgZ(74,"ngb-pagination",38),t.NdJ("pageChange",function(r){return a.service.page=r}),t.ALo(75,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(76,le,137,28,"ng-template",null,39,t.W1O),t.qZA()),2&e&&(t.xp6(1),t.Q6J("breadcrumbItems",a.breadCrumbItems),t.xp6(6),t.Q6J("ngModel",a.service.searchTerm),t.xp6(6),t.Q6J("ngModel",a.service.pageSize),t.xp6(1),t.Q6J("ngValue",10),t.xp6(2),t.Q6J("ngValue",25),t.xp6(2),t.Q6J("ngValue",50),t.xp6(2),t.Q6J("ngValue",100),t.xp6(8),t.Q6J("formGroup",a.formDateRange),t.xp6(2),t.s9C("formControlName",a.fechaDesde),t.xp6(1),t.s9C("formControlName",a.fechaHasta),t.xp6(9),t.Q6J("ngValue",1),t.xp6(2),t.Q6J("ngValue",2),t.xp6(26),t.Q6J("ngForOf",t.lcZ(69,20,a.transactions$)),t.xp6(2),t.Q6J("ngIf",!a.mostrarSpinner),t.xp6(4),t.Q6J("collectionSize",t.lcZ(75,22,a.total$))("page",a.service.page)("pageSize",a.service.pageSize)("maxSize",5)("rotate",!0)("boundaryLinks",!0))},directives:[V.V,l.Fj,l.JJ,l.On,l.EJ,l.YN,l.Kr,l._Y,l.JL,l.sg,l.u,l.F,g.sg,g.O5,c.N9,c._h,c._L,g.mk,T.w9],pipes:[g.Ov,g.uU],styles:[""]}),o})()}];let ce=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[S.Bz.forChild(de)],S.Bz]}),o})();var ue=s(4335);let ge=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:x._t,useValue:E.v}],imports:[[ce,g.ez,l.UX,l.u5,H.h,c.XC,x.Ti,R.v,q.bt,T.A0,c.jF,c.HK,c.Gs,c.ZS,c.lQ,c.Oz,c.IJ,Q.rP,c.IJ,ue.Me]]}),o})()}}]);