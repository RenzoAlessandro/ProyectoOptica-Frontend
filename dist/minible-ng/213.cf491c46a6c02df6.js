"use strict";(self.webpackChunkminible_ng=self.webpackChunkminible_ng||[]).push([[213],{2974:(J,P,d)=>{d.d(P,{o:()=>l});var _=d(83668);let l=(()=>{class p{}return p.\u0275fac=function(E){return new(E||p)},p.\u0275mod=_.oAB({type:p}),p.\u0275inj=_.cJS({imports:[[]]}),p})()},61213:(J,P,d)=>{d.r(P),d.d(P,{ProductsModule:()=>no});var _=d(86019),l=d(49133),p=d(20154),N=d(40345),E=d(98816),Z=d(16541),T=d(63091),A=d(56225),C=d(75407),x=d(77044),O=d(34976),w=d(43514),m=d(63782),e=d(83668),S=d(91917),L=d(20566),z=d(11950);function B(t,i){}function G(t,i){if(1&t&&e.YNc(0,B,0,0,"ng-template",18),2&t){e.oxw();const o=e.MAs(27);e.Q6J("ngTemplateOutlet",o)}}function W(t,i){}function X(t,i){if(1&t&&e.YNc(0,W,0,0,"ng-template",18),2&t){e.oxw();const o=e.MAs(29);e.Q6J("ngTemplateOutlet",o)}}function K(t,i){}function $(t,i){if(1&t&&e.YNc(0,K,0,0,"ng-template",18),2&t){e.oxw();const o=e.MAs(31);e.Q6J("ngTemplateOutlet",o)}}function ee(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function oe(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function te(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function re(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ae(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ne(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo letras "),e.qZA())}function ie(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ce(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros enteros "),e.qZA())}function se(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function le(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function de(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1," Campo requerido "),e.qZA())}function ue(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}const f=function(t){return{"is-invalid":t}};function pe(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div"),e.TgZ(3,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().saveEvent()}),e.TgZ(4,"p",22),e._uU(5,"* Campo requerido"),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label",26),e._uU(10,"Fecha"),e.qZA(),e._UZ(11,"input",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"div",28),e.TgZ(14,"div",25),e.TgZ(15,"label",26),e._uU(16,"Material *"),e.qZA(),e._UZ(17,"input",29),e.TgZ(18,"div",30),e.YNc(19,ee,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",28),e.TgZ(21,"div",25),e.TgZ(22,"label",26),e._uU(23,"Marca *"),e.qZA(),e._UZ(24,"input",32),e.TgZ(25,"div",30),e.YNc(26,oe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",23),e.TgZ(28,"div",33),e.TgZ(29,"div",25),e.TgZ(30,"label",26),e._uU(31,"C\xf3digo int. *"),e.qZA(),e._UZ(32,"input",34),e.TgZ(33,"div",30),e.YNc(34,te,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",33),e.TgZ(36,"div",25),e.TgZ(37,"label",26),e._uU(38,"Talla *"),e.qZA(),e._UZ(39,"input",35),e.TgZ(40,"div",30),e.YNc(41,re,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",33),e.TgZ(43,"div",25),e.TgZ(44,"label",26),e._uU(45,"Color *"),e.qZA(),e._UZ(46,"input",36),e.TgZ(47,"div",30),e.YNc(48,ae,2,0,"div",31),e.YNc(49,ne,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",23),e.TgZ(51,"div",33),e.TgZ(52,"div",25),e.TgZ(53,"label",26),e._uU(54,"Stock *"),e.qZA(),e._UZ(55,"input",37),e.TgZ(56,"div",30),e.YNc(57,ie,2,0,"div",31),e.YNc(58,ce,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",33),e.TgZ(60,"div",25),e.TgZ(61,"label",26),e._uU(62,"Precio de Compra *"),e.qZA(),e._UZ(63,"input",38),e.TgZ(64,"div",30),e.YNc(65,se,2,0,"div",31),e.YNc(66,le,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",33),e.TgZ(68,"div",25),e.TgZ(69,"label",26),e._uU(70,"Precio de Venta *"),e.qZA(),e._UZ(71,"input",38),e.TgZ(72,"div",30),e.YNc(73,de,2,0,"span",31),e.YNc(74,ue,2,0,"span",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",39),e.TgZ(76,"button",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().guardarMonturas()}),e._uU(77," Registrar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const o=e.oxw();e.xp6(3),e.Q6J("formGroup",o.formMonturas),e.xp6(8),e.s9C("formControlName",o.fecha_registro_montura),e.xp6(6),e.s9C("formControlName",o.material_montura),e.Q6J("ngClass",e.VKq(31,f,o.formM.campoMaterialMontura.invalid&&(o.formM.campoMaterialMontura.dirty||o.formM.campoMaterialMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoMaterialMontura.errors?null:o.formM.campoMaterialMontura.errors.required),e.xp6(5),e.s9C("formControlName",o.marca_montura),e.Q6J("ngClass",e.VKq(33,f,o.formM.campoMarcaMontura.invalid&&(o.formM.campoMarcaMontura.dirty||o.formM.campoMarcaMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoMarcaMontura.errors?null:o.formM.campoMarcaMontura.errors.required),e.xp6(6),e.s9C("formControlName",o.codigo_montura),e.Q6J("ngClass",e.VKq(35,f,o.formM.campoCodigoMontura.invalid&&(o.formM.campoCodigoMontura.dirty||o.formM.campoCodigoMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoCodigoMontura.errors?null:o.formM.campoCodigoMontura.errors.required),e.xp6(5),e.s9C("formControlName",o.talla_montura),e.Q6J("ngClass",e.VKq(37,f,o.formM.campoTallaMontura.invalid&&(o.formM.campoTallaMontura.dirty||o.formM.campoTallaMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoTallaMontura.errors?null:o.formM.campoTallaMontura.errors.required),e.xp6(5),e.s9C("formControlName",o.color_montura),e.Q6J("ngClass",e.VKq(39,f,o.formM.campoColorMontura.invalid&&(o.formM.campoColorMontura.dirty||o.formM.campoColorMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoColorMontura.errors?null:o.formM.campoColorMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formM.campoColorMontura.errors?null:o.formM.campoColorMontura.errors.pattern),e.xp6(6),e.s9C("formControlName",o.cantidad_montura),e.Q6J("ngClass",e.VKq(41,f,o.formM.campoCantidadMontura.invalid&&(o.formM.campoCantidadMontura.dirty||o.formM.campoCantidadMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoCantidadMontura.errors?null:o.formM.campoCantidadMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formM.campoCantidadMontura.errors?null:o.formM.campoCantidadMontura.errors.pattern),e.xp6(5),e.s9C("formControlName",o.precio_compra_montura),e.Q6J("ngClass",e.VKq(43,f,o.formM.campoCompraMontura.invalid&&(o.formM.campoCompraMontura.dirty||o.formM.campoCompraMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoCompraMontura.errors?null:o.formM.campoCompraMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formM.campoCompraMontura.errors?null:o.formM.campoCompraMontura.errors.pattern),e.xp6(5),e.s9C("formControlName",o.precio_venta_montura),e.Q6J("ngClass",e.VKq(45,f,o.formM.campoVentaMontura.invalid&&(o.formM.campoVentaMontura.dirty||o.formM.campoVentaMontura.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formM.campoVentaMontura.errors?null:o.formM.campoVentaMontura.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formM.campoVentaMontura.errors?null:o.formM.campoVentaMontura.errors.pattern),e.xp6(2),e.Q6J("disabled",!o.formMonturas.valid)}}function me(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ge(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function he(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros enteros "),e.qZA())}function _e(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function fe(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function be(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function ve(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function Ce(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div"),e.TgZ(3,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().saveEvent()}),e.TgZ(4,"p",22),e._uU(5,"* Campo requerido"),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label",26),e._uU(10,"Fecha"),e.qZA(),e._UZ(11,"input",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"div",41),e.TgZ(14,"div",25),e.TgZ(15,"label",26),e._uU(16,"Material *"),e.qZA(),e._UZ(17,"input",42),e.TgZ(18,"div",30),e.YNc(19,me,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",23),e.TgZ(21,"div",33),e.TgZ(22,"div",25),e.TgZ(23,"label",26),e._uU(24,"Stock *"),e.qZA(),e._UZ(25,"input",37),e.TgZ(26,"div",30),e.YNc(27,ge,2,0,"div",31),e.YNc(28,he,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",33),e.TgZ(30,"div",25),e.TgZ(31,"label",26),e._uU(32,"Precio de Compra *"),e.qZA(),e._UZ(33,"input",38),e.TgZ(34,"div",30),e.YNc(35,_e,2,0,"div",31),e.YNc(36,fe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",33),e.TgZ(38,"div",25),e.TgZ(39,"label",26),e._uU(40,"Precio de Venta *"),e.qZA(),e._UZ(41,"input",38),e.TgZ(42,"div",30),e.YNc(43,be,2,0,"div",31),e.YNc(44,ve,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",39),e.TgZ(46,"button",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().guardarLunas()}),e._uU(47," Registrar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const o=e.oxw();e.xp6(3),e.Q6J("formGroup",o.formLunas),e.xp6(8),e.s9C("formControlName",o.fecha_registro_luna),e.xp6(6),e.s9C("formControlName",o.material_luna),e.Q6J("ngClass",e.VKq(18,f,o.formL.campoMaterialLuna.invalid&&(o.formL.campoMaterialLuna.dirty||o.formL.campoMaterialLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formL.campoMaterialLuna.errors?null:o.formL.campoMaterialLuna.errors.required),e.xp6(6),e.s9C("formControlName",o.cantidad_luna),e.Q6J("ngClass",e.VKq(20,f,o.formL.campoCantidadLuna.invalid&&(o.formL.campoCantidadLuna.dirty||o.formL.campoCantidadLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formL.campoCantidadLuna.errors?null:o.formL.campoCantidadLuna.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formL.campoCantidadLuna.errors?null:o.formL.campoCantidadLuna.errors.pattern),e.xp6(5),e.s9C("formControlName",o.precio_compra_luna),e.Q6J("ngClass",e.VKq(22,f,o.formL.campoCompraLuna.invalid&&(o.formL.campoCompraLuna.dirty||o.formL.campoCompraLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formL.campoCompraLuna.errors?null:o.formL.campoCompraLuna.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formL.campoCompraLuna.errors?null:o.formL.campoCompraLuna.errors.pattern),e.xp6(5),e.s9C("formControlName",o.precio_venta_luna),e.Q6J("ngClass",e.VKq(24,f,o.formL.campoVentaLuna.invalid&&(o.formL.campoVentaLuna.dirty||o.formL.campoVentaLuna.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formL.campoVentaLuna.errors?null:o.formL.campoVentaLuna.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formL.campoVentaLuna.errors?null:o.formL.campoVentaLuna.errors.pattern),e.xp6(2),e.Q6J("disabled",!o.formLunas.valid)}}function Ze(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Ae(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function xe(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros enteros "),e.qZA())}function Te(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Ie(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function Ne(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Campo requerido "),e.qZA())}function Pe(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1," Ingrese solo n\xfameros y opcional hasta 2 decimales "),e.qZA())}function Me(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div"),e.TgZ(3,"form",21),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().saveEvent()}),e.TgZ(4,"p",22),e._uU(5,"* Campo requerido"),e.qZA(),e.TgZ(6,"div",23),e.TgZ(7,"div",24),e.TgZ(8,"div",25),e.TgZ(9,"label",26),e._uU(10,"Fecha"),e.qZA(),e._UZ(11,"input",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",23),e.TgZ(13,"div",41),e.TgZ(14,"div",25),e.TgZ(15,"label",26),e._uU(16,"Nombre del Accesorio *"),e.qZA(),e._UZ(17,"input",43),e.TgZ(18,"div",30),e.YNc(19,Ze,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",23),e.TgZ(21,"div",33),e.TgZ(22,"div",25),e.TgZ(23,"label",26),e._uU(24,"Stock *"),e.qZA(),e._UZ(25,"input",44),e.TgZ(26,"div",30),e.YNc(27,Ae,2,0,"div",31),e.YNc(28,xe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",33),e.TgZ(30,"div",25),e.TgZ(31,"label",26),e._uU(32,"Precio de Compra *"),e.qZA(),e._UZ(33,"input",45),e.TgZ(34,"div",30),e.YNc(35,Te,2,0,"div",31),e.YNc(36,Ie,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",33),e.TgZ(38,"div",25),e.TgZ(39,"label",26),e._uU(40,"Precio de Venta *"),e.qZA(),e._UZ(41,"input",46),e.TgZ(42,"div",30),e.YNc(43,Ne,2,0,"div",31),e.YNc(44,Pe,2,0,"div",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",39),e.TgZ(46,"button",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().guardarAccesorios()}),e._uU(47," Registrar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const o=e.oxw();e.xp6(3),e.Q6J("formGroup",o.formAccesorios),e.xp6(8),e.s9C("formControlName",o.fecha_registro_accesorio),e.xp6(6),e.s9C("formControlName",o.nombre_accesorio),e.Q6J("ngClass",e.VKq(18,f,o.formA.campoNombreAccesorio.invalid&&(o.formA.campoNombreAccesorio.dirty||o.formA.campoNombreAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formA.campoNombreAccesorio.errors?null:o.formA.campoNombreAccesorio.errors.required),e.xp6(6),e.s9C("formControlName",o.cantidad_accesorio),e.Q6J("ngClass",e.VKq(20,f,o.formA.campoCantidadAccesorio.invalid&&(o.formA.campoCantidadAccesorio.dirty||o.formA.campoCantidadAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formA.campoCantidadAccesorio.errors?null:o.formA.campoCantidadAccesorio.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formA.campoCantidadAccesorio.errors?null:o.formA.campoCantidadAccesorio.errors.pattern),e.xp6(5),e.s9C("formControlName",o.precio_compra_accesorio),e.Q6J("ngClass",e.VKq(22,f,o.formA.campoCompraAccesorio.invalid&&(o.formA.campoCompraAccesorio.dirty||o.formA.campoCompraAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formA.campoCompraAccesorio.errors?null:o.formA.campoCompraAccesorio.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formA.campoCompraAccesorio.errors?null:o.formA.campoCompraAccesorio.errors.pattern),e.xp6(5),e.s9C("formControlName",o.precio_venta_accesorio),e.Q6J("ngClass",e.VKq(24,f,o.formA.campoVentaAccesorio.invalid&&(o.formA.campoVentaAccesorio.dirty||o.formA.campoVentaAccesorio.touched))),e.xp6(2),e.Q6J("ngIf",null==o.formA.campoVentaAccesorio.errors?null:o.formA.campoVentaAccesorio.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formA.campoVentaAccesorio.errors?null:o.formA.campoVentaAccesorio.errors.pattern),e.xp6(2),e.Q6J("disabled",!o.formAccesorios.valid)}}let ye=(()=>{class t{constructor(o,r,a){this.fb=o,this.productosService=r,this.userService=a,this.submitted=!1,this.orden_montura="campoOrdenMontura",this.material_montura="campoMaterialMontura",this.marca_montura="campoMarcaMontura",this.talla_montura="campoTallaMontura",this.color_montura="campoColorMontura",this.codigo_montura="campoCodigoMontura",this.cantidad_montura="campoCantidadMontura",this.precio_compra_montura="campoCompraMontura",this.precio_venta_montura="campoVentaMontura",this.fecha_registro_montura="campoFechaRegistroMontura",this.fecha_modificacion_montura="campoFechaModificacionMontura",this.orden_luna="campoOrdenLuna",this.material_luna="campoMaterialLuna",this.cantidad_luna="campoCantidadLuna",this.precio_compra_luna="campoCompraLuna",this.precio_venta_luna="campoVentaLuna",this.fecha_registro_luna="campoFechaRegistroLuna",this.fecha_modificacion_luna="campoFechaModificacionLuna",this.orden_accesorio="campoOrdenAccesorio",this.nombre_accesorio="campoNombreAccesorio",this.cantidad_accesorio="campoCantidadAccesorio",this.precio_compra_accesorio="campoCompraAccesorio",this.precio_venta_accesorio="campoVentaAccesorio",this.fecha_registro_accesorio="campoFechaRegistroAccesorio",this.fecha_modificacion_accesorio="campoFechaModificacionAccesorio",this.lunas=new O.I,this.monturas=new w.c,this.accesorios=new x.N,this.numberPattern="[0-9]+",this.decimalPattern=/^\d+(\.\d{2})?$/,this.lettersPattern="[a-zA-Z ]*"}ngOnInit(){this.breadCrumbItems=[{label:"Productos"},{label:"A\xf1adir Productos",active:!0}],this.crearFormulario()}crearFormulario(){this.fecha_actual=new Date(Date.now()),this.formMonturas=this.fb.group({[this.material_montura]:[null,[l.kI.required]],[this.marca_montura]:[null,[l.kI.required]],[this.talla_montura]:[null,[l.kI.required]],[this.color_montura]:[null,[l.kI.required,l.kI.pattern(this.lettersPattern)]],[this.codigo_montura]:[null,[l.kI.required]],[this.cantidad_montura]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.precio_compra_montura]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.precio_venta_montura]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fecha_registro_montura]:[{value:this.fecha_actual.toLocaleDateString(),disabled:!0}],[this.fecha_modificacion_montura]:[]}),this.formLunas=this.fb.group({[this.material_luna]:[null,[l.kI.required]],[this.cantidad_luna]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.precio_compra_luna]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.precio_venta_luna]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fecha_registro_luna]:[{value:this.fecha_actual.toLocaleDateString(),disabled:!0}],[this.fecha_modificacion_luna]:[]}),this.formAccesorios=this.fb.group({[this.nombre_accesorio]:[null,[l.kI.required]],[this.cantidad_accesorio]:[null,[l.kI.required,l.kI.pattern(this.numberPattern)]],[this.precio_compra_accesorio]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.precio_venta_accesorio]:[null,[l.kI.required,l.kI.pattern(this.decimalPattern)]],[this.fecha_registro_accesorio]:[{value:this.fecha_actual.toLocaleDateString(),disabled:!0}],[this.fecha_modificacion_accesorio]:[]})}saveEvent(){this.submitted=!0}fA(o){return this.formAccesorios.get(o)}fL(o){return this.formLunas.get(o)}fM(o){return this.formMonturas.get(o)}guardarAccesorios(){this.formAccesorios.valid&&(this.accesorios.nombre_accesorio=this.fA(this.nombre_accesorio).value,this.accesorios.cantidad=Number(this.fA(this.cantidad_accesorio).value),this.accesorios.fecha_creacion_accesorio=new Date(Date.now()),this.accesorios.precio_accesorio_v=Number(this.fA(this.precio_venta_accesorio).value),this.accesorios.precio_accesorio_c=Number(this.fA(this.precio_compra_accesorio).value),this.accesorios.fecha_modificacion_accesorio=new Date(Date.now()),this.accesorios.id_sede=this.userService.getSedebyUser(),this.accesorios.habilitado=!0,this.accesorios.tipo="accesorio",(0,m.H)("loading","Cargando..."),this.productosService.createAccesorios(this.accesorios).subscribe(o=>{(0,m.H)("close",null),(0,m.H)("success","Accesorio guardado"),this.formAccesorios.reset(),this.fA(this.fecha_registro_accesorio).setValue(this.fecha_actual.toLocaleDateString())}))}guardarLunas(){this.formLunas.valid&&(this.lunas.material=this.fL(this.material_luna).value,this.lunas.precio_luna_c=Number(this.fL(this.precio_compra_luna).value),this.lunas.precio_luna_v=Number(this.fL(this.precio_venta_luna).value),this.lunas.fecha_creacion_luna=new Date(Date.now()),this.lunas.fecha_modificacion_luna=new Date(Date.now()),this.lunas.cantidad=Number(this.fL(this.cantidad_luna).value),this.lunas.id_sede=this.userService.getSedebyUser(),this.lunas.habilitado=!0,this.lunas.tipo="luna",(0,m.H)("loading","Cargando..."),this.productosService.createLunas(this.lunas).subscribe(o=>{(0,m.H)("close",null),(0,m.H)("success","Luna guardada"),this.formLunas.reset(),this.fL(this.fecha_registro_luna).setValue(this.fecha_actual.toLocaleDateString())}))}guardarMonturas(){this.formMonturas.valid&&(this.monturas.material=this.fM(this.material_montura).value,this.monturas.marca=this.fM(this.marca_montura).value,this.monturas.talla=this.fM(this.talla_montura).value,this.monturas.color=this.fM(this.color_montura).value,this.monturas.codigo=this.fM(this.codigo_montura).value,this.monturas.precio_montura_c=Number(this.fM(this.precio_compra_montura).value),this.monturas.precio_montura_v=Number(this.fM(this.precio_venta_montura).value),this.monturas.fecha_creacion_monturas=new Date(Date.now()),this.monturas.fecha_modificacion_monturas=new Date(Date.now()),this.monturas.cantidad=Number(this.fM(this.cantidad_montura).value),this.monturas.id_sede=this.userService.getSedebyUser(),this.monturas.habilitado=!0,this.monturas.tipo="montura",(0,m.H)("loading","Cargando..."),this.productosService.createMonturas(this.monturas).subscribe(o=>{(0,m.H)("close",null),(0,m.H)("success","Montura guardada"),this.formMonturas.reset(),this.fM(this.fecha_registro_montura).setValue(this.fecha_actual.toLocaleDateString())}))}get formM(){return this.formMonturas.controls}get formL(){return this.formLunas.controls}get formA(){return this.formAccesorios.controls}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.qu),e.Y36(S.k),e.Y36(L.i))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-product"]],decls:32,vars:6,consts:[[1,"container-fluid"],["title","Registrar un Producto",3,"breadcrumbItems"],[1,"row","mb-4"],[1,"col-xl-12"],[1,"card","mb-0"],["ngbNav","",1,"nav","nav-tabs","nav-justified","nav-tabs-custom",3,"activeId"],["justifiednav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","",1,"nav-link"],[1,"uil","uil-nerd","font-size-20"],[1,"d-none","d-sm-block"],["ngbNavContent",""],[1,"uil","uil-panorama-h-alt","font-size-20"],[1,"uil","uil-box","font-size-20"],[3,"ngbNavOutlet"],["TabContentAbout",""],["TabContentTasks",""],["TabContentMessages",""],[3,"ngTemplateOutlet"],[1,"tab-content","p-4"],[1,"tab-pane","active"],[3,"formGroup","ngSubmit"],[1,"card-title-desc","text-danger"],[1,"row"],[1,"col-12","col-sm-3"],[1,"mb-3"],[1,"control-label"],["placeholder","Seleccione la fecha","type","text","name","title",1,"form-control",3,"formControlName"],[1,"col-12","col-sm-6"],["placeholder","Material de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"invalid-feedback"],[4,"ngIf"],["placeholder","Marca de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"col-12","col-sm-4"],["placeholder","C\xf3digo","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Talla de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Color de la montura","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Cantidad","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Precio","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],[1,"text-end","mt-2"],["type","submit","id","btn-save-event",1,"btn","btn-success","ms-1",3,"disabled","click"],[1,"col-12"],["placeholder","Material de la luna","type","text","name","title",1,"form-control",3,"formControlName","ngClass"],["placeholder","Accesorio","type","text","name","accesorio",1,"form-control",3,"formControlName","ngClass"],["placeholder","Cantidad","type","text","name","cantidad",1,"form-control",3,"formControlName","ngClass"],["placeholder","Precio","type","text","name","accesorio_compra",1,"form-control",3,"formControlName","ngClass"],["placeholder","Precio","type","text","name","accesorio_venta",1,"form-control",3,"formControlName","ngClass"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"ul",5,6),e.TgZ(7,"li",7),e.TgZ(8,"a",8),e._UZ(9,"i",9),e.TgZ(10,"span",10),e._uU(11,"Montura"),e.qZA(),e.qZA(),e.YNc(12,G,1,1,"ng-template",11),e.qZA(),e.TgZ(13,"li",7),e.TgZ(14,"a",8),e._UZ(15,"i",12),e.TgZ(16,"span",10),e._uU(17,"Luna"),e.qZA(),e.qZA(),e.YNc(18,X,1,1,"ng-template",11),e.qZA(),e.TgZ(19,"li",7),e.TgZ(20,"a",8),e._UZ(21,"i",13),e.TgZ(22,"span",10),e._uU(23,"Accesorio"),e.qZA(),e.qZA(),e.YNc(24,$,1,1,"ng-template",11),e.qZA(),e.qZA(),e._UZ(25,"div",14),e.qZA(),e.YNc(26,pe,78,47,"ng-template",null,15,e.W1O),e.YNc(28,Ce,48,26,"ng-template",null,16,e.W1O),e.YNc(30,Me,48,26,"ng-template",null,17,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&o){const a=e.MAs(6);e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(4),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngbNavItem",2),e.xp6(6),e.Q6J("ngbNavItem",3),e.xp6(6),e.Q6J("ngbNavOutlet",a)}},directives:[z.V,p.Pz,p.nv,p.Vx,p.uN,p.tO,_.tP,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,_.mk,_.O5],styles:[""]}),t})();var Ee=d(72156),De=d(59801),I=d(45788),U=d(19039),q=d(4680);class R{constructor(){this.cabeceraExcelIdMont="ID MONTURA",this.cabeceraExcelMaterial="MATERIAL",this.cabeceraExcelMarca="MARCA",this.cabeceraExcelCodigo="CODIGO",this.cabeceraExcelTalla="TALLA",this.cabeceraExcelColor="COLOR",this.cabeceraExcelCantidad="CANTIDAD",this.cabeceraExcelPCompra="PRECIO COMPRA",this.cabeceraExcelPVenta="PRECIO VENTA",this.cabeceraExcelFIngreso="FECHA INGRESO",this.cabeceraExcelTipo="TIPO",this.cabeceraExcelSede="SEDE",this.cabeceraExcelIdLun="ID LUNA",this.cabeceraExcelIdAccesorio="ID ACCESORIO",this.cabeceraExcelNombre="NOMBRE"}}var F=d(8239),qe=d(35427);function Oe(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ngx-dropzone-remove-badge",1),e.NdJ("click",function(a){return e.CHM(o),e.oxw()._remove(a)}),e.qZA()}}const we=[[["ngx-dropzone-label"]]],Se=["ngx-dropzone-label"],Le=["fileInput"];function ze(t,i){1&t&&e.Hsn(0,2,["*ngIf","!_hasPreviews"])}const Ue=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],Fe=["ngx-dropzone-preview","*","ngx-dropzone-label"];let ke=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=e.lG2({type:t,selectors:[["ngx-dropzone-label"]]}),t})();function M(t){return null!=t&&"false"!=`${t}`}let Re=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(o,r){1&o&&(e.O4$(),e.TgZ(0,"svg"),e._UZ(1,"line",0),e._UZ(2,"line",1),e.qZA())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),t})();var D=(()=>{return(t=D||(D={}))[t.BACKSPACE=8]="BACKSPACE",t[t.DELETE=46]="DELETE",D;var t})();let V=(()=>{class t{constructor(o){this.sanitizer=o,this._removable=!1,this.removed=new e.vpe,this.tabIndex=0}set file(o){this._file=o}get file(){return this._file}get removable(){return this._removable}set removable(o){this._removable=M(o)}keyEvent(o){switch(o.keyCode){case D.BACKSPACE:case D.DELETE:this.remove()}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}_remove(o){o.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){var o=this;return(0,F.Z)(function*(){return new Promise((r,a)=>{const c=new FileReader;if(c.onload=s=>{r(s.target.result)},c.onerror=s=>{console.error(`FileReader failed on file ${o.file.name}.`),a(s)},!o.file)return a("No file to read. Please provide a file using the [file] Input property.");c.readAsDataURL(o.file)})})()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(qe.H7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(o,r){1&o&&e.NdJ("keyup",function(c){return r.keyEvent(c)}),2&o&&(e.Ikx("tabindex",r.tabIndex),e.Akn(r.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:Se,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(o,r){1&o&&(e.F$t(we),e.Hsn(0),e.YNc(1,Oe,1,0,"ngx-dropzone-remove-badge",0)),2&o&&(e.xp6(1),e.Q6J("ngIf",r.removable))},directives:[_.O5,Re],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),t})(),Q=(()=>{class t{parseFileList(o,r,a,c){const s=[],n=[];for(let b=0;b<o.length;b++){const v=o.item(b);this.isAccepted(v,r)?a&&v.size>a?this.rejectFile(n,v,"size"):!c&&s.length>=1?this.rejectFile(n,v,"no_multiple"):s.push(v):this.rejectFile(n,v,"type")}return{addedFiles:s,rejectedFiles:n}}isAccepted(o,r){if("*"===r)return!0;const a=r.split(",").map(g=>g.toLowerCase().trim()),c=o.type.toLowerCase(),s=o.name.toLowerCase();return!!a.find(g=>g.endsWith("/*")?c.split("/")[0]===g.split("/")[0]:g.startsWith(".")?s.endsWith(g):g==c)}rejectFile(o,r,a){const c=r;c.reason=a,o.push(c)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),Ve=(()=>{class t{constructor(o){this.service=o,this.change=new e.vpe,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(o){this._disabled=M(o),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(o){this._multiple=M(o)}get maxFileSize(){return this._maxFileSize}set maxFileSize(o){this._maxFileSize=function(t){return isNaN(parseFloat(t))||isNaN(Number(t))?null:Number(t)}(o)}get expandable(){return this._expandable}set expandable(o){this._expandable=M(o)}get disableClick(){return this._disableClick}set disableClick(o){this._disableClick=M(o)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(o){this._processDirectoryDrop=M(o)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(o){this.disabled||(this.preventDefault(o),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(o){if(!this.disabled)if(this.preventDefault(o),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){const r=o.dataTransfer.items;if(r.length>0){const a=[],c=[];for(let n=0;n<r.length;n++){const g=r[n].webkitGetAsEntry();g.isFile?a.push(o.dataTransfer.files[n]):g.isDirectory&&c.push(g)}const s=new DataTransfer;if(a.forEach(n=>{s.items.add(n)}),!c.length&&s.items.length&&this.handleFileDrop(s.files),c.length){const n=[];for(const g of c)n.push(this.extractFilesFromDirectory(g));Promise.all(n).then(g=>{g.reduce((b,v)=>[...b,...v]).forEach(b=>{s.items.add(b)}),this.handleFileDrop(s.files)})}}}else this.handleFileDrop(o.dataTransfer.files)}extractFilesFromDirectory(o){function r(c){return a.apply(this,arguments)}function a(){return(a=(0,F.Z)(function*(c){try{return yield new Promise((s,n)=>c.file(s,n))}catch(s){console.log("Error converting a fileEntry to a File: ",s)}})).apply(this,arguments)}return new Promise((c,s)=>{const n=[],g=o.createReader(),b=()=>{g.readEntries(function(){var v=(0,F.Z)(function*(h){if(h.length){const u=h.filter(k=>k.isFile);for(const k of u){const io=yield r(k);n.push(io)}b()}else c(n)});return function(h){return v.apply(this,arguments)}}())};b()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(o){this.handleFileDrop(o.target.files),this._fileInput.nativeElement.value="",this.preventDefault(o)}handleFileDrop(o){const r=this.service.parseFileList(o,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:r.addedFiles,rejectedFiles:r.rejectedFiles,source:this})}preventDefault(o){o.preventDefault(),o.stopPropagation()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(Q,2))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(o,r,a){if(1&o&&e.Suo(a,V,5),2&o){let c;e.iGM(c=e.CRH())&&(r._previewChildren=c)}},viewQuery:function(o,r){if(1&o&&e.Gf(Le,7),2&o){let a;e.iGM(a=e.CRH())&&(r._fileInput=a.first)}},hostVars:8,hostBindings:function(o,r){1&o&&e.NdJ("click",function(){return r._onClick()})("dragover",function(c){return r._onDragOver(c)})("dragleave",function(){return r._onDragLeave()})("drop",function(c){return r._onDrop(c)}),2&o&&e.ekj("ngx-dz-disabled",r.disabled)("expandable",r.expandable)("unclickable",r.disableClick)("ngx-dz-hovered",r._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[e._Bn([Q])],ngContentSelectors:Fe,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(o,r){1&o&&(e.F$t(Ue),e.TgZ(0,"input",0,1),e.NdJ("change",function(c){return r._onFilesSelected(c)}),e.qZA(),e.YNc(2,ze,1,0,"ng-content",2),e.Hsn(3),e.Hsn(4,1)),2&o&&(e.Q6J("id",r.id)("multiple",r.multiple)("accept",r.accept)("disabled",r.disabled),e.uIk("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedBy),e.xp6(2),e.Q6J("ngIf",!r._hasPreviews))},directives:[_.O5],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),t})(),Qe=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[_.ez]]}),t})();function He(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ngx-dropzone-preview",26),e.NdJ("removed",function(){const c=e.CHM(o).$implicit;return e.oxw().onRemove(c)}),e.TgZ(1,"ngx-dropzone-label"),e._uU(2),e.qZA(),e.qZA()}if(2&t){const o=i.$implicit;e.Q6J("file",o)("removable",!0),e.xp6(2),e.hij("",o.name," ")}}let je=(()=>{class t{constructor(o,r,a,c){this.fb=o,this.productoService=r,this.usuarioService=a,this.label=c,this.sede="campoSede",this.producto="campoProducto",this.sedeC="campoSedeC",this.productoC="campoProductoC",this.productos="campoProductos",this.files=[],this.errorImagen="",this.listProductos=[{id:1,nombre:"Monturas"},{id:2,nombre:"Lunas"},{id:3,nombre:"Accesorios"}],this.filebutton=!1,this.idSede=""}ngOnInit(){this.getListSedes(),this.crearFormulario(),this.breadCrumbItems=[{label:"Productos"},{label:"Actualizaci\xf3n por Excel",active:!0}],this.message="<div class='mb-3'><i class=\"display-4 text-muted uil uil-cloud-upload\"></i></div>Suelte los archivos aqu\xed o haga clic para cargar."}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}crearFormulario(){this.formExportar=this.fb.group({sede:[this.idSede,[l.kI.required]],producto:[null,[l.kI.required]]}),this.formExportarCrear=this.fb.group({[this.sedeC]:[this.idSede,[l.kI.required]],[this.productoC]:[null,[l.kI.required]]}),this.formImportar=this.fb.group({productos:[null,[l.kI.required]]})}f(o){return this.formExportar.get(o)}fC(o){return this.formExportarCrear.get(o)}exportarProductos(){if((0,m.H)("loading","Cargando..."),this.formExportar.valid){let o="";switch(this.f("producto").value){case 1:o="montura";break;case 2:o="luna";break;case 3:o="accesorio"}this.productoService.getProductosbySede(this.f("sede").value,o).subscribe(r=>{if((0,m.H)("close",null),0==r.length)(0,m.H)("success","No existen productos");else{let s=[];switch(o){case"montura":s=r.map(u=>({"ID MONTURA":u.id_producto,"PRECIO COMPRA":u.precio_montura_c,"PRECIO VENTA":u.precio_montura_v,TALLA:u.talla,CODIGO:u.codigo,MARCA:u.marca,CANTIDAD:u.cantidad,COLOR:u.color,MATERIAL:u.material,TIPO:u.tipo,SEDE:u.id_sede,"FECHA INGRESO":new Date(u.fecha_creacion_monturas).toLocaleDateString("en-GB")}));break;case"luna":s=r.map(u=>({"ID LUNA":u.id_producto,"PRECIO COMPRA":u.precio_luna_c,"PRECIO VENTA":u.precio_luna_v,CANTIDAD:u.cantidad,MATERIAL:u.material,TIPO:u.tipo,SEDE:u.id_sede,"FECHA INGRESO":new Date(u.fecha_creacion_luna).toLocaleDateString("en-GB")}));break;case"accesorio":s=r.map(u=>({"ID ACCESORIO":u.id_producto,NOMBRE:u.nombre_accesorio,"PRECIO COMPRA":u.precio_accesorio_c,"PRECIO VENTA":u.precio_accesorio_v,CANTIDAD:u.cantidad,TIPO:u.tipo,SEDE:u.id_sede,"FECHA INGRESO":new Date(u.fecha_creacion_accesorio).toLocaleDateString("en-GB")}))}const g={Sheets:{hoja:I.P6.json_to_sheet(s)},SheetNames:["hoja"]},b=I.cW(g,{bookType:"xlsx",type:"array"}),v=new Blob([b],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),h=this.listSedes.find(u=>u.id_sede==this.f("sede").value);(0,U.Z)(v,o+"_"+h.nombre_sede)}})}}onSelect(o){this.files.push(...o.addedFiles),this.files.length>1?(this.errorImagen="Solo un archivo",this.files=[],this.filebutton=!1):(this.errorImagen="",this.filebutton=!0)}onRemove(o){this.filebutton=!1,this.files.splice(this.files.indexOf(o),1)}uploadFile(){const o=new FileReader;o.readAsBinaryString(this.files[0]),o.onload=r=>{let s,c=I.ij(r.target.result,{type:"binary"});if(c.SheetNames.forEach(n=>{s=I.P6.sheet_to_json(c.Sheets[n],{raw:!1,defval:""})}),this.validarCampoFecha(s))switch(s[0].TIPO.toLowerCase()){case"montura":s[0].hasOwnProperty(this.label.cabeceraExcelIdMont)?this.actualizarProducto(s,s[0].TIPO):this.crearProducto(s,s[0].TIPO);break;case"luna":s[0].hasOwnProperty(this.label.cabeceraExcelIdLun)?this.actualizarProducto(s,s[0].TIPO):this.crearProducto(s,s[0].TIPO);break;case"accesorio":s[0].hasOwnProperty(this.label.cabeceraExcelIdAccesorio)?this.actualizarProducto(s,s[0].TIPO):this.crearProducto(s,s[0].TIPO)}else(0,m.H)("error","Excel con fechas incorrectas")}}actualizarProducto(o,r){let a;this.validarCabeceraExcelUpdate(o,r)?(a=this.objExceltoDBUpdate(o,r),this.validarIdSede(o,a[0].id_sede)&&this.validarTipo(o,r)?((0,m.H)("loading","Cargando..."),this.productoService.updateProductsbyExcel(a).subscribe(s=>{(0,m.H)("close",null),(0,m.H)("success","Lista de "+r+" actualizada"),this.files=[],this.filebutton=!1})):(0,m.H)("error","Columna ID SEDE o TIPO incorrectos o faltantes")):(0,m.H)("error","Excel con cabecera incorrecta")}crearProducto(o,r){let a;if(this.validarCabeceraExcelCreate(o,r)){if(a=this.objExceltoDBCreate(o,r),!this.validarIdSede(o,a[0].id_sede)||!this.validarTipo(o,r))return void(0,m.H)("error","Columna ID SEDE o TIPO incorrectos o faltantes");(0,m.H)("loading","Cargando..."),this.productoService.createProductsbyExcel(a).subscribe(s=>{(0,m.H)("close",null),(0,m.H)("success","Lista de "+r+" creada"),this.files=[],this.filebutton=!1})}else(0,m.H)("error","Excel con cabecera incorrecta")}objExceltoDBCreate(o,r){let a,c,s;switch(r.toLowerCase()){case"montura":return a=o.map(n=>({material:""==n.MATERIAL?"SIN ESPECIFICAR":n.MATERIAL,marca:""==n.MARCA?"SIN ESPECIFICAR":n.MARCA,codigo:""==n.CODIGO?"SIN ESPECIFICAR":n.CODIGO,talla:""==n.TALLA?"SIN ESPECIFICAR":n.TALLA,color:""==n.COLOR?"SIN ESPECIFICAR":n.COLOR,precio_montura_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_montura_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,habilitado:!0,fecha_creacion_monturas:(0,q.p6)(n[this.label.cabeceraExcelFIngreso]),fecha_modificacion_monturas:new Date(Date.now())})),a.forEach(n=>{n.tipo=r.toLowerCase()}),a;case"luna":return c=o.map(n=>({material:""==n.MATERIAL?"SIN ESPECIFICAR":n.MATERIAL,precio_luna_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_luna_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,habilitado:!0,fecha_creacion_luna:(0,q.p6)(n[this.label.cabeceraExcelFIngreso]),fecha_modificacion_luna:new Date(Date.now())})),c.forEach(n=>{n.tipo=r.toLowerCase()}),c;case"accesorio":return s=o.map(n=>({nombre_accesorio:""==n.NOMBRE?"SIN ESPECIFICAR":n.NOMBRE,precio_accesorio_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_accesorio_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),fecha_creacion_accesorio:(0,q.p6)(n[this.label.cabeceraExcelFIngreso]),fecha_modificacion_accesorio:new Date(Date.now()),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,habilitado:!0})),s.forEach(n=>{n.tipo=r.toLowerCase()}),s}}objExceltoDBUpdate(o,r){let a,c,s;switch(r.toLowerCase()){case"montura":return a=o.map(n=>({id_producto:n["ID MONTURA"],precio_montura_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_montura_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),fecha_modificacion_monturas:new Date(Date.now()),tipo:n.TIPO,id_sede:n.SEDE})),a;case"luna":return c=o.map(n=>({id_producto:n["ID LUNA"],precio_luna_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_luna_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),fecha_modificacion_luna:new Date(Date.now()),tipo:n.TIPO,id_sede:n.SEDE})),c;case"accesorio":return s=o.map(n=>({id_producto:n["ID ACCESORIO"],precio_accesorio_c:isNaN(Number(n[this.label.cabeceraExcelPCompra]))?0:Number(n[this.label.cabeceraExcelPCompra]),precio_accesorio_v:isNaN(Number(n[this.label.cabeceraExcelPVenta]))?0:Number(n[this.label.cabeceraExcelPVenta]),fecha_modificacion_accesorio:new Date(Date.now()),cantidad:isNaN(Number(n.CANTIDAD))?0:Number(n.CANTIDAD),id_sede:n.SEDE,tipo:n.TIPO})),s}}validarCabeceraExcelCreate(o,r){switch(r.toLowerCase()){case"montura":return 11==Object.keys(o[0]).length&&o[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&o[0].hasOwnProperty(this.label.cabeceraExcelMarca)&&o[0].hasOwnProperty(this.label.cabeceraExcelCodigo)&&o[0].hasOwnProperty("TALLA")&&o[0].hasOwnProperty("COLOR")&&o[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&o[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&o[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&o[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&o[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&o[0].hasOwnProperty(this.label.cabeceraExcelSede);case"luna":return 7==Object.keys(o[0]).length&&o[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&o[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&o[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&o[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&o[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&o[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&o[0].hasOwnProperty(this.label.cabeceraExcelSede);case"accesorio":return 7==Object.keys(o[0]).length&&o[0].hasOwnProperty(this.label.cabeceraExcelNombre)&&o[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&o[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&o[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&o[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&o[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&o[0].hasOwnProperty(this.label.cabeceraExcelSede);default:return!1}}validarCabeceraExcelUpdate(o,r){switch(r.toLowerCase()){case"montura":return 12==Object.keys(o[0]).length&&o[0].hasOwnProperty(this.label.cabeceraExcelIdMont)&&o[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&o[0].hasOwnProperty(this.label.cabeceraExcelMarca)&&o[0].hasOwnProperty(this.label.cabeceraExcelCodigo)&&o[0].hasOwnProperty(this.label.cabeceraExcelTalla)&&o[0].hasOwnProperty(this.label.cabeceraExcelColor)&&o[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&o[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&o[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&o[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&o[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&o[0].hasOwnProperty(this.label.cabeceraExcelSede);case"luna":return 8==Object.keys(o[0]).length&&o[0].hasOwnProperty(this.label.cabeceraExcelIdLun)&&o[0].hasOwnProperty(this.label.cabeceraExcelMaterial)&&o[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&o[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&o[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&o[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&o[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&o[0].hasOwnProperty(this.label.cabeceraExcelSede);case"accesorio":return 8==Object.keys(o[0]).length&&o[0].hasOwnProperty(this.label.cabeceraExcelIdAccesorio)&&o[0].hasOwnProperty(this.label.cabeceraExcelNombre)&&o[0].hasOwnProperty(this.label.cabeceraExcelCantidad)&&o[0].hasOwnProperty(this.label.cabeceraExcelPCompra)&&o[0].hasOwnProperty(this.label.cabeceraExcelPVenta)&&o[0].hasOwnProperty(this.label.cabeceraExcelFIngreso)&&o[0].hasOwnProperty(this.label.cabeceraExcelTipo)&&o[0].hasOwnProperty(this.label.cabeceraExcelSede);default:return!1}}validarIdSede(o,r){return o.every(a=>a[this.label.cabeceraExcelSede]===r)}validarTipo(o,r){switch(r){case"montura":case"luna":case"accesorio":return o.every(a=>a[this.label.cabeceraExcelTipo]===r);default:return!1}}validarCampoFecha(o){return o.every(r=>10==r[this.label.cabeceraExcelFIngreso].length&&Date.parse((0,q.wd)(r[this.label.cabeceraExcelFIngreso])))}descargarPlantilla(){if(this.formExportarCrear.valid){let o="";switch(this.fC(this.productoC).value){case 1:o="montura";break;case 2:o="luna";break;case 3:o="accesorio"}let r=this.fC(this.sedeC).value;const a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8";let s=[];switch(o){case"montura":s[0]={"PRECIO COMPRA":0,"PRECIO VENTA":0,TALLA:0,CODIGO:0,MARCA:"MARCA",CANTIDAD:0,COLOR:"COLOR",MATERIAL:"MATERIAL",TIPO:o,SEDE:r,"FECHA INGRESO":new Date(Date.now()).toLocaleDateString("en-GB")};break;case"luna":s[0]={"PRECIO COMPRA":0,"PRECIO VENTA":0,CANTIDAD:0,MATERIAL:"MATERIAL",TIPO:o,SEDE:r,"FECHA INGRESO":new Date(Date.now()).toLocaleDateString("en-GB")};break;case"accesorio":s[0]={NOMBRE:"NOMBRE","PRECIO COMPRA":0,"PRECIO VENTA":0,CANTIDAD:0,TIPO:o,SEDE:r,"FECHA INGRESO":new Date(Date.now()).toLocaleDateString("en-GB")}}const g={Sheets:{hoja:I.P6.json_to_sheet(s)},SheetNames:["hoja"]},b=I.cW(g,{bookType:"xlsx",type:"array"}),v=new Blob([b],{type:a}),h=this.listSedes.find(u=>u.id_sede==r);(0,U.Z)(v,o+"_"+h.nombre_sede)}}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.qu),e.Y36(S.k),e.Y36(L.i),e.Y36(R))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-update-excel"]],decls:89,vars:15,consts:[[1,"container-fluid"],["title","Actualici\xf3n de Stock por Archivo Excel",3,"breadcrumbItems"],[1,"row"],[1,"col-12","col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-title-desc"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[3,"formGroup"],[1,"mb-1"],["ngbDropdown","",1,"mt-2","me-1"],["formControlName","sede","placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items"],["formControlName","producto","placeholder","Seleccione el producto","bindValue","id","bindLabel","nombre",3,"items"],[1,"col-12","d-grid"],["type","button",1,"btn","btn-primary","btn-block","mt-2","me-1",3,"disabled","click"],[1,"uil","uil-cloud-download","me-2"],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName"],["placeholder","Seleccione el producto","bindValue","id","bindLabel","nombre",3,"items","formControlName"],[1,"col-12"],["ngx-dropzone","",1,"custom-dropzone",3,"accept","change"],[1,"display-4","text-muted","uil","uil-cloud-upload"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e._uU(7,"Exportar para Actualizar"),e.qZA(),e.TgZ(8,"p",7),e._uU(9,"Seleccione la "),e.TgZ(10,"strong"),e._uU(11,"sede"),e.qZA(),e._uU(12," y "),e.TgZ(13,"strong"),e._uU(14,"tipo de producto"),e.qZA(),e._uU(15," para generar la tabla Excel a modificar. "),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"h4",9),e._uU(18,"Advertencia al Actualizar!"),e.qZA(),e.TgZ(19,"p"),e._uU(20,"No modificar las siguientes columnas: ID MONTURA, TALLA, CODIGO, MARCA, COLOR, MATERIAL, TIPO, SEDE y FECHA INGRESO. Solo se podr\xe1 modificar las siguientes columnas: PRECIO COMPRA, PRECIO VENTA y CANTIDAD (solo digitos). No se permite eliminar productos por excel, a tal efecto ir a Men\xfa -> Listas de Productos."),e.qZA(),e.qZA(),e.TgZ(21,"div"),e.TgZ(22,"form",10),e.TgZ(23,"div",11),e.TgZ(24,"div",2),e.TgZ(25,"div",3),e.TgZ(26,"div",12),e._UZ(27,"ng-select",13),e.qZA(),e.qZA(),e.TgZ(28,"div",3),e.TgZ(29,"div",12),e._UZ(30,"ng-select",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",15),e.TgZ(32,"button",16),e.NdJ("click",function(){return r.exportarProductos()}),e._UZ(33,"i",17),e._uU(34," Descargar Archivo "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",3),e.TgZ(36,"div",4),e.TgZ(37,"div",5),e.TgZ(38,"div",6),e._uU(39,"Exportar para Crear"),e.qZA(),e.TgZ(40,"p",7),e._uU(41,"Seleccione la "),e.TgZ(42,"strong"),e._uU(43,"sede"),e.qZA(),e._uU(44," y "),e.TgZ(45,"strong"),e._uU(46,"tipo de producto"),e.qZA(),e._uU(47," para generar la tabla Excel a modificar. "),e.qZA(),e.TgZ(48,"div",8),e.TgZ(49,"h4",9),e._uU(50,"Advertencia al Crear!"),e.qZA(),e._UZ(51,"hr"),e.TgZ(52,"p"),e._uU(53,"Cada elemento (nuevo producto) debe reutilizarse copiando el TIPO y SEDE. (TIPO en min\xfasculas)."),e.qZA(),e._UZ(54,"hr"),e.qZA(),e.TgZ(55,"div"),e.TgZ(56,"form",10),e.TgZ(57,"div",11),e.TgZ(58,"div",2),e.TgZ(59,"div",3),e.TgZ(60,"div",12),e._UZ(61,"ng-select",18),e.qZA(),e.qZA(),e.TgZ(62,"div",3),e.TgZ(63,"div",12),e._UZ(64,"ng-select",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",15),e.TgZ(66,"button",16),e.NdJ("click",function(){return r.descargarPlantilla()}),e._UZ(67,"i",17),e._uU(68," Descargar Archivo "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",2),e.TgZ(70,"div",20),e.TgZ(71,"div",4),e.TgZ(72,"div",5),e.TgZ(73,"div",6),e._uU(74,"Importar"),e.qZA(),e.TgZ(75,"p",7),e._uU(76,"Cargue el archivo mofificado. "),e.qZA(),e.TgZ(77,"div"),e.TgZ(78,"form",10),e.TgZ(79,"div",21),e.NdJ("change",function(c){return r.onSelect(c)}),e.TgZ(80,"ngx-dropzone-label"),e.TgZ(81,"div"),e._UZ(82,"i",22),e.TgZ(83,"h3"),e._uU(84,"Suelte los archivos aqu\xed o haga clic para cargar."),e.qZA(),e.qZA(),e.qZA(),e.YNc(85,He,3,3,"ngx-dropzone-preview",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",24),e.TgZ(87,"button",25),e.NdJ("click",function(){return r.uploadFile()}),e._uU(88,"Subir Archivo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(21),e.Q6J("formGroup",r.formExportar),e.xp6(5),e.Q6J("items",r.listSedes),e.xp6(3),e.Q6J("items",r.listProductos),e.xp6(2),e.Q6J("disabled",!r.formExportar.valid),e.xp6(24),e.Q6J("formGroup",r.formExportarCrear),e.xp6(5),e.s9C("formControlName",r.sedeC),e.Q6J("items",r.listSedes),e.xp6(3),e.s9C("formControlName",r.productoC),e.Q6J("items",r.listProductos),e.xp6(2),e.Q6J("disabled",!r.formExportarCrear.valid),e.xp6(12),e.Q6J("formGroup",r.formImportar),e.xp6(1),e.Q6J("accept","text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),e.xp6(6),e.Q6J("ngForOf",r.files),e.xp6(2),e.Q6J("disabled",!r.filebutton))},directives:[z.V,l._Y,l.JL,l.sg,p.jt,N.w9,l.JJ,l.u,Ve,ke,_.sg,V],styles:["ngx-dropzone[_ngcontent-%COMP%], .custom-dropzone[_ngcontent-%COMP%]{margin:20px}.custom-dropzone[_ngcontent-%COMP%]{border-radius:5px;font-size:1vh}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:5px solid #eb4f4f}.icon[_ngcontent-%COMP%]{width:15%;height:15%}"]}),t})();const Ye={asc:"desc",desc:"","":"asc"};let Be=(()=>{class t{constructor(){this.sortable="",this.direction="",this.sort=new e.vpe}rotate(){this.direction=Ye[this.direction],this.sort.emit({column:this.sortable,direction:this.direction})}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=e.lG2({type:t,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(o,r){1&o&&e.NdJ("click",function(){return r.rotate()}),2&o&&e.ekj("asc","asc"===r.direction)("desc","desc"===r.direction)},inputs:{sortable:"sortable",direction:"direction"},outputs:{sort:"sort"}}),t})();var H=d(94774);const Ge=["autocomplete"];function We(t,i){1&t&&e._UZ(0,"a",34),2&t&&e.Q6J("innerHTML",i.$implicit.id_producto,e.oJD)}function Xe(t,i){1&t&&e._UZ(0,"div",34),2&t&&e.Q6J("innerHTML",i.$implicit,e.oJD)}function Ke(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"td"),e.TgZ(2,"td"),e._UZ(3,"ngb-highlight",35),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"ngb-highlight",35),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"ngb-highlight",35),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"ngb-highlight",35),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"ngb-highlight",35),e.qZA(),e.TgZ(12,"td"),e._UZ(13,"ngb-highlight",35),e.qZA(),e.TgZ(14,"td"),e._UZ(15,"ngb-highlight",35),e.qZA(),e.TgZ(16,"td"),e._UZ(17,"ngb-highlight",35),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"ngb-highlight",35),e.qZA(),e.TgZ(20,"td"),e._UZ(21,"ngb-highlight",35),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"td"),e.TgZ(24,"a",36),e.NdJ("click",function(){const a=e.CHM(o),c=a.$implicit,s=a.index;return e.oxw().eliminar(c,s)}),e._UZ(25,"i",37),e.qZA(),e.qZA(),e.qZA()}if(2&t){const o=i.$implicit,r=i.index;e.xp6(3),e.Q6J("result",r+1),e.xp6(2),e.Q6J("result",o.material),e.xp6(2),e.Q6J("result",o.marca),e.xp6(2),e.Q6J("result",o.codigo),e.xp6(2),e.Q6J("result",o.talla),e.xp6(2),e.Q6J("result",o.color),e.xp6(2),e.Q6J("result",o.cantidad),e.xp6(2),e.Q6J("result",o.precio_montura_c),e.xp6(2),e.Q6J("result",o.precio_montura_v),e.xp6(2),e.Q6J("result",e.xi3(22,10,o.fecha_creacion_monturas,"dd/MM/yyyy"))}}function $e(t,i){1&t&&(e.TgZ(0,"div",2),e.TgZ(1,"div",24),e.TgZ(2,"div",38),e.TgZ(3,"a",39),e._UZ(4,"i",40),e._uU(5," Cargando "),e.qZA(),e.qZA(),e.qZA(),e.qZA())}let eo=(()=>{class t{constructor(o,r,a){this.fb=o,this.usuarioService=r,this.monturasService=a,this.mostrarSpinner=!1,this.isMasterSel=!1,this.listSedes=[],this.checkedMonturasList=[],this.listAllProducts=[],this.keyword="id_producto",this.products=[],this.nombre_sedes="campoSede",this.idSede="",this.monturasList=[]}ngOnInit(){this.getListSedes(),this.getListMonturas(),this.crearFormulario(),this.breadCrumbItems=[{label:"Productos"},{label:"Inventario de Monturas",active:!0}]}getListMonturas(){this.monturasService.getProductosbySede(this.usuarioService.getSedebyUser(),"montura").subscribe(o=>{this.listMonturas=o;const r={isSelected:!1};this.listMonturas.forEach(a=>{Object.assign(a,r)}),this.mostrarSpinner=!0})}crearFormulario(){this.formInventario=this.fb.group({[this.nombre_sedes]:[this.idSede]})}fS(o){return this.formInventario.get(o)}changeSede(){this.products=[],this.idSede=this.fS(this.nombre_sedes).value,this.updateListMonturas(this.idSede)}updateListMonturas(o){this.monturasService.getProductosbySede(o,"montura").subscribe(r=>{this.listMonturas=r;const a={isSelected:!1};this.listMonturas.forEach(c=>{Object.assign(c,a)}),this.mostrarSpinner=!0})}getListSedes(){this.listSedes=JSON.parse(localStorage.getItem("sedes")),this.idSede=this.usuarioService.getSedebyUser()}removeProduct(){this.products=this.products.filter(o=>!1!==o.isSelected)}eliminar(o,r){this.products[r].isSelected=!1,this.removeProduct()}selectEvent(o){if(this.products.find(a=>a.id_producto===o.id_producto))return(0,m.H)("error","Este producto ya fue registrado"),void this.autocomplete.clear();this.products.push(Object.assign(Object.assign({},o),{isSelected:!0})),this.autocomplete.clear()}onChangeSearch(o){}onFocused(o){}exportarMonturas(){const a=this.filterArrays(this.listMonturas,this.products);this.products.push(...a);let c=[];c=this.products.map(h=>({"ID MONTURA":h.id_producto,TALLA:h.talla,CODIGO:h.codigo,MARCA:h.marca,CANTIDAD:h.cantidad,COLOR:h.color,MATERIAL:h.material,INVENTARIO:h.isSelected?"SI":"NO","FECHA INGRESO":new Date(h.fecha_creacion_monturas).toLocaleDateString("en-GB")}));const n={Sheets:{hoja:I.P6.json_to_sheet(c)},SheetNames:["hoja"]},g=I.cW(n,{bookType:"xlsx",type:"array"}),b=new Blob([g],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),v=this.listSedes.find(h=>h.id_sede==this.fS(this.nombre_sedes).value);(0,U.Z)(b,"monturas_"+v.nombre_sede),this.products=[]}filterArrays(o,r){let a=[];return a=o.filter(c=>!r.find(s=>s.id_producto===c.id_producto)),a}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.qu),e.Y36(L.i),e.Y36(S.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-inventario"]],viewQuery:function(o,r){if(1&o&&(e.Gf(Ge,5),e.Gf(Be,5)),2&o){let a;e.iGM(a=e.CRH())&&(r.autocomplete=a.first),e.iGM(a=e.CRH())&&(r.headers=a)}},features:[e._Bn([_.JJ])],decls:74,vars:16,consts:[[1,"container-fluid"],["title","Inventario de Monturas",3,"breadcrumbItems"],[1,"row"],[1,"col-12","mb-2"],["role","toolbar",1,"btn-toolbar"],[1,"col-12","col-md-3","d-grid","mb-2"],[3,"formGroup"],["ngbDropdown",""],["placeholder","Seleccione la sede","bindValue","id_sede","bindLabel","nombre_sede",3,"items","formControlName","change"],[1,"col-12","col-md-6","d-grid","mb-2","px-2"],[1,"position-relative"],["placeholder","Buscar productos","historyIdentifier","","focusFirst","true",3,"data","searchKeyword","itemTemplate","notFoundTemplate","selected","inputChanged","inputFocused","keyup.enter"],["autocomplete",""],["itemTemplate",""],["notFoundTemplate",""],[1,"col-12","col-md-3","d-grid"],[1,"btn-group","mb-2"],["type","button","value","Descargar Archivo",1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"row","md-2"],[1,"col-sm-12","col-md-12"],[1,"dataTables_length","text-md-end"],[1,"d-inline-flex","align-items-center"],["name","pageSize",1,"custom-select","custom-select-sm","form-control","form-control-sm","form-select","form-select-sm"],[3,"ngValue"],[1,"col-12"],[1,"table-responsive","mb-4"],[1,"table","table-centered","table-nowrap","mb-0","align-middle","table-card-list",2,"border-spacing","0 12px","width","100%"],[1,"bg-transparent"],[2,"width","20px"],[2,"width","170px"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center"],[1,"text-md-end","float-md-end","pagination-rounded"],[3,"innerHTML"],[3,"result","term"],["placement","top","ngbTooltip","Eliminar",1,"px-2","text-danger",3,"click"],[1,"uil","uil-trash-alt","font-size-18"],[1,"text-center","my-3"],["href","javascript:void(0);",1,"text-primary"],[1,"mdi","mdi-loading","mdi-spin","font-size-20","align-middle","me-2"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div"),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"form",6),e.TgZ(8,"div",7),e.TgZ(9,"ng-select",8),e.NdJ("change",function(){return r.changeSede()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"ng-autocomplete",11,12),e.NdJ("selected",function(c){return r.selectEvent(c)})("inputChanged",function(c){return r.onChangeSearch(c)})("inputFocused",function(c){return r.onFocused(c)})("keyup.enter",function(c){return r.selectEvent(c)}),e.qZA(),e.YNc(14,We,1,1,"ng-template",null,13,e.W1O),e.YNc(16,Xe,1,1,"ng-template",null,14,e.W1O),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"div",16),e.TgZ(20,"input",17),e.NdJ("click",function(){return r.exportarMonturas()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",18),e.TgZ(22,"div",19),e.TgZ(23,"div",20),e.TgZ(24,"label",21),e._uU(25,"Mostrar"),e.TgZ(26,"select",22),e.TgZ(27,"option",23),e._uU(28,"10"),e.qZA(),e.TgZ(29,"option",23),e._uU(30,"25"),e.qZA(),e.TgZ(31,"option",23),e._uU(32,"50"),e.qZA(),e.TgZ(33,"option",23),e._uU(34,"100"),e.qZA(),e.TgZ(35,"option",23),e._uU(36,"200"),e.qZA(),e.qZA(),e._uU(37," entradas"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",2),e.TgZ(39,"div",24),e.TgZ(40,"div",25),e.TgZ(41,"form"),e.TgZ(42,"table",26),e.TgZ(43,"thead"),e.TgZ(44,"tr",27),e._UZ(45,"th",28),e.TgZ(46,"th"),e._uU(47,"Ord."),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Material"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Marca"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"C\xf3d."),e.qZA(),e.TgZ(54,"th"),e._uU(55,"Talla"),e.qZA(),e.TgZ(56,"th"),e._uU(57,"Color"),e.qZA(),e.TgZ(58,"th"),e._uU(59,"Stock"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"P. Compra"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"P. Venta"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"Fecha de ing."),e.qZA(),e.TgZ(66,"th",29),e._uU(67,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"tbody"),e.YNc(69,Ke,26,13,"tr",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(70,$e,6,0,"div",31),e.TgZ(71,"div",32),e.TgZ(72,"div",24),e._UZ(73,"div",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const a=e.MAs(15),c=e.MAs(17);e.xp6(1),e.Q6J("breadcrumbItems",r.breadCrumbItems),e.xp6(6),e.Q6J("formGroup",r.formInventario),e.xp6(2),e.s9C("formControlName",r.nombre_sedes),e.Q6J("items",r.listSedes),e.xp6(3),e.Q6J("data",r.listMonturas)("searchKeyword",r.keyword)("itemTemplate",a)("notFoundTemplate",c),e.xp6(8),e.Q6J("disabled",!(r.products.length>0)),e.xp6(7),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(2),e.Q6J("ngValue",200),e.xp6(34),e.Q6J("ngForOf",r.products),e.xp6(1),e.Q6J("ngIf",!r.mostrarSpinner)}},directives:[z.V,l._Y,l.JL,l.sg,p.jt,N.w9,l.JJ,l.u,H.YR,l.YN,l.Kr,l.F,_.sg,_.O5,p._h,p._L],pipes:[_.uU],styles:[""]}),t})();var y=d(85298);const oo=[{path:"addproducts",component:ye,data:{role:["Admin"]},canActivate:[y.a]},{path:"accesorios",component:C.c,data:{role:["Vendedor","Admin"]},canActivate:[y.a]},{path:"lunas",component:Ee.N,data:{role:["Vendedor","Admin"]},canActivate:[y.a]},{path:"monturas",component:De.x,data:{role:["Vendedor","Admin"]},canActivate:[y.a]},{path:"updateexcel",component:je,data:{role:["Admin"]},canActivate:[y.a]},{path:"inventario",component:eo,data:{role:["Admin"]},canActivate:[y.a]}];let to=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[A.Bz.forChild(oo)],A.Bz]}),t})();var j=d(41867),Y=d(64351),ro=d(2974);const ao={url:"https://httpbin.org/post"};let no=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[R,{provide:j._t,useValue:ao}],imports:[[to,_.ez,l.UX,l.u5,E.h,p.XC,j.Ti,T.v,Z.bt,N.A0,p.jF,p.HK,p.Gs,p.ZS,p.lQ,p.Oz,p.IJ,Qe,Y.n4,H.rP,Y.Tf,ro.o]]}),t})()},4680:(J,P,d)=>{function _(Z){return new Promise((T,A)=>{var C=new Image;C.setAttribute("crossOrigin","anonymous"),C.onload=()=>{var x=document.createElement("canvas");x.width=C.width,x.height=C.height,x.getContext("2d").drawImage(C,0,0);var w=x.toDataURL("image/png");T(w)},C.onerror=x=>{A(x)},C.src=Z})}function l(Z){const[T,A,C]=Z.split("/");return new Date(+C,+A-1,+T)}function p(Z){const[T,A,C]=Z.split("/");return C+"-"+A+"-"+T}function N(Z,T){var A=Math.pow(10,T||0);return Math.round(Z*A)/A}function E(Z){return Z.toISOString().substring(0,7)}d.d(P,{up:()=>_,p6:()=>l,wd:()=>p,NM:()=>N,fh:()=>E})}}]);